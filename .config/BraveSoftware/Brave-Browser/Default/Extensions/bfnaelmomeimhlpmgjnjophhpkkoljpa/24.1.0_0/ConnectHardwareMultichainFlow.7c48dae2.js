(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},i=n.parcelRequire1d24;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},n.parcelRequire1d24=i),i.register("gzsA1",(function(e,t){i("5V6iE").register(JSON.parse('{"8Uwcb":"ConnectHardwareMultichainFlow.7c48dae2.js","98k3u":"bip32.f27ae5a8.js","9x3Iv":"Solana.95d9c53c.js","hgCva":"Solana.b2c4f23c.js","hFDiN":"Eth.e923e106.js","2UKlV":"semver.8ccfa2da.js","8ydDW":"english.6aeeb454.js","esIsT":"crypto-browserify.1c9b4a3e.js","h3t8x":"TransportWebHID.6ce3c950.js","9Dpy0":"popup.5cbd182e.css"}'))})),i.register("5V6iE",(function(t,n){var r,o;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("gMNJN",(function(t,n){e(t.exports,"transactionsSdk",(function(){return j})),e(t.exports,"fungiblesSdk",(function(){return G})),e(t.exports,"hooks",(function(){return K}));var r=i("6Tvfa");i("4ZT2Y");var o=i("iOfbc"),s=i("belzv"),a=i("cR6w7"),c=i("54qyi"),u=i("faYhk"),d=i("gYh0e");i("hsoDC");var l=i("cHdXl"),f=i("8NH57");i("W0Kfy");var p=i("8We9Q"),h=i("4QHep"),g=i("bUo8j"),v=i("iPvw0"),y=i("6oMdZ"),m=i("1uUV4"),T=i("a0t1u"),w=i("4raQz"),E=i("5Wbtn");i("fOc77");var b=i("jXZgH"),S=i("8Hh7g"),A=i("6Nxml"),x=i("5Z2YQ"),I=i("ibYAx"),O=i("5Doro"),P=i("5cqUH"),D=i("jPDaF"),R=i("hvlNY"),C=i("h5kyv"),N=i("WH8YE"),L=i("d1qx3"),k=i("9hiP6");const M=new(0,D.LegacyIndexedDBProxy),_=new(0,w.PriorityFeeService),B=(0,N.getVaultProxy)(),U=(0,w.createUtxoManager)(new(0,w.UtxoStore)(M)),F=new(0,a.CollectiblesSdk),j=new(0,w.TransactionsSdk),G=new(0,d.FungiblesSdk),K=function(e){const{analytics:t,chainAvailabilityDeps:n,fungiblesSdk:i,legacyStorage:O,priorityFeeService:D,queryClient:R,storage:N,vaultProxy:M}=e,_=(0,s.createChainHooks)(M,n,R,[r.invalidateAllAccounts,v.invalidateAddressBookEntries,f.invalidateActionBanners]),B=(0,r.createAccountHooks)(M,N,O,R,_,(e=>e.invalidateQueries(["browser-ext/MultichainMockAccountsContext"])),t,(0,P.getLegacyMnemonicFetcher)()),j=(0,o.createAutoConfirmHooks)(M,N,_,t,R),G=(0,x.createClusterHooks)(O),K=(0,h.createPriceHooks)({queryClient:R,getApiEnvironment:A.getAPIEnvironment}),W=(0,v.createSettingsHooks)(M,N,O,R,_,t,I.BROWSER_ENV.browser.name===S.BROWSER_MAP.firefox||v.DEFAULT_IS_ANALYTICS_OPTED_OUT),V=(0,w.createTransactionHooks)(B,M,R,N,t,K,A.getAPIEnvironment,U),q=(0,y.createStakingHooks)(V,R,A.getAPIEnvironment,C.asyncStakeAnalytics),z=(0,m.createStorageHooks)(O,N,R),H=(0,E.createWalletScreenHooks)(A.getAPIEnvironment,t),$=(0,d.createFungibleHooks)({analytics:t,sdk:i,storage:N,legacyStorage:O,getApiEnvironment:A.getAPIEnvironment,queryClient:R,settingsHooks:W,transactionHooks:V,accountSigner:M,accountHooks:B,priorityFeeService:D,utxoManager:U,vaultProxy:M,chainHooks:_,priceHooks:K,walletScreenHooks:H}),Y=(0,a.createCollectibleHooks)(M,N,A.getAPIEnvironment,R,D,B,t,V,$,U,F),J=(0,T.createSwapperHooks)(M,N,A.getAPIEnvironment,R,t,C.asyncSwapAnalytics,K,$,B,W,V),X=(0,u.createFiatRampHooks)(A.getAPIEnvironment),Q=(0,k.getLedgerWebHIDDependencies)(),Z=(0,l.createHardwareWireHooks)((0,k.getLedgerWebHIDDependencies)(),R),ee=(0,p.createOnboardingHooks)(N,R,t,Q,O),te=(0,f.createInterstitialHooks)(N,R,B,I.ENABLE_DEV_SETTINGS||(0,L.isDebugBuild)(),f.Platform.BrowserExt,t),ne=(0,b.createShortcutHooks)(A.getAPIEnvironment,R),re=(0,g.createQuestHooks)(A.getAPIEnvironment,R,B,W),oe=(0,c.createExploreHooks)(N,A.getAPIEnvironment,B,t.getDeviceId(),(()=>(0,C.isFeatureEnabled)("enable-bitcoin-explore")));return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},B),j),_),G),Y),$),ee),K),W),q),z),J),V),Z),X),te),H),ne),re),oe)}({analytics:C.analytics,chainAvailabilityDeps:{storage:M},fungiblesSdk:G,legacyStorage:new(0,R.LocalStorage),priorityFeeService:_,queryClient:O.queryClient,storage:M,utxoManager:U,vaultProxy:B})})),i.register("4ZT2Y",(function(t,n){e(t.exports,"createAutoConfirmHooks",(function(){return i("iOfbc").createAutoConfirmHooks})),i("jXsMe");i("iOfbc"),i("aKET2"),i("6qtMD")})),i.register("jXsMe",(function(t,n){e(t.exports,"createAutoConfirmHooks",(function(){return i("iOfbc").createAutoConfirmHooks}));i("lvwZP"),i("74ky9"),i("3piFU"),i("auOYu"),i("iOfbc")})),i.register("lvwZP",(function(e,t){i("lBuGR"),i("lDSNw"),i("auOYu")})),i.register("auOYu",(function(t,n){e(t.exports,"useFetchEnabledNetworkIdsForDomain",(function(){return u}),(function(e){return u=e}));var r=i("lNRH9"),o=i("6Nxml"),s=i("gmVmN"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=e=>[`auto-confirm:${e}--enabled`];function u(e){return(0,r.useQuery)({queryKey:c((0,s.removeWebPrefixes)(e)),refetchOnMount:"always",cacheTime:3e5,queryFn(){return a(this,void 0,void 0,(function*(){return yield function(e){return a(this,void 0,void 0,(function*(){const t=yield fetch(`${(0,o.getAPIEnvironment)()}/auto-confirm/v1/dapp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:e})}),n=yield t.json();return(null==n?void 0:n.supportedChainIds)&&Array.isArray(n.supportedChainIds)?n.supportedChainIds:[]}))}((0,s.removeWebPrefixes)(e))}))}})}})),i.register("74ky9",(function(n,r){e(n.exports,"useAutoConfirmSettingsStore",(function(){return a}));var o=i("9xrNA");const s={settings:void 0,origin:void 0,accountIdentifier:void 0},a=t(o)((e=>Object.assign(Object.assign({},s),{setSettingsForDomain:(t,n,r)=>e({accountIdentifier:t,origin:n,settings:r}),reset:()=>e(s)})))})),i.register("3piFU",(function(n,r){e(n.exports,"useAutoConfirmSettingsProps",(function(){return h}),(function(e){return h=e}));var o=i("6Tvfa"),s=i("lBuGR"),a=i("iPvw0"),c=i("6nLCM"),u=i("lDSNw"),d=i("lQxWu"),l=i("74ky9"),f=i("auOYu"),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const h=(e,n,r,i,h,g,{origin:v,autoSave:y=!1})=>{const{data:m}=(0,o.useSelectedMultiChainAccount)(e,n,r,!1,i),T=m?m.identifier:"",{get:{data:w},set:{mutateAsync:E}}=(0,a.useAutoConfirmSettings)(n,g,T,v),b=t(d)(w),S=(0,o.useSelectedNetworks)(e,n,r,i),{data:A=[],isLoading:x}=(0,f.useFetchEnabledNetworkIdsForDomain)(v),{data:[I,O]}=(0,s.useFeatureFlags)(["kill-automatic-approval","enable-automatic-approval-for-all-dapps"]),P=A.length>0,D=!I&&(O||P),{shadowSettings:R,setShadowSettings:C,reset:N,origin:L,accountIdentifier:k}=(0,l.useAutoConfirmSettingsStore)((e=>({shadowSettings:e.settings,setShadowSettings:e.setSettingsForDomain,origin:e.origin,accountIdentifier:e.accountIdentifier,reset:e.reset})));t(u).useEffect((()=>{v==L&&T==k||N()}),[v,L,N,T,k]),t(u).useEffect((()=>{D&&null!=w&&(null!=w&&null==R&&C(T,v,w),null==w||!y||(0,c.dequal)(w,R)||(0,c.dequal)(w,b)||C(T,v,w))}),[w,C,R,v,T,D,y,L,k,b]);const M=t(u).useMemo((()=>(0,o.isHardwareWalletAccountType)(null==m?void 0:m.type)),[m]),_=t(u).useMemo((()=>O?S:S.filter((e=>A.includes(e)))),[S,A,O]),B=t(u).useCallback((e=>{var t;return e?!!(null===(t=null==R?void 0:R.networks)||void 0===t?void 0:t[e]):_.some((e=>{var t;return!!(null===(t=null==R?void 0:R.networks)||void 0===t?void 0:t[e])}))}),[_,R]),U=t(u).useCallback((e=>{var t,n;if(!D||M)return;const r=JSON.parse(JSON.stringify(R));if((null==r?void 0:r.networks)&&null==(null===(t=null==r?void 0:r.networks)||void 0===t?void 0:t[e]))r.networks[e]=!0;else{if(!(null==r?void 0:r.networks))return!1;r.networks[e]=!r.networks[e]}r.sessionStartTime=Date.now(),r.maxSessionDuration=a.MAX_SESSION_DURATION,C(T,v,r),y&&E(r);const o=null!==(n=r.networks[e])&&void 0!==n&&n;return h.onAutoConfirmSettingsChanged({origin:v,networkID:e,enabled:o,sessionStartTime:o?null==r?void 0:r.sessionStartTime:void 0,maxSessionDuration:o?null==r?void 0:r.maxSessionDuration:void 0,view:y?"TRUSTED_APP":"NOTIFICATION"}),o}),[D,M,R,C,T,v,y,h,E]),F=t(u).useCallback((()=>{if(!D||null==R||M)return;const e=!B(),t=JSON.parse(JSON.stringify(R));for(const n of _)t.networks[n]=e;return t.sessionStartTime=Date.now(),t.maxSessionDuration=a.MAX_SESSION_DURATION,C(T,v,JSON.parse(JSON.stringify(t))),y&&E(t),h.onAutoConfirmSettingsChanged({origin:v,networkID:"all",enabled:e,sessionStartTime:e?null==t?void 0:t.sessionStartTime:void 0,maxSessionDuration:e?null==t?void 0:t.maxSessionDuration:void 0,view:y?"TRUSTED_APP":"NOTIFICATION"}),e}),[D,R,M,B,C,T,v,y,h,_,E]),j=t(u).useCallback((()=>p(void 0,void 0,void 0,(function*(){D&&null!=R&&!M&&(yield E(R))}))),[R,E,D,M]),G=t(u).useMemo((()=>{var e;return null!=(null==R?void 0:R.sessionStartTime)?new Date((null==R?void 0:R.sessionStartTime)+1e3*(null!==(e=null==R?void 0:R.maxSessionDuration)&&void 0!==e?e:0)):null}),[null==R?void 0:R.sessionStartTime,null==R?void 0:R.maxSessionDuration]),K=x;return t(u).useMemo((()=>({enabled:D,isHardwareAccount:M,showAutoConfirmRow:D&&!M,toggle:U,networkIDs:_,isActive:B,untilDate:G,settings:R,toggleAll:F,save:j,resetShadowSettings:N,loading:K,isAutoConfirmIsTouched:!(0,c.dequal)(R,w)})),[D,M,U,_,B,G,R,F,j,N,K,w])}})),i.register("lQxWu",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("lDSNw");e.exports.default=function(e){var t=n.useRef();return n.useEffect((function(){t.current=e})),t.current}})),i.register("iOfbc",(function(t,n){e(t.exports,"createAutoConfirmHooks",(function(){return a}));var r=i("6Tvfa"),o=i("6qtMD"),s=i("3piFU");function a(e,t,n,i,a){const c=new(0,r.AccountAnalytics)(i),u=new(0,o.AutoConfirmAnalytics)(i);return{useAutoConfirmSettingsProps:r=>(0,s.useAutoConfirmSettingsProps)(e,t,n,c,u,a,r)}}})),i.register("6qtMD",(function(t,n){e(t.exports,"AutoConfirmAnalytics",(function(){return c}),(function(e){return c=e}));var r,o=i("4yY1D"),s=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},a=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class c{onAutoConfirmSettingsChanged({origin:e,networkID:t,enabled:n,sessionStartTime:i,maxSessionDuration:s,view:c}){o.telemetry.addBreadcrumb(`Auto-Confirm: ${n?"Enabling":"Disabling"} network ID ${t}`,o.FeatureTag.AutoConfirm,o.Severity.Info),a(this,r,"f").capture("autoConfirmSettingsChanged",{data:{origin:e,networkId:t,enabled:n,sessionStartTime:n?i:void 0,maxSessionDuration:n?s:void 0,view:c}})}transactionAutoConfirmed(e,t){var n;const i={type:"transaction",sequenceId:e,data:t};return(null===(n=t.autoConfirm.auditTrail)||void 0===n?void 0:n.length)&&t.autoConfirm.auditTrail.length<7&&(t.autoConfirm.suspectSettingsTamper=!0),o.telemetry.addBreadcrumb(`Auto-Confirm: transaction on origin ${t.origin} for network ${t.networkId} auto-confirmed`,o.FeatureTag.AutoConfirm,o.Severity.Info),t.autoConfirm.suspectSettingsTamper&&o.telemetry.addBreadcrumb("Auto-Confirm: suspected tampering with settings...",o.FeatureTag.AutoConfirm,o.Severity.Info),a(this,r,"f").capture("transactionAutoConfirmed",i)}messageAutoConfirmed(e,t){var n;const i={type:"message",sequenceId:e,data:t};return(null===(n=t.autoConfirm.auditTrail)||void 0===n?void 0:n.length)&&t.autoConfirm.auditTrail.length<7&&(t.autoConfirm.suspectSettingsTamper=!0),o.telemetry.addBreadcrumb(`Auto-Confirm: message on origin ${t.origin} for network ${t.networkId} auto-confirmed`,o.FeatureTag.AutoConfirm,o.Severity.Info),t.autoConfirm.suspectSettingsTamper&&o.telemetry.addBreadcrumb("Auto-Confirm: suspected tampering with settings...",o.FeatureTag.AutoConfirm,o.Severity.Info),a(this,r,"f").capture("transactionAutoConfirmed",i)}constructor(e){r.set(this,void 0),s(this,r,e,"f")}}r=new WeakMap})),i.register("aKET2",(function(e,t){i("4chX7"),i("iPvw0"),i("4raQz"),i("gmVmN"),i("3YrMy")})),i.register("3YrMy",(function(t,n){e(t.exports,"isDappWhitelistedForTransaction",(function(){return c}),(function(e){return c=e})),e(t.exports,"isDappWhitelistedForMessage",(function(){return u}),(function(e){return u=e}));var r=i("belzv"),o=i("6Nxml"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=e=>`${(0,o.getAPIEnvironment)()}/auto-confirm/v1/${e}`;function c(e){return s(this,void 0,void 0,(function*(){if(r.Chains.isEVMNetworkID(e.chainId)){const t=yield fetch(a("transaction"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({txObjects:e.txObjects,chainId:e.chainId,domain:e.domain})}),n=yield t.json();return!0===(null==n?void 0:n.isEligible)}if(r.Chains.isSolanaNetworkID(e.chainId)){const t=yield fetch(a("transaction"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactions:e.transactions,chainId:e.chainId,domain:e.domain})}),n=yield t.json();return!0===(null==n?void 0:n.isEligible)}return!1}))}function u(e){return s(this,void 0,void 0,(function*(){if(r.Chains.isEVMNetworkID(e.chainId)){const t=JSON.parse(JSON.stringify(e.data));delete t.message,delete t.primaryType,delete t.types;const n=yield fetch(a("message"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chainId:e.chainId,domain:e.domain,data:[t]})}),r=yield n.json();return!0===(null==r?void 0:r.isEligible)}return!1}))}})),i.register("hsoDC",(function(t,n){e(t.exports,"refetchLedgerAddresses",(function(){return i("7wUYG").refetchLedgerAddresses})),e(t.exports,"resetLedgerAddresses",(function(){return i("7wUYG").resetLedgerAddresses})),e(t.exports,"setLedgerTransportStateOverride",(function(){return i("7wUYG").setLedgerTransportStateOverride})),e(t.exports,"createHardwareWireHooks",(function(){return i("cHdXl").createHardwareWireHooks})),e(t.exports,"DEFAULT_LEDGER_TRANSPORT_STATE",(function(){return i("lMux6").DEFAULT_LEDGER_TRANSPORT_STATE})),e(t.exports,"LEDGER_NOT_CONNECTED_STATE",(function(){return i("lMux6").LEDGER_NOT_CONNECTED_STATE})),e(t.exports,"LEDGER_RECONNECTING_STATE",(function(){return i("lMux6").LEDGER_RECONNECTING_STATE})),e(t.exports,"LEDGER_WAITING_FOR_APPROVAL_STATE",(function(){return i("lMux6").LEDGER_WAITING_FOR_APPROVAL_STATE})),e(t.exports,"LedgerApp",(function(){return i("dPPBv").LedgerApp})),e(t.exports,"LedgerLockedError",(function(){return i("9JfiT").LedgerLockedError})),e(t.exports,"getLedgerTransportState",(function(){return i("7as68").getLedgerTransportState})),e(t.exports,"deriveLedgerAddresses",(function(){return i("kr4Fg").deriveLedgerAddresses})),e(t.exports,"getLedgerAppDisplayName",(function(){return i("iG6SM").getLedgerAppDisplayName})),e(t.exports,"getLedgerAppForAddressType",(function(){return i("iG6SM").getLedgerAppForAddressType})),e(t.exports,"getLedgerAppForNetworkID",(function(){return i("iG6SM").getLedgerAppForNetworkID})),e(t.exports,"getAddressTypeFromDerivationPathType",(function(){return i("a54cU").getAddressTypeFromDerivationPathType}));i("cHdXl"),i("lMux6"),i("dPPBv");i("5ARdl");i("9JfiT"),i("7as68"),i("kr4Fg"),i("1Jx7r"),i("fB0uY"),i("iG6SM"),i("iqxmM"),i("a54cU")})),i.register("cHdXl",(function(t,n){e(t.exports,"createHardwareWireHooks",(function(){return c}));i("c8GJp");var r=i("gw8mx"),o=i("4cs7m"),s=(i("02DDj"),i("3umQi")),a=i("3KU10");i("3R3wS");function c(e,t){const{defaultTransportTimeout:n}=e;return{useIsLedgerSupported:()=>(0,r.default)(e),useLedgerWireTransportState:(n,r,o)=>(0,s.useLedgerWireTransportState)(e,t,n,r,o),useRequestLedgerPermission:(n,r)=>(0,a.default)(e,t,n,r),useLedgerAddresses:(e,r,i,s)=>(0,o.default)(n,t,e,r,i,s)}}})),i.register("c8GJp",(function(t,n){e(t.exports,"useConnectedLedgerDeviceMetadata",(function(){return a}));var r=i("lNRH9"),o=i("iTpzE"),s=i("4ODJX");const a=(e,t)=>{const n=!!t,i=s.hardwareQueryKeys.accountConnectedDevice(t);return(0,r.useQuery)({enabled:n,queryKey:i,queryFn:()=>(0,o.getConnectedLedgerDeviceMetadata)(e,null!=t?t:"")})}})),i.register("iTpzE",(function(t,n){e(t.exports,"getConnectedLedgerDeviceMetadata",(function(){return c}),(function(e){return c=e}));var r=i("6Tvfa"),o=i("4yY1D"),s=i("9JfiT"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=(e,t)=>a(void 0,void 0,void 0,(function*(){var n;o.telemetry.addBreadcrumb(o.FeatureTag.Ledger,`Getting Connected Ledger Device metadata for account: ${t}`,o.Severity.Info);const i=yield(0,r.getMultiChainAccountMetadata)(e,t),a=null===(n=null==i?void 0:i.connectedDevices)||void 0===n?void 0:n.find((e=>e.deviceType===r.DeviceType.Ledger&&e.connectionType===r.ConnectionType.BLE));if(!a)throw new(0,s.AccountMetadataNoConnectedDevicesError);return a}))})),i.register("9JfiT",(function(t,n){e(t.exports,"LedgerNotConnectedError",(function(){return o})),e(t.exports,"LedgerMultipleAppsRequestedError",(function(){return i})),e(t.exports,"LedgerLockedError",(function(){return s})),e(t.exports,"LedgerDuplicateAddressReceivedError",(function(){return a})),e(t.exports,"AccountMetadataNoConnectedDevicesError",(function(){return c}));class r extends Error{constructor(e){super(e)}}class o extends r{constructor(e="Ledger not connected."){super(e)}}class i extends r{constructor(e="Multiple apps requested from Ledger. Only request one at a time."){super(e)}}class s extends r{constructor(e="Ledger is locked, unlock to get addresses or sign."){super(e)}}class a extends r{constructor(e="Duplicate ledger address received"){super(e)}}class c extends r{constructor(e="No connected devices."){super(e)}}})),i.register("4ODJX",(function(t,n){e(t.exports,"HARDWARE_BASE_QUERY_KEY",(function(){return r})),e(t.exports,"hardwareQueryKeys",(function(){return o}));const r="@phantom/hardware",o={isLedgerSupported:()=>[`${r}:is-ledger-supported`],ledgerTransportState:()=>[`${r}:ledger-transport-state`],ledgerAddress:(e,t)=>[`${r}:ledger-address`,{chainType:e,derivationPath:t}],ledgerAddresses:(e=[],t)=>[`${r}:ledger-addresses`,{derivationPathParams:e,enableLedgerXPubDerivation:t}],requestLedgerPermission:()=>[`${r}:request-ledger-permission`],accountConnectedDevice:e=>[`${r}:account-connected-device`,{accountIdentifier:e}]}})),i.register("gw8mx",(function(t,n){e(t.exports,"default",(function(){return a}),(function(e){return a=e}));var r=i("lNRH9"),o=i("4ODJX"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=e=>{const t=o.hardwareQueryKeys.isLedgerSupported();return(0,r.useQuery)({queryKey:t,queryFn:()=>s(void 0,void 0,void 0,(function*(){return e.isSupported()}))})}})),i.register("4cs7m",(function(t,n){e(t.exports,"default",(function(){return l}),(function(e){return l=e}));var r=i("gd9Oy"),o=i("lNRH9"),s=i("9JfiT"),a=i("iG6SM"),c=i("kr4Fg"),u=i("4ODJX"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},l=(e,t,n,i=[],l=!1,f=!1,p=(()=>{}))=>{var h;const g=(0,a.getLedgerAppForAddressType)(r.AddressTypes.getAddressType(i[0].pathType)),v=n.isConnected&&i.length>0&&g===(null===(h=n.selectedApp)||void 0===h?void 0:h.app),y=u.hardwareQueryKeys.ledgerAddresses(i,f);return(0,o.useQuery)({enabled:v,queryKey:y,queryFn:()=>d(void 0,void 0,void 0,(function*(){const n=yield t.getQueryData(u.hardwareQueryKeys.ledgerTransportState());if(!n)throw new(0,s.LedgerNotConnectedError);return(0,c.deriveLedgerAddresses)({transportTimeout:e,state:n,derivationPathParams:i,enableDebugLogs:l,enableLedgerXPubDerivation:f,onSuccess:p})})),retry:!1})}})),i.register("iG6SM",(function(t,n){e(t.exports,"getLedgerAppDisplayName",(function(){return a})),e(t.exports,"getLedgerAppForNetworkID",(function(){return c})),e(t.exports,"getLedgerAppForAddressType",(function(){return u}));var r=i("belzv"),o=i("gd9Oy"),s=i("dPPBv");const a=e=>{switch(e){case s.LedgerApp.Bitcoin:return"Bitcoin";case s.LedgerApp.EVM:return"Ethereum";case s.LedgerApp.Solana:return"Solana"}},c=e=>{const t=r.Chains.getAddressTypes(e);return u(t[0])},u=e=>{switch(e){case o.AddressType.BitcoinTaproot:case o.AddressType.BitcoinNativeSegwit:case o.AddressType.BitcoinNestedSegwit:case o.AddressType.BitcoinLegacy:return s.LedgerApp.Bitcoin;case o.AddressType.EVM:return s.LedgerApp.EVM;case o.AddressType.Solana:return s.LedgerApp.Solana}}})),i.register("dPPBv",(function(t,n){e(t.exports,"LedgerApp",(function(){return r}));var r,o,s=i("7pPsM");(o=r||(r={})).Bitcoin="Bitcoin",o.EVM="EVM",o.Solana="Solana";const a=s.z.string().regex(/^[0-9A-Fa-f]*$/,{message:"String must have only valid hex characters"});s.z.object({publicKey:a,chainCode:a}),s.z.object({name:s.z.string(),id:s.z.string().min(1),rssi:s.z.number().int()}),s.z.union([s.z.literal("low"),s.z.literal("medium"),s.z.literal("high")])})),i.register("kr4Fg",(function(t,n){e(t.exports,"deriveLedgerAddresses",(function(){return y}),(function(e){return y=e}));var r=i("d0go3"),o=i("gd9Oy"),s=i("4yY1D"),a=i("4y59b"),c=i("9JfiT"),u=i("71Me8"),d=i("fALED"),l=i("hOTYq"),f=i("hgJF4"),p=i("keP0C"),h=i("iG6SM"),g=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const v=(e,t,n,r)=>{const i=new Set;return(s,d)=>g(void 0,void 0,void 0,(function*(){if(!t.isConnected)throw new(0,c.LedgerNotConnectedError);const l=e;try{const e=yield(0,a.withRetry)((()=>g(void 0,void 0,void 0,(function*(){const e=o.AddressTypes.getAddressType(s.pathType),n=yield(0,a.withTimeout)((0,u.getLedgerAddress)(t.transport,e,d,r),3e3);if(i.has(n.address))throw new(0,c.LedgerDuplicateAddressReceivedError);return n}))),(e=>{const t=e instanceof c.LedgerDuplicateAddressReceivedError;t&&(0,f.debugLog)(n,`❌ Duplicate address detected, retrying in ${l}ms...`);const r="InvalidChannel"===e.id;return r&&(0,f.debugLog)(n,`Invalid channel, trying again in ${l}ms...`),t||r}),3,l);return(0,f.debugLog)(n,`✅ Received address for ${d}: ${e.address}`),i.add(e.address),e}catch(e){throw yield(0,a.delayAsync)(1e3),e}}))},y=({transportTimeout:e,state:t,derivationPathParams:n,enableDebugLogs:i,enableLedgerXPubDerivation:a,onSuccess:u})=>g(void 0,void 0,void 0,(function*(){const y=Date.now();(e=>{let t,n=!0;for(const r of e){const e=o.AddressTypes.getAddressType(r.pathType),i=(0,h.getLedgerAppForAddressType)(e);if(t?n=n&&t===i:t=i,!n)throw new(0,c.LedgerMultipleAppsRequestedError)}})(n);const m=a?((e,t,n)=>{const i=v(e,t,n,!0),a={};return(e,c)=>g(void 0,void 0,void 0,(function*(){const u=o.AddressTypes.getAddressType(e.pathType);switch(u){case o.AddressType.BitcoinTaproot:case o.AddressType.BitcoinNativeSegwit:case o.AddressType.BitcoinNestedSegwit:case o.AddressType.BitcoinLegacy:{let r=a[e.pathType];if(!r)try{r=yield(0,d.createBitcoinChildAddressDeriver)(t,e.pathType),a[e.pathType]=r}catch(t){return s.telemetry.captureError(new Error(`error creating xpub from derivation path: ${c}. Reason: ${t.message}`),s.FeatureTag.Ledger),i(e,c)}const o=r(e.index);return(0,f.debugLog)(n,`⭐️ Derived address with xpub for ${c}: ${o.address}`),{type:"address",addressType:u,address:o.address,publicKey:o.publicKey}}case o.AddressType.Solana:return i(e,c);case o.AddressType.EVM:if(e.pathType===r.DerivationPathType.Bip44RootEthereum)return i(e,c);{let t=a[e.pathType];if(!t)try{const n=(0,p.getRelativeDerivationPath)("grandparent",e.pathType),r=yield i(e,n);if(r.addressType!==u||"chain-code"!==r.type)throw new Error(`invalid response from Ledger requesting grandparent path: ${n}`);const o=(0,p.getRelativeDerivationPath)("parent",e.pathType),s=yield i(e,o);if(s.addressType!==u||"chain-code"!==s.type)throw new Error(`invalid response from Ledger requesting parent path: ${n}`);t=(0,l.createEthereumChildAddressDeriver)(r,s),a[e.pathType]=t}catch(t){return s.telemetry.captureError(new Error(`error creating xpub from derivation path: ${c}. Reason: ${t.message}`),s.FeatureTag.Ledger),i(e,c)}const r=t(e.index);return(0,f.debugLog)(n,`⭐️ Derived address with xpub for ${c}: ${r.address}`),{type:"address",addressType:u,address:r.address,publicKey:r.publicKey}}}}))})(e,t,i):v(e,t,i,!1),T={};for(const e of n){const t=(0,r.getDerivationPath)(e),n=yield m(e,t);T[t]=n}const w=(Date.now()-y)/1e3;return(0,f.debugLog)(i,`✅ Finished requesting addresses for ${n.length} derivation paths. Time: ${w} s`),u(w),T}))})),i.register("71Me8",(function(n,r){e(n.exports,"getLedgerAddress",(function(){return h}),(function(e){return h=e}));var o=i("d0go3"),s=i("belzv"),a=i("gd9Oy"),c=i("13Nf3"),u=i("9JfiT"),d=i("keP0C"),l=i("fALED"),f=i("9tNa2"),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const h=(e,n,r,i)=>p(void 0,void 0,void 0,(function*(){const p=r.replace("m/","");try{switch(n){case a.AddressType.BitcoinTaproot:case a.AddressType.BitcoinNativeSegwit:case a.AddressType.BitcoinNestedSegwit:case a.AddressType.BitcoinLegacy:{const t=yield(0,f.getBitcoinLedgerApp)(e),i=a.AddressTypes[n].defaultDerivationPathType,c=(0,o.parseDerivationPath)(r).index,u=(0,d.getRelativeDerivationPath)("parent",i),p=yield t.getExtendedPubkey(u),h=(yield(0,l.createHDNodeFromXpub)(p,"mainnet")).derivePath(`${c}`);return{type:"chain-code",addressType:n,address:(0,a.publicKeyToAddress)({publicKey:new Uint8Array(h.publicKey),addressType:n,networkID:s.BitcoinNetworkID.Mainnet}),publicKey:h.publicKey.toString("hex"),chainCode:h.chainCode.toString("hex")}}case a.AddressType.Solana:{const r=yield(0,f.getSolanaLedgerApp)(e),{address:o}=yield r.getAddress(p);return{type:"address",addressType:n,address:t(c).encode(o),publicKey:o.toString("hex")}}case a.AddressType.EVM:{const t=yield(0,f.getEthereumLedgerApp)(e),{publicKey:r,address:o,chainCode:s}=yield t.getAddress(p,!1,i);if(i){if(!s)throw new Error("Chain code is requested from Ledger device, but no chain code was received.");return{type:"chain-code",addressType:n,address:o,publicKey:r,chainCode:s}}return{type:"address",addressType:n,address:o,publicKey:r}}}}catch(e){throw"TransportLocked"===e.id?new(0,u.LedgerLockedError):e}}))})),i.register("keP0C",(function(t,n){e(t.exports,"getRelativeDerivationPath",(function(){return o}));var r=i("d0go3");const o=(e,t)=>{switch(e){case"grandparent":switch(t){case r.DerivationPathType.BitcoinTaproot:return"m/86'/0'/0'";case r.DerivationPathType.BitcoinNativeSegwit:return"m/84'/0'/0'";case r.DerivationPathType.BitcoinNestedSegwit:return"m/46'/0'/0'";case r.DerivationPathType.BitcoinLegacy:return"m/44'/0'/0'";case r.DerivationPathType.Bip44Ethereum:return"m/44'/60'/0'";case r.DerivationPathType.Bip44EthereumSecondary:return"m/44'/60'/1'";case r.DerivationPathType.Bip44EthereumTertiary:return"m/44'/60'/2'"}break;case"parent":switch(t){case r.DerivationPathType.BitcoinTaproot:return"m/86'/0'/0'/0";case r.DerivationPathType.BitcoinNativeSegwit:return"m/84'/0'/0'/0";case r.DerivationPathType.BitcoinNestedSegwit:return"m/46'/0'/0'/0";case r.DerivationPathType.BitcoinLegacy:return"m/44'/0'/0'/0";case r.DerivationPathType.Bip44Ethereum:return"m/44'/60'/0'/0";case r.DerivationPathType.Bip44EthereumSecondary:return"m/44'/60'/1'/0";case r.DerivationPathType.Bip44EthereumTertiary:return"m/44'/60'/2'/0"}}}})),i.register("fALED",(function(t,n){e(t.exports,"createHDNodeFromXpub",(function(){return f}),(function(e){return f=e})),e(t.exports,"createBitcoinChildAddressDeriver",(function(){return p}),(function(e){return p=e}));var r=i("gd9Oy"),o=i("5GnSC"),s=i("9JfiT"),a=i("a54cU"),c=i("keP0C"),u=i("9tNa2"),d=i("6rT8n").Buffer,l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const f=(e,t)=>l(void 0,void 0,void 0,(function*(){const{default:n}=yield i("cN3SA");return n(yield Promise.resolve(i("4sHMz"))).fromBase58(e,"mainnet"===t?o.networks.bitcoin:o.networks.testnet)})),p=(e,t)=>l(void 0,void 0,void 0,(function*(){if(!e.isConnected)throw new(0,s.LedgerNotConnectedError);const n=yield(0,u.getBitcoinLedgerApp)(e.transport),o=(0,c.getRelativeDerivationPath)("parent",t),i=yield n.getExtendedPubkey(o),l=yield f(i,"mainnet");return e=>{const n=new Uint8Array(l.derivePath(`${e}`).publicKey),o=(0,r.publicKeyToAddress)({publicKey:n,addressType:(0,a.getAddressTypeFromDerivationPathType)(t)});return{publicKey:d.from(n).toString("hex"),address:o}}}))})),i.register("a54cU",(function(t,n){e(t.exports,"getAddressTypeFromDerivationPathType",(function(){return s}));var r=i("d0go3"),o=i("gd9Oy");function s(e){switch(e){case r.DerivationPathType.Bip44RootSolana:case r.DerivationPathType.Bip44ChangeSolana:case r.DerivationPathType.Bip44Solana:case r.DerivationPathType.DeprecatedSolana:return o.AddressType.Solana;case r.DerivationPathType.Bip44RootEthereum:case r.DerivationPathType.Bip44Ethereum:case r.DerivationPathType.Bip44EthereumSecondary:case r.DerivationPathType.Bip44EthereumTertiary:return o.AddressType.EVM;case r.DerivationPathType.BitcoinLegacy:return o.AddressType.BitcoinLegacy;case r.DerivationPathType.BitcoinNativeSegwit:return o.AddressType.BitcoinNativeSegwit;case r.DerivationPathType.BitcoinNestedSegwit:return o.AddressType.BitcoinNestedSegwit;case r.DerivationPathType.BitcoinTaproot:return o.AddressType.BitcoinTaproot}}})),i.register("9tNa2",(function(t,n){e(t.exports,"getSolanaLedgerApp",(function(){return o}),(function(e){return o=e})),e(t.exports,"getEthereumLedgerApp",(function(){return s}),(function(e){return s=e})),e(t.exports,"getEthereumLedgerService",(function(){return a}),(function(e){return a=e})),e(t.exports,"getBitcoinLedgerApp",(function(){return c}),(function(e){return c=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};function o(e){return r(this,void 0,void 0,(function*(){const{default:t}=yield i("8o3Di");return new t(e)}))}function s(e){return r(this,void 0,void 0,(function*(){const{default:t}=yield i("72wWh");return new t(e)}))}function a(){return r(this,void 0,void 0,(function*(){const{ledgerService:e}=yield i("72wWh");return e}))}function c(e){return r(this,void 0,void 0,(function*(){const{AppClient:t}=yield Promise.resolve(i("2h0yV"));return new t(e)}))}})),i.register("8o3Di",(function(e,t){e.exports=Promise.all([import("./"+i("5V6iE").resolve("hgCva")),import("./"+i("5V6iE").resolve("9x3Iv"))]).then((()=>i("k4oSe")))})),i.register("72wWh",(function(e,t){e.exports=Promise.all([import("./"+i("5V6iE").resolve("hgCva")),import("./"+i("5V6iE").resolve("hFDiN"))]).then((()=>i("QdbMl")))})),i.register("2h0yV",(function(e,t){var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WalletPolicy=e.exports.DefaultWalletPolicy=e.exports.PsbtV2=e.exports.AppClient=void 0;const r=n(i("6hBYL"));e.exports.AppClient=r.default;var o=i("lu4xX");Object.defineProperty(e.exports,"DefaultWalletPolicy",{enumerable:!0,get:function(){return o.DefaultWalletPolicy}}),Object.defineProperty(e.exports,"WalletPolicy",{enumerable:!0,get:function(){return o.WalletPolicy}});var s=i("loYOe");Object.defineProperty(e.exports,"PsbtV2",{enumerable:!0,get:function(){return s.PsbtV2}}),e.exports.default=r.default})),i.register("6hBYL",(function(e,t){var n=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AppClient=e.exports.PartialSignature=void 0;var r=i("26LFE"),o=i("aZj5D"),s=i("7W7dC"),a=i("htZV9"),c=i("loYOe"),u=i("6W3U6");var d,l,f,p;(l=d||(d={}))[l.GET_PUBKEY=0]="GET_PUBKEY",l[l.REGISTER_WALLET=2]="REGISTER_WALLET",l[l.GET_WALLET_ADDRESS=3]="GET_WALLET_ADDRESS",l[l.SIGN_PSBT=4]="SIGN_PSBT",l[l.GET_MASTER_FINGERPRINT=5]="GET_MASTER_FINGERPRINT",l[l.SIGN_MESSAGE=16]="SIGN_MESSAGE",(p=f||(f={}))[p.CONTINUE_INTERRUPTED=1]="CONTINUE_INTERRUPTED";class h{constructor(e,t,n){this.pubkey=e,this.signature=t,this.tapleafHash=n}}function g(e,t){if(64==e.length)return new h(e.slice(0,32),t,e.slice(32,64));if(32==e.length||33==e.length)return new h(e,t);throw new Error(`Invalid length for pubkeyAugm: ${e.length} bytes.`)}e.exports.PartialSignature=h;class v{async makeRequest(e,t,n){let r=await this.transport.send(225,e,0,1,t,[36864,57344]);for(;57344===r.readUInt16BE(r.length-2);){if(!n)throw new Error("Unexpected SW_INTERRUPTED_EXECUTION");const e=r.slice(0,-2),t=n.execute(e);r=await this.transport.send(248,f.CONTINUE_INTERRUPTED,0,0,t,[36864,57344])}return r.slice(0,-2)}async getAppAndVersion(){const e=await this.transport.send(176,1,0,0);let t=0;if(1!==e[t++])throw new Error("Unexpected response");const n=e[t++],r=e.slice(t,t+=n).toString("ascii"),o=e[t++],i=e.slice(t,t+=o).toString("ascii"),s=e[t++];return{name:r,version:i,flags:e.slice(t,t+=s)}}async getExtendedPubkey(e,t=!1){const o=(0,r.pathStringToArray)(e);if(o.length>6)throw new Error("Path too long. At most 6 levels allowed.");return(await this.makeRequest(d.GET_PUBKEY,n.concat([n.from(t?[1]:[0]),(0,r.pathElementsToBuffer)(o)]))).toString("ascii")}async registerWallet(e){await this.validatePolicy(e);const t=new o.ClientCommandInterpreter;t.addKnownWalletPolicy(e);const r=e.serialize(),i=await this.makeRequest(d.REGISTER_WALLET,n.concat([(0,u.createVarint)(r.length),r]),t);if(64!=i.length)throw Error(`Invalid response length. Expected 64 bytes, got ${i.length}`);return[i.subarray(0,32),i.subarray(32)]}async getWalletAddress(e,t,r,i,s){if(0!==r&&1!==r)throw new Error("Change can only be 0 or 1");if(i<0||!Number.isInteger(i))throw new Error("Invalid address index");if(null!=t&&32!=t.length)throw new Error("Invalid HMAC length");await this.validatePolicy(e);const a=new o.ClientCommandInterpreter;a.addKnownWalletPolicy(e);const c=n.alloc(4);c.writeUInt32BE(i,0);return(await this.makeRequest(d.GET_WALLET_ADDRESS,n.concat([n.from(s?[1]:[0]),e.getId(),t||n.alloc(32,0),n.from([r]),c]),a)).toString("ascii")}async signPsbt(e,t,r,i){if(await this.validatePolicy(t),"string"==typeof e&&(e=n.from(e,"base64")),n.isBuffer(e)){const t=new c.PsbtV2;t.deserialize(e),e=t}const l=new s.MerkelizedPsbt(e);if(null!=r&&32!=r.length)throw new Error("Invalid HMAC length");const f=new o.ClientCommandInterpreter(i);f.addKnownWalletPolicy(t),f.addKnownMapping(l.globalMerkleMap);for(const e of l.inputMerkleMaps)f.addKnownMapping(e);for(const e of l.outputMerkleMaps)f.addKnownMapping(e);f.addKnownList(l.inputMapCommitments);const p=new a.Merkle(l.inputMapCommitments.map((e=>(0,a.hashLeaf)(e)))).getRoot();f.addKnownList(l.outputMapCommitments);const h=new a.Merkle(l.outputMapCommitments.map((e=>(0,a.hashLeaf)(e)))).getRoot();await this.makeRequest(d.SIGN_PSBT,n.concat([l.getGlobalKeysValuesRoot(),(0,u.createVarint)(l.getGlobalInputCount()),p,(0,u.createVarint)(l.getGlobalOutputCount()),h,t.getId(),r||n.alloc(32,0)]),f);const v=f.getYielded(),y=[];for(const e of v){const[t,n]=(0,u.parseVarint)(e,0),r=e[n],o=g(e.subarray(n+1,n+1+r),e.subarray(n+1+r));y.push([Number(t),o])}return y}async getMasterFingerprint(){return(await this.makeRequest(d.GET_MASTER_FINGERPRINT,n.from([]))).toString("hex")}async signMessage(e,t){const i=(0,r.pathStringToArray)(t),s=new o.ClientCommandInterpreter,c=Math.ceil(e.length/64),l=[];for(let t=0;t<c;t++)l.push(e.subarray(64*t,64*t+64));s.addKnownList(l);const f=new a.Merkle(l.map((e=>(0,a.hashLeaf)(e)))).getRoot();return(await this.makeRequest(d.SIGN_MESSAGE,n.concat([(0,r.pathElementsToBuffer)(i),(0,u.createVarint)(e.length),f]),s)).toString("base64")}async validatePolicy(e){if((e.descriptorTemplate.match(/[asctdvjnlu]+:/g)||[]).some((e=>e.includes("a")))){const e=await this.getAppAndVersion();if(["2.1.0","2.1.1"].includes(e.version))throw new Error("Please update your Ledger Bitcoin app.")}}constructor(e){this.transport=e}}e.exports.AppClient=v,e.exports.default=v})),i.register("26LFE",(function(e,t){var n=i("6rT8n").Buffer,r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hardenedPathOf=e.exports.getXpubComponents=e.exports.pubkeyFromXpub=e.exports.pathStringToArray=e.exports.pathArrayToString=e.exports.bip32asBuffer=e.exports.pathElementsToBuffer=void 0;const o=r(i("9UXyL")),s=r(i("f8pp6"));function a(e){const t=n.alloc(1+4*e.length);return t[0]=e.length,e.forEach(((e,n)=>{t.writeUInt32BE(e,1+4*n)})),t}function c(e){return"m"==e||""==e?[]:o.default.fromString(e).toPathArray()}e.exports.pathElementsToBuffer=a,e.exports.bip32asBuffer=function(e){return a(e?c(e):[])},e.exports.pathArrayToString=function(e){return 0==e.length?"m":o.default.fromPathArray(e).toString()},e.exports.pathStringToArray=c,e.exports.pubkeyFromXpub=function(e){const t=s.default.decode(e);return t.slice(t.length-33)},e.exports.getXpubComponents=function(e){const t=s.default.decode(e);return{chaincode:t.slice(13,45),pubkey:t.slice(t.length-33),version:t.readUInt32BE(0)}},e.exports.hardenedPathOf=function(e){for(let t=e.length-1;t>=0;t--)if(e[t]>=2147483648)return e.slice(0,t+1);return[]}})),i.register("9UXyL",(function(e,t){const n=2147483648;var r=function(e){if(!Array.isArray(e))throw new Error("Input must be an Array");if(0===e.length)throw new Error("Path must contain at least one level");for(var t=0;t<e.length;t++)if("number"!=typeof e[t])throw new Error("Path element is not a number");this.path=e};r.validatePathArray=function(e){try{return r.fromPathArray(e),!0}catch(e){return!1}},r.validateString=function(e,t){try{return r.fromString(e,t),!0}catch(e){return!1}},r.fromPathArray=function(e){return new r(e)},r.fromString=function(e,t){if(/^m\//i.test(e))e=e.slice(2);else if(t)throw new Error("Root element is required");for(var o=e.split("/"),i=new Array(o.length),s=0;s<o.length;s++){var a=/(\d+)([hH\']?)/.exec(o[s]);if(null===a)throw new Error("Invalid input");if(i[s]=parseInt(a[1],10),i[s]>=n)throw new Error("Invalid child index");if("h"===a[2]||"H"===a[2]||"'"===a[2])i[s]+=n;else if(0!=a[2].length)throw new Error("Invalid modifier")}return new r(i)},r.prototype.toPathArray=function(){return this.path},r.prototype.toString=function(e,t){for(var r=new Array(this.path.length),o=0;o<this.path.length;o++){var i=this.path[o];r[o]=i&n?(2147483647&i)+(t?"h":"'"):i}return(e?"":"m/")+r.join("/")},r.prototype.inspect=function(){return"BIPPath <"+this.toString()+">"},e.exports=r})),i.register("aZj5D",(function(e,t){var n=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ClientCommandInterpreter=e.exports.GetMoreElementsCommand=e.exports.GetMerkleLeafIndexCommand=e.exports.GetMerkleLeafProofCommand=e.exports.GetPreimageCommand=e.exports.YieldCommand=void 0;var r,o,s=i("5GnSC"),a=i("8ziCY"),c=i("htZV9"),u=i("6W3U6");(o=r||(r={}))[o.YIELD=16]="YIELD",o[o.GET_PREIMAGE=64]="GET_PREIMAGE",o[o.GET_MERKLE_LEAF_PROOF=65]="GET_MERKLE_LEAF_PROOF",o[o.GET_MERKLE_LEAF_INDEX=66]="GET_MERKLE_LEAF_INDEX",o[o.GET_MORE_ELEMENTS=160]="GET_MORE_ELEMENTS";class d{}class l extends d{execute(e){return this.results.push(n.from(e.subarray(1))),this.progressCallback&&this.progressCallback(),n.from("")}constructor(e,t){super(),this.progressCallback=t,this.code=r.YIELD,this.results=e}}e.exports.YieldCommand=l;class f extends d{execute(e){const t=n.from(e.subarray(1));if(33!=t.length)throw new Error("Invalid request, unexpected trailing data");if(0!=t[0])throw new Error("Unsupported request, the first byte should be 0");const r=n.alloc(32);for(let e=0;e<32;e++)r[e]=t[1+e];const o=r.toString("hex"),i=this.known_preimages.get(o);if(null!=i){const e=(0,u.createVarint)(i.length),t=255-e.length-1,r=Math.min(t,i.length);if(r<i.length)for(let e=r;e<i.length;e++)this.queue.push(n.from([i[e]]));return n.concat([e,n.from([r]),n.from(i.subarray(0,r))])}throw Error(`Requested unknown preimage for: ${o}`)}constructor(e,t){super(),this.code=r.GET_PREIMAGE,this.known_preimages=e,this.queue=t}}e.exports.GetPreimageCommand=f;class p extends d{execute(e){const t=n.from(e.subarray(1));if(t.length<34)throw new Error("Invalid request, expected at least 34 bytes");const r=new a.BufferReader(t),o=r.readSlice(32).toString("hex");let i,s;try{i=(0,u.sanitizeBigintToNumber)(r.readVarInt()),s=(0,u.sanitizeBigintToNumber)(r.readVarInt())}catch(e){throw new Error("Invalid request, couldn't parse tree_size or leaf_index")}const c=this.known_trees.get(o);if(!c)throw Error(`Requested Merkle leaf proof for unknown tree: ${o}`);if(s>=i||c.size()!=i)throw Error("Invalid index or tree size.");if(0!=this.queue.length)throw Error("This command should not execute when the queue is not empty.");const d=c.getProof(s),l=Math.min(Math.floor(6.90625),d.length),f=d.length-l;return f>0&&this.queue.push(...d.slice(-f)),n.concat([c.getLeafHash(s),n.from([d.length]),n.from([l]),...d.slice(0,l)])}constructor(e,t){super(),this.code=r.GET_MERKLE_LEAF_PROOF,this.known_trees=e,this.queue=t}}e.exports.GetMerkleLeafProofCommand=p;class h extends d{execute(e){const t=n.from(e.subarray(1));if(64!=t.length)throw new Error("Invalid request, unexpected trailing data");const r=n.alloc(32);for(let e=0;e<32;e++)r[e]=t.readUInt8(e);const o=r.toString("hex"),i=n.alloc(32);for(let e=0;e<32;e++)i[e]=t.readUInt8(32+e);const s=i.toString("hex"),a=this.known_trees.get(o);if(!a)throw Error(`Requested Merkle leaf index for unknown root: ${o}`);let c=0,d=0;for(let e=0;e<a.size();e++)if(a.getLeafHash(e).toString("hex")==s){d=1,c=e;break}return n.concat([n.from([d]),(0,u.createVarint)(c)])}constructor(e){super(),this.code=r.GET_MERKLE_LEAF_INDEX,this.known_trees=e}}e.exports.GetMerkleLeafIndexCommand=h;class g extends d{execute(e){if(1!=e.length)throw new Error("Invalid request, unexpected trailing data");if(0===this.queue.length)throw new Error("No elements to get");const t=this.queue[0].length;if(this.queue.some((e=>e.length!=t)))throw new Error("The queue contains elements with different byte length, which is not expected");const r=Math.floor(253/t),o=Math.min(r,this.queue.length),i=this.queue.splice(0,o);return n.concat([n.from([o]),n.from([t]),...i])}constructor(e){super(),this.code=r.GET_MORE_ELEMENTS,this.queue=e}}e.exports.GetMoreElementsCommand=g;e.exports.ClientCommandInterpreter=class{getYielded(){return this.yielded}addKnownPreimage(e){this.preimages.set(s.crypto.sha256(e).toString("hex"),e)}addKnownList(e){for(const t of e){const e=n.concat([n.from([0]),t]);this.addKnownPreimage(e)}const t=new c.Merkle(e.map((e=>(0,c.hashLeaf)(e))));this.roots.set(t.getRoot().toString("hex"),t)}addKnownMapping(e){this.addKnownList(e.keys),this.addKnownList(e.values)}addKnownWalletPolicy(e){this.addKnownPreimage(e.serialize()),this.addKnownList(e.keys.map((e=>n.from(e,"ascii")))),this.addKnownPreimage(n.from(e.descriptorTemplate))}execute(e){if(0==e.length)throw new Error("Unexpected empty command");const t=e[0],n=this.commands.get(t);if(!n)throw new Error(`Unexpected command code ${t}`);return n.execute(e)}constructor(e){this.roots=new Map,this.preimages=new Map,this.yielded=[],this.queue=[],this.commands=new Map;const t=[new l(this.yielded,e),new f(this.preimages,this.queue),new h(this.roots),new p(this.roots,this.queue),new g(this.queue)];for(const e of t){if(this.commands.has(e.code))throw new Error(`Multiple commands with code ${e.code}`);this.commands.set(e.code,e)}}}})),i.register("8ziCY",(function(e,t){var n=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BufferReader=e.exports.BufferWriter=e.exports.unsafeFrom64bitLE=e.exports.unsafeTo64bitLE=void 0;var r=i("6W3U6");function o(e){if(e>Number.MAX_SAFE_INTEGER)throw new Error("Can't convert numbers > MAX_SAFE_INT");const t=n.alloc(8,0);for(let n=0;n<t.length;n++){const r=255&e;t[n]=r,e=(e-r)/256}return t}function s(e){let t=0;if(8!=e.length)throw new Error("Expected Bufffer of lenght 8");if(0!=e[7])throw new Error("Can't encode numbers > MAX_SAFE_INT");if(e[6]>31)throw new Error("Can't encode numbers > MAX_SAFE_INT");for(let n=e.length-1;n>=0;n--)t=256*t+e[n];return t}e.exports.unsafeTo64bitLE=o,e.exports.unsafeFrom64bitLE=s;e.exports.BufferWriter=class{write(e,t){const r=n.alloc(e);t(r),this.bufs.push(r)}writeUInt8(e){this.write(1,(t=>t.writeUInt8(e,0)))}writeInt32(e){this.write(4,(t=>t.writeInt32LE(e,0)))}writeUInt32(e){this.write(4,(t=>t.writeUInt32LE(e,0)))}writeUInt64(e){const t=o(e);this.writeSlice(t)}writeVarInt(e){this.bufs.push((0,r.createVarint)(e))}writeSlice(e){this.bufs.push(n.from(e))}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}buffer(){return n.concat(this.bufs)}constructor(){this.bufs=[]}};e.exports.BufferReader=class{available(){return this.buffer.length-this.offset}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){return s(this.readSlice(8))}readVarInt(){const[e,t]=(0,r.parseVarint)(this.buffer,this.offset);return this.offset+=t,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){const e=(0,r.sanitizeBigintToNumber)(this.readVarInt());return this.readSlice(e)}readVector(){const e=this.readVarInt(),t=[];for(let n=0;n<e;n++)t.push(this.readVarSlice());return t}constructor(e,t=0){this.buffer=e,this.offset=t}}})),i.register("6W3U6",(function(e,t){var n=i("6rT8n").Buffer;function r(e,t,n){let r=BigInt(0);for(let o=0;o<n;o++){if(null==e[o+t])throw Error("Buffer too small");r+=BigInt(e[o+t])<<BigInt(8*o)}return r}function o(e){if(e<0)throw RangeError("Negative bigint is not a valid varint");if(e>Number.MAX_SAFE_INTEGER)throw RangeError("Too large for a Number");return Number(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createVarint=e.exports.parseVarint=e.exports.sanitizeBigintToNumber=void 0,e.exports.sanitizeBigintToNumber=o,e.exports.parseVarint=function(e,t){if(t<0)throw RangeError("Negative offset is invalid");if(null==e[t])throw Error("Buffer too small");if(e[t]<253)return[BigInt(e[t]),1];{let n;return n=253===e[t]?2:254===e[t]?4:8,[r(e,t+1,n),n+1]}},e.exports.createVarint=function(e){"number"==typeof e&&(e=o(e));const t=function(e){if("number"==typeof e&&(e=o(e)),e<BigInt(0))throw new RangeError("Negative numbers are not supported");if(e>=BigInt(1)<<BigInt(64))throw new RangeError("Too large for a Bitcoin-style varint");return e<BigInt(253)?1:e<=BigInt(65535)?3:e<=BigInt(4294967295)?5:9}(e);e=BigInt(e);const r=n.alloc(t);return 1==t?r[0]=Number(e):(r[0]=3==t?253:5===t?254:255,function(e,t,n,r){for(let o=0;o<t;o++){if(null==n[o+r])throw Error("Buffer too small");n[o+r]=Number(e%BigInt(256)),e>>=BigInt(8)}}(e,t-1,r,1)),r}})),i.register("htZV9",(function(e,t){var n=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hashLeaf=e.exports.Merkle=void 0;var r=i("5GnSC");e.exports.Merkle=class{getRoot(){return this.rootNode.hash}size(){return this.leaves.length}getLeaves(){return this.leaves}getLeafHash(e){return this.leafNodes[e].hash}getProof(e){if(e>=this.leaves.length)throw Error("Index out of bounds");return s(this.leafNodes[e])}calculateRoot(e){const t=e.length;if(0==t)return{root:new o(void 0,void 0,n.alloc(32,0)),leaves:[]};if(1==t){const t=new o(void 0,void 0,e[0]);return{root:t,leaves:[t]}}const r=function(e){if(e<2)throw Error("Expected n >= 2");return function(e){return 0==(e&e-1)}(e)?e/2:1<<Math.floor(Math.log2(e))}(t),i=this.calculateRoot(e.slice(0,r)),s=this.calculateRoot(e.slice(r)),a=i.root,c=s.root,u=this.hashNode(a.hash,c.hash),d=new o(a,c,u);return a.parent=d,c.parent=d,{root:d,leaves:i.leaves.concat(s.leaves)}}hashNode(e,t){return this.h(n.concat([n.from([1]),e,t]))}constructor(e,t=r.crypto.sha256){this.leaves=e,this.h=t;const n=this.calculateRoot(e);this.rootNode=n.root,this.leafNodes=n.leaves}},e.exports.hashLeaf=function(e,t=r.crypto.sha256){return function(e,t,r){return r(n.concat([e,t]))}(n.from([0]),e,t)};class o{isLeaf(){return null==this.leftChild}constructor(e,t,n){this.leftChild=e,this.rightChild=t,this.hash=n}}function s(e){if(!e.parent)return[];if(e.parent.leftChild==e){if(!e.parent.rightChild)throw new Error("Expected right child to exist");return[e.parent.rightChild.hash,...s(e.parent)]}if(!e.parent.leftChild)throw new Error("Expected left child to exist");return[e.parent.leftChild.hash,...s(e.parent)]}})),i.register("7W7dC",(function(e,t){var n=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MerkelizedPsbt=void 0;var r=i("bjmqu"),o=i("loYOe");class s extends o.PsbtV2{getGlobalSize(){return this.globalMap.size}getGlobalKeysValuesRoot(){return this.globalMerkleMap.commitment()}static createMerkleMap(e){const t=[...e.keys()].sort(),o=t.map((t=>{const n=e.get(t);if(!n)throw new Error("No value for key "+t);return n})),i=t.map((e=>n.from(e,"hex")));return new r.MerkleMap(i,o)}constructor(e){super(),this.inputMerkleMaps=[],this.outputMerkleMaps=[],e.copy(this),this.globalMerkleMap=s.createMerkleMap(this.globalMap);for(let e=0;e<this.getGlobalInputCount();e++)this.inputMerkleMaps.push(s.createMerkleMap(this.inputMaps[e]));this.inputMapCommitments=[...this.inputMerkleMaps.values()].map((e=>e.commitment()));for(let e=0;e<this.getGlobalOutputCount();e++)this.outputMerkleMaps.push(s.createMerkleMap(this.outputMaps[e]));this.outputMapCommitments=[...this.outputMerkleMaps.values()].map((e=>e.commitment()))}}e.exports.MerkelizedPsbt=s})),i.register("bjmqu",(function(e,t){var n=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MerkleMap=void 0;var r=i("htZV9"),o=i("6W3U6");e.exports.MerkleMap=class{commitment(){return n.concat([(0,o.createVarint)(this.keys.length),this.keysTree.getRoot(),this.valuesTree.getRoot()])}constructor(e,t){if(e.length!=t.length)throw new Error("keys and values should have the same length");for(let t=0;t<e.length-1;t++)if(e[t].toString("hex")>=e[t+1].toString("hex"))throw new Error("keys must be in strictly increasing order");this.keys=e,this.keysTree=new r.Merkle(e.map((e=>(0,r.hashLeaf)(e)))),this.values=t,this.valuesTree=new r.Merkle(t.map((e=>(0,r.hashLeaf)(e))))}}})),i.register("loYOe",(function(e,t){var n=i("6rT8n").Buffer,r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PsbtV2=e.exports.NoSuchEntry=e.exports.psbtOut=e.exports.psbtIn=e.exports.psbtGlobal=void 0;const a=s(i("5GnSC"));var c,u,d,l,f,p,h=i("8ziCY"),g=i("6W3U6");(u=c=e.exports.psbtGlobal||(e.exports.psbtGlobal={}))[u.UNSIGNED_TX=0]="UNSIGNED_TX",u[u.XPUB=1]="XPUB",u[u.TX_VERSION=2]="TX_VERSION",u[u.FALLBACK_LOCKTIME=3]="FALLBACK_LOCKTIME",u[u.INPUT_COUNT=4]="INPUT_COUNT",u[u.OUTPUT_COUNT=5]="OUTPUT_COUNT",u[u.TX_MODIFIABLE=6]="TX_MODIFIABLE",u[u.VERSION=251]="VERSION",(l=d=e.exports.psbtIn||(e.exports.psbtIn={}))[l.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",l[l.WITNESS_UTXO=1]="WITNESS_UTXO",l[l.PARTIAL_SIG=2]="PARTIAL_SIG",l[l.SIGHASH_TYPE=3]="SIGHASH_TYPE",l[l.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",l[l.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",l[l.BIP32_DERIVATION=6]="BIP32_DERIVATION",l[l.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",l[l.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",l[l.PREVIOUS_TXID=14]="PREVIOUS_TXID",l[l.OUTPUT_INDEX=15]="OUTPUT_INDEX",l[l.SEQUENCE=16]="SEQUENCE",l[l.TAP_KEY_SIG=19]="TAP_KEY_SIG",l[l.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",(p=f=e.exports.psbtOut||(e.exports.psbtOut={}))[p.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",p[p.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",p[p.BIP_32_DERIVATION=2]="BIP_32_DERIVATION",p[p.AMOUNT=3]="AMOUNT",p[p.SCRIPT=4]="SCRIPT",p[p.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION";const v=n.from([112,115,98,116,255]);class y extends Error{}e.exports.NoSuchEntry=y;function m(e,t,r,o){if(!e)throw Error("No such map");const i=new T(t,r),s=e.get(i.toString());if(!s){if(o)return;throw new y(i.toString())}return n.from(s)}e.exports.PsbtV2=class{setGlobalTxVersion(e){this.setGlobal(c.TX_VERSION,x(e))}getGlobalTxVersion(){return this.getGlobal(c.TX_VERSION).readUInt32LE(0)}setGlobalFallbackLocktime(e){this.setGlobal(c.FALLBACK_LOCKTIME,x(e))}getGlobalFallbackLocktime(){var e;return null===(e=this.getGlobalOptional(c.FALLBACK_LOCKTIME))||void 0===e?void 0:e.readUInt32LE(0)}setGlobalInputCount(e){this.setGlobal(c.INPUT_COUNT,O(e))}getGlobalInputCount(){return P(this.getGlobal(c.INPUT_COUNT))}setGlobalOutputCount(e){this.setGlobal(c.OUTPUT_COUNT,O(e))}getGlobalOutputCount(){return P(this.getGlobal(c.OUTPUT_COUNT))}setGlobalTxModifiable(e){this.setGlobal(c.TX_MODIFIABLE,e)}getGlobalTxModifiable(){return this.getGlobalOptional(c.TX_MODIFIABLE)}setGlobalPsbtVersion(e){this.setGlobal(c.VERSION,x(e))}getGlobalPsbtVersion(){return this.getGlobal(c.VERSION).readUInt32LE(0)}setInputNonWitnessUtxo(e,t){this.setInput(e,d.NON_WITNESS_UTXO,S(),t)}getInputNonWitnessUtxo(e){return this.getInputOptional(e,d.NON_WITNESS_UTXO,S())}setInputWitnessUtxo(e,t,n){const r=new h.BufferWriter;r.writeSlice(I(t)),r.writeVarSlice(n),this.setInput(e,d.WITNESS_UTXO,S(),r.buffer())}getInputWitnessUtxo(e){const t=this.getInputOptional(e,d.WITNESS_UTXO,S());if(!t)return;const n=new h.BufferReader(t);return{amount:(0,h.unsafeFrom64bitLE)(n.readSlice(8)),scriptPubKey:n.readVarSlice()}}setInputPartialSig(e,t,n){this.setInput(e,d.PARTIAL_SIG,t,n)}getInputPartialSig(e,t){return this.getInputOptional(e,d.PARTIAL_SIG,t)}setInputSighashType(e,t){this.setInput(e,d.SIGHASH_TYPE,S(),x(t))}getInputSighashType(e){const t=this.getInputOptional(e,d.SIGHASH_TYPE,S());if(t)return t.readUInt32LE(0)}setInputRedeemScript(e,t){this.setInput(e,d.REDEEM_SCRIPT,S(),t)}getInputRedeemScript(e){return this.getInputOptional(e,d.REDEEM_SCRIPT,S())}setInputWitnessScript(e,t){this.setInput(e,d.WITNESS_SCRIPT,S(),t)}getInputWitnessScript(e){return this.getInputOptional(e,d.WITNESS_SCRIPT,S())}setInputBip32Derivation(e,t,n,r){if(33!=t.length)throw new Error("Invalid pubkey length: "+t.length);this.setInput(e,d.BIP32_DERIVATION,t,this.encodeBip32Derivation(n,r))}getInputBip32Derivation(e,t){const n=this.getInputOptional(e,d.BIP32_DERIVATION,t);if(n)return this.decodeBip32Derivation(n)}setInputFinalScriptsig(e,t){this.setInput(e,d.FINAL_SCRIPTSIG,S(),t)}getInputFinalScriptsig(e){return this.getInputOptional(e,d.FINAL_SCRIPTSIG,S())}setInputFinalScriptwitness(e,t){this.setInput(e,d.FINAL_SCRIPTWITNESS,S(),t)}getInputFinalScriptwitness(e){return this.getInput(e,d.FINAL_SCRIPTWITNESS,S())}setInputPreviousTxId(e,t){this.setInput(e,d.PREVIOUS_TXID,S(),t)}getInputPreviousTxid(e){return this.getInput(e,d.PREVIOUS_TXID,S())}setInputOutputIndex(e,t){this.setInput(e,d.OUTPUT_INDEX,S(),x(t))}getInputOutputIndex(e){return this.getInput(e,d.OUTPUT_INDEX,S()).readUInt32LE(0)}setInputSequence(e,t){this.setInput(e,d.SEQUENCE,S(),x(t))}getInputSequence(e){var t,n;return null!==(n=null===(t=this.getInputOptional(e,d.SEQUENCE,S()))||void 0===t?void 0:t.readUInt32LE(0))&&void 0!==n?n:4294967295}setInputTapKeySig(e,t){this.setInput(e,d.TAP_KEY_SIG,S(),t)}getInputTapKeySig(e){return this.getInputOptional(e,d.TAP_KEY_SIG,S())}setInputTapBip32Derivation(e,t,n,r,o){if(32!=t.length)throw new Error("Invalid pubkey length: "+t.length);const i=this.encodeTapBip32Derivation(n,r,o);this.setInput(e,d.TAP_BIP32_DERIVATION,t,i)}getInputTapBip32Derivation(e,t){const n=this.getInput(e,d.TAP_BIP32_DERIVATION,t);return this.decodeTapBip32Derivation(n)}getInputKeyDatas(e,t){return this.getKeyDatas(this.inputMaps[e],t)}setOutputRedeemScript(e,t){this.setOutput(e,f.REDEEM_SCRIPT,S(),t)}getOutputRedeemScript(e){return this.getOutput(e,f.REDEEM_SCRIPT,S())}setOutputBip32Derivation(e,t,n,r){this.setOutput(e,f.BIP_32_DERIVATION,t,this.encodeBip32Derivation(n,r))}getOutputBip32Derivation(e,t){const n=this.getOutput(e,f.BIP_32_DERIVATION,t);return this.decodeBip32Derivation(n)}setOutputAmount(e,t){this.setOutput(e,f.AMOUNT,S(),I(t))}getOutputAmount(e){const t=this.getOutput(e,f.AMOUNT,S());return(0,h.unsafeFrom64bitLE)(t)}setOutputScript(e,t){this.setOutput(e,f.SCRIPT,S(),t)}getOutputScript(e){return this.getOutput(e,f.SCRIPT,S())}setOutputTapBip32Derivation(e,t,n,r,o){const i=this.encodeTapBip32Derivation(n,r,o);this.setOutput(e,f.TAP_BIP32_DERIVATION,t,i)}getOutputTapBip32Derivation(e,t){const n=this.getOutput(e,f.TAP_BIP32_DERIVATION,t);return this.decodeTapBip32Derivation(n)}deleteInputEntries(e,t){this.inputMaps[e].forEach(((e,n,r)=>{this.isKeyType(n,t)&&r.delete(n)}))}copy(e){this.copyMap(this.globalMap,e.globalMap),this.copyMaps(this.inputMaps,e.inputMaps),this.copyMaps(this.outputMaps,e.outputMaps)}copyMaps(e,t){e.forEach(((e,n)=>{const r=new Map;this.copyMap(e,r),t[n]=r}))}copyMap(e,t){e.forEach(((e,r)=>t.set(r,n.from(e))))}serialize(){const e=new h.BufferWriter;return e.writeSlice(n.from([112,115,98,116,255])),b(e,this.globalMap),this.inputMaps.forEach((t=>{b(e,t)})),this.outputMaps.forEach((t=>{b(e,t)})),e.buffer()}deserialize(e){const t=new h.BufferReader(e);if(!t.readSlice(5).equals(v))throw new Error("Invalid magic bytes");for(;this.readKeyPair(this.globalMap,t););let n,r,o;try{n=this.getGlobalPsbtVersion()}catch(e){n=0}if(0!==n&&2!==n)throw new Error("Only PSBTs of version 0 or 2 are supported");if(0==n){const e=this.getGlobal(c.UNSIGNED_TX),t=a.Transaction.fromBuffer(e);r=t.ins.length,o=t.outs.length}else r=this.getGlobalInputCount(),o=this.getGlobalOutputCount();for(let e=0;e<r;e++)for(this.inputMaps[e]=new Map;this.readKeyPair(this.inputMaps[e],t););for(let e=0;e<o;e++)for(this.outputMaps[e]=new Map;this.readKeyPair(this.outputMaps[e],t););this.normalizeToV2()}normalizeToV2(){var e;const t=null===(e=this.getGlobalOptional(c.VERSION))||void 0===e?void 0:e.readInt32LE(0);if(2===t)return;if(void 0!==t)throw new Error("Invalid or unsupported value for PSBT_GLOBAL_VERSION");const n=this.getGlobal(c.UNSIGNED_TX),r=a.Transaction.fromBuffer(n);this.setGlobalPsbtVersion(2),this.setGlobalTxVersion(r.version),this.setGlobalFallbackLocktime(r.locktime),this.setGlobalInputCount(r.ins.length),this.setGlobalOutputCount(r.outs.length);for(let e=0;e<r.ins.length;e++)this.setInputPreviousTxId(e,r.ins[e].hash),this.setInputOutputIndex(e,r.ins[e].index),this.setInputSequence(e,r.ins[e].sequence);for(let e=0;e<r.outs.length;e++)this.setOutputAmount(e,r.outs[e].value),this.setOutputScript(e,r.outs[e].script);this.globalMap.delete(c.UNSIGNED_TX.toString(16).padStart(2,"0"))}fromBitcoinJS(e){return this.setGlobalPsbtVersion(2),this.setGlobalTxVersion(e.version),this.setGlobalInputCount(e.data.inputs.length),this.setGlobalOutputCount(e.txOutputs.length),void 0!==e.locktime&&this.setGlobalFallbackLocktime(e.locktime),e.data.inputs.forEach(((t,n)=>{if(function(e){let t;try{a.payments.p2tr({output:e.witnessUtxo.script}),t=!0}catch(e){t=!1}return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||t)}(t))throw new Error("Taproot inputs not supported");this.setInputPreviousTxId(n,e.txInputs[n].hash),void 0!==e.txInputs[n].sequence&&this.setInputSequence(n,e.txInputs[n].sequence),this.setInputOutputIndex(n,e.txInputs[n].index),void 0!==t.sighashType&&this.setInputSighashType(n,t.sighashType),t.nonWitnessUtxo&&this.setInputNonWitnessUtxo(n,t.nonWitnessUtxo),t.witnessUtxo&&this.setInputWitnessUtxo(n,t.witnessUtxo.value,t.witnessUtxo.script),t.witnessScript&&this.setInputWitnessScript(n,t.witnessScript),t.redeemScript&&this.setInputRedeemScript(n,t.redeemScript),e.data.inputs[n].bip32Derivation.forEach((e=>{if(!/^m\//i.test(e.path))throw new Error("Invalid input bip32 derivation");const t=e.path.replace(/m\//i,"").split("/").map((e=>e.match(/['h]/i)?parseInt(e)+2147483648:Number(e)));this.setInputBip32Derivation(n,e.pubkey,e.masterFingerprint,t)}))})),e.txOutputs.forEach(((e,t)=>{this.setOutputAmount(t,e.value),this.setOutputScript(t,e.script)})),this}readKeyPair(e,t){const n=(0,g.sanitizeBigintToNumber)(t.readVarInt());if(0==n)return!1;return A(e,t.readUInt8(),t.readSlice(n-1),t.readVarSlice()),!0}getKeyDatas(e,t){const r=[];return e.forEach(((e,o)=>{this.isKeyType(o,[t])&&r.push(n.from(o.substring(2),"hex"))})),r}isKeyType(e,t){const r=n.from(e.substring(0,2),"hex").readUInt8(0);return t.some((e=>e==r))}setGlobal(e,t){const r=new T(e,n.from([]));this.globalMap.set(r.toString(),t)}getGlobal(e){return m(this.globalMap,e,S(),!1)}getGlobalOptional(e){return m(this.globalMap,e,S(),!0)}setInput(e,t,n,r){A(this.getMap(e,this.inputMaps),t,n,r)}getInput(e,t,n){return m(this.inputMaps[e],t,n,!1)}getInputOptional(e,t,n){return m(this.inputMaps[e],t,n,!0)}setOutput(e,t,n,r){A(this.getMap(e,this.outputMaps),t,n,r)}getOutput(e,t,n){return m(this.outputMaps[e],t,n,!1)}getMap(e,t){return t[e]?t[e]:t[e]=new Map}encodeBip32Derivation(e,t){const n=new h.BufferWriter;return this.writeBip32Derivation(n,e,t),n.buffer()}decodeBip32Derivation(e){const t=new h.BufferReader(e);return this.readBip32Derivation(t)}writeBip32Derivation(e,t,n){e.writeSlice(t),n.forEach((t=>{e.writeUInt32(t)}))}readBip32Derivation(e){const t=e.readSlice(4),n=[];for(;e.offset<e.buffer.length;)n.push(e.readUInt32());return{masterFingerprint:t,path:n}}encodeTapBip32Derivation(e,t,n){const r=new h.BufferWriter;return r.writeVarInt(e.length),e.forEach((e=>{r.writeSlice(e)})),this.writeBip32Derivation(r,t,n),r.buffer()}decodeTapBip32Derivation(e){const t=new h.BufferReader(e),n=(0,g.sanitizeBigintToNumber)(t.readVarInt()),r=[];for(let e=0;e<n;e++)r.push(t.readSlice(32));const o=this.readBip32Derivation(t);return Object.assign({hashes:r},o)}constructor(){this.globalMap=new Map,this.inputMaps=[],this.outputMaps=[]}};class T{toString(){const e=new h.BufferWriter;return this.toBuffer(e),e.buffer().toString("hex")}serialize(e){e.writeVarInt(1+this.keyData.length),this.toBuffer(e)}toBuffer(e){e.writeUInt8(this.keyType),e.writeSlice(this.keyData)}constructor(e,t){this.keyType=e,this.keyData=t}}class w{serialize(e){this.key.serialize(e),e.writeVarSlice(this.value)}constructor(e,t){this.key=e,this.value=t}}function E(e){return new T(e.readUInt8(0),e.slice(1))}function b(e,t){for(let[r,o]of[...t].sort((([e],[t])=>e.localeCompare(t)))){new w(E(n.from(r,"hex")),o).serialize(e)}e.writeUInt8(0)}function S(){return n.from([])}function A(e,t,n,r){const o=new T(t,n);e.set(o.toString(),r)}function x(e){const t=n.alloc(4);return t.writeUInt32LE(e,0),t}function I(e){return(0,h.unsafeTo64bitLE)(e)}function O(e){const t=new h.BufferWriter;return t.writeVarInt(e),t.buffer()}function P(e){return(0,g.sanitizeBigintToNumber)(new h.BufferReader(e).readVarInt())}})),i.register("lu4xX",(function(e,t){var n=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DefaultWalletPolicy=e.exports.WalletPolicy=void 0;var r=i("5GnSC"),o=i("8ziCY"),s=i("htZV9");class a{getId(){return r.crypto.sha256(this.serialize())}serialize(){const e=this.keys.map((e=>n.from(e,"ascii"))),t=new s.Merkle(e.map((e=>(0,s.hashLeaf)(e)))),i=new o.BufferWriter;return i.writeUInt8(2),i.writeVarSlice(n.from(this.name,"ascii")),i.writeVarInt(this.descriptorTemplate.length),i.writeSlice(r.crypto.sha256(n.from(this.descriptorTemplate))),i.writeVarInt(this.keys.length),i.writeSlice(t.getRoot()),i.buffer()}constructor(e,t,n){this.name=e,this.descriptorTemplate=t,this.keys=n}}e.exports.WalletPolicy=a;e.exports.DefaultWalletPolicy=class extends a{constructor(e,t){super("",e,[t])}}})),i.register("cN3SA",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("98k3u")).then((()=>i("lQedB")))})),i.register("hOTYq",(function(n,r){e(n.exports,"createEthereumChildAddressDeriver",(function(){return f}));var o=i("6rT8n"),s=i("6xolq"),a=i("xtN6v"),c=i("cSgaA"),u=i("4chX7"),d=i("13Nf3");const l=(e,n,r)=>(e=>{const n=(0,a.sha256)((0,a.sha256)(e)).replace("0x","").slice(0,8);return t(d).encode(o.Buffer.concat([o.Buffer.from(e),o.Buffer.from(n,"hex")]))})(o.Buffer.from(`0488b21e04${e.replace("0x","")}00000000${n}${r.replace("0x","").toLowerCase()}`,"hex")),f=(e,t)=>{const n=(r=e.publicKey,(0,a.ripemd160)((0,a.sha256)((0,c.computePublicKey)(`0x${r}`,!0))).replace("0x","").slice(0,8));var r;const o=(0,c.computePublicKey)(`0x${t.publicKey}`,!0),i=l(n,t.chainCode,o),d=s.HDNode.fromExtendedKey(i);return e=>{const t=d.derivePath(`${e}`);if(u.EthAddress.safeParse(t.address).success)return{publicKey:t.publicKey,address:t.address};throw new Error(`Invalid Ethereum Child Address derived: ${t.address}`)}}})),i.register("hgJF4",(function(t,n){e(t.exports,"debugLog",(function(){return r}));const r=(e,t)=>{if(e){const e=new Date;console.log(`[${e.toISOString()}] ${t}`)}}})),i.register("02DDj",(function(t,n){e(t.exports,"useLedgerBLETransportState",(function(){return h}),(function(e){return h=e}));var r=i("4y59b"),o=i("lNRH9"),s=i("lMux6"),a=i("hgJF4"),c=i("de28I"),u=i("7wUYG"),d=i("3MSav"),l=i("4ODJX"),f=i("gw8mx"),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const h=(e,t,n)=>{const{deviceID:i,enabled:h=!0,enableDebugLogs:g=!1,refetchInterval:v=1e3,pairingTimeout:y=e.defaultTransportTimeout,expectedLedgerApp:m}=n,{data:T=!1}=(0,f.default)(e),w=!!i&&h&&T,E=l.hardwareQueryKeys.ledgerTransportState();return(0,o.useQuery)({enabled:w,queryKey:E,queryFn:()=>p(void 0,void 0,void 0,(function*(){if(!w)return s.LEDGER_NOT_CONNECTED_STATE;let n,o=t.getQueryData(E),l=!1,f=0;do{try{n=(yield Promise.all([(0,r.withTimeout)((0,d.fetchLedgerBLETransportState)(e,g,i,m),y),(0,r.delayAsync)(200)]))[0]}catch(e){n=s.LEDGER_NOT_CONNECTED_STATE}l=!!(null==o?void 0:o.isConnected)&&"not-connected"===n.status&&++f<5,l&&((0,u.setLedgerTransportStateOverride)(t,s.LEDGER_RECONNECTING_STATE),(0,a.debugLog)(g,"Attempting to reconnect..."),1===f&&(0,c.debugLogStateChange)(g,o,s.LEDGER_RECONNECTING_STATE),yield(0,r.delayAsync)(1e3))}while(l);return(0,c.debugLogStateChange)(g,o,n),f>0&&(o=s.LEDGER_RECONNECTING_STATE),(0,c.debugLogStateChange)(g,o,n),(null==o?void 0:o.isConnected)&&!n.isConnected&&(0,u.resetLedgerAddresses)(t).then((()=>(0,u.refetchLedgerAddresses)(t))),n})),refetchOnMount:!0,refetchInterval:v,initialData:s.LEDGER_NOT_CONNECTED_STATE})}})),i.register("lMux6",(function(t,n){e(t.exports,"LEDGER_NOT_CONNECTED_STATE",(function(){return r})),e(t.exports,"LEDGER_RECONNECTING_STATE",(function(){return o})),e(t.exports,"LEDGER_WAITING_FOR_APPROVAL_STATE",(function(){return i})),e(t.exports,"DEFAULT_LEDGER_TRANSPORT_STATE",(function(){return s}));const r={status:"not-connected",isConnected:!1},o={status:"reconnecting",isConnected:!1},i={status:"waiting-for-approval",isConnected:!1},s=r})),i.register("de28I",(function(t,n){e(t.exports,"debugLogStateChange",(function(){return s}));var r=i("iG6SM"),o=i("hgJF4");const s=(e=!1,t,n)=>{if((null==t?void 0:t.status)===n.status)return;let i,s="";switch(n.status){case"connected":i="🟢 Connected",s=`, selected app: ${n.selectedApp?(0,r.getLedgerAppDisplayName)(n.selectedApp.app):"None"}`;break;case"needs-permission":i="🟠 Needs Permission";break;case"reconnecting":i="🟠 Reconnecting";break;case"waiting-for-approval":i="🟠 Waiting For Approval";break;case"not-connected":i="⚪️ Not Connected"}(0,o.debugLog)(e,`${i}${s}`)}})),i.register("7wUYG",(function(t,n){e(t.exports,"resetLedgerAddresses",(function(){return s}),(function(e){return s=e})),e(t.exports,"refetchLedgerAddresses",(function(){return a}),(function(e){return a=e})),e(t.exports,"invalidateLedgerTransportState",(function(){return c}),(function(e){return c=e})),e(t.exports,"setLedgerTransportStateOverride",(function(){return u}),(function(e){return u=e}));var r=i("4ODJX"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const s=e=>o(void 0,void 0,void 0,(function*(){yield e.resetQueries([`${r.HARDWARE_BASE_QUERY_KEY}:ledger-addresses`])})),a=e=>o(void 0,void 0,void 0,(function*(){yield e.refetchQueries([`${r.HARDWARE_BASE_QUERY_KEY}:ledger-addresses`])})),c=e=>o(void 0,void 0,void 0,(function*(){yield e.invalidateQueries(r.hardwareQueryKeys.ledgerTransportState())})),u=(e,t)=>e.setQueryData(r.hardwareQueryKeys.ledgerTransportState(),t)})),i.register("3MSav",(function(t,n){e(t.exports,"fetchLedgerBLETransportState",(function(){return c}),(function(e){return c=e}));var r=i("lMux6"),o=i("1Jx7r"),s=i("hgJF4"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=(e,t,n,i)=>a(void 0,void 0,void 0,(function*(){if(!n)return(0,s.debugLog)(t,"Attempting to connect to Ledger BLE device, no device ID specified."),r.LEDGER_NOT_CONNECTED_STATE;const a=yield e.open(n);if(!a)return(0,s.debugLog)(t,`Unable to connect to transport with deviceID: ${n}`),r.LEDGER_NOT_CONNECTED_STATE;return{status:"connected",isConnected:!0,transport:a,selectedApp:yield(0,o.getSelectedLedgerApp)(a,e.defaultTransportTimeout,i)}}))})),i.register("1Jx7r",(function(t,n){e(t.exports,"getSelectedLedgerApp",(function(){return u}),(function(e){return u=e}));var r=i("4y59b"),o=i("dPPBv"),s=i("i3h8i"),a=i("9tNa2"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const u=(e,t=2e3,n)=>c(void 0,void 0,void 0,(function*(){const i=()=>c(void 0,void 0,void 0,(function*(){const t=n?[n]:Object.values(o.LedgerApp);return((e,t)=>c(void 0,void 0,void 0,(function*(){for(const n of t)switch(n){case o.LedgerApp.Solana:try{const t=yield(0,a.getSolanaLedgerApp)(e),r=yield t.getAppConfiguration();return{app:n,version:r.version,blindSigningEnabled:r.blindSigningEnabled}}catch(e){}break;case o.LedgerApp.EVM:try{const t=yield(0,a.getEthereumLedgerApp)(e),r=yield t.getAppConfiguration();return{app:n,version:r.version,blindSigningEnabled:1===r.arbitraryDataEnabled}}catch(e){}break;case o.LedgerApp.Bitcoin:try{return{app:n,version:(yield(0,s.getBitcoinAppConfiguration)(e)).version}}catch(e){}}return null})))(e,t)}));try{return yield(0,r.withTimeout)(i(),t)}catch(e){return null}}))})),i.register("i3h8i",(function(t,n){e(t.exports,"getBitcoinAppConfiguration",(function(){return o}),(function(e){return o=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const o=e=>r(void 0,void 0,void 0,(function*(){const t=yield e.send(176,1,0,0);let n=0;if(1!==t[n++])throw new Error("getBitcoinAppConfiguration: format not supported");const r=t[n++],o=t.subarray(n,n+=r).toString("ascii");if("Bitcoin"!==o)throw new Error("Ledger Bitcoin app not selected.");const i=t[n++];return{name:o,version:t.subarray(n,n+=i).toString("ascii")}}))})),i.register("3umQi",(function(t,n){e(t.exports,"useLedgerWireTransportState",(function(){return g}),(function(e){return g=e}));var r=i("4y59b"),o=i("lNRH9"),s=i("lDSNw"),a=i("lMux6"),c=i("hgJF4"),u=i("de28I"),d=i("7wUYG"),l=i("1NWaX"),f=i("4ODJX"),p=i("gw8mx"),h=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const g=(e,t,n=!0,i=!1,g=2e3)=>{const[v,y]=(0,s.useState)(g);(0,s.useEffect)((()=>{e.on("disconnect",(()=>{(0,c.debugLog)(i,"disconnect event received from Ledger transport."),(0,d.invalidateLedgerTransportState)(t)}))}),[e,t]);const{data:m=!1}=(0,p.default)(e),T=n&&m,w=f.hardwareQueryKeys.ledgerTransportState();return(0,o.useQuery)({enabled:T,queryKey:w,queryFn:()=>h(void 0,void 0,void 0,(function*(){if(!T)return a.LEDGER_NOT_CONNECTED_STATE;let n,o=t.getQueryData(w),s=!1,f=0;do{try{n=(yield Promise.all([(0,r.withTimeout)((0,l.fetchLedgerWireTransportState)(e,i,f>0?a.LEDGER_RECONNECTING_STATE:o),e.defaultTransportTimeout),(0,r.delayAsync)(200)]))[0]}catch(e){n=a.LEDGER_NOT_CONNECTED_STATE}s=!!(null==o?void 0:o.isConnected)&&"not-connected"===n.status&&++f<5,s&&((0,d.setLedgerTransportStateOverride)(t,a.LEDGER_RECONNECTING_STATE),(0,c.debugLog)(i,"Attempting to reconnect..."),1===f&&(0,u.debugLogStateChange)(i,o,a.LEDGER_RECONNECTING_STATE),yield(0,r.delayAsync)(500))}while(s);return f>0&&(o=a.LEDGER_RECONNECTING_STATE),(0,u.debugLogStateChange)(i,o,n),(null==o?void 0:o.isConnected)&&!n.isConnected&&(0,d.resetLedgerAddresses)(t).then((()=>(0,d.refetchLedgerAddresses)(t))),n})),onSuccess:e=>(e.isConnected?y(3500):y(g),null),refetchOnMount:!0,refetchInterval:v,initialData:a.LEDGER_NOT_CONNECTED_STATE})}})),i.register("1NWaX",(function(t,n){e(t.exports,"fetchLedgerWireTransportState",(function(){return c}),(function(e){return c=e}));var r=i("lMux6"),o=i("1Jx7r"),s=i("hgJF4"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=(e,t,n)=>a(void 0,void 0,void 0,(function*(){if(0===(yield e.getNumDevices()))return n!==r.LEDGER_NOT_CONNECTED_STATE&&(0,s.debugLog)(t,"Unable to detect Ledger devices."),r.LEDGER_NOT_CONNECTED_STATE;let i=n?n.transport:void 0;if((null==n?void 0:n.isConnected)&&(null==n?void 0:n.selectedApp)||"waiting-for-approval"===(null==n?void 0:n.status))return n;if(i||(i=yield e.getFirstOpenedTransport(),i&&(0,s.debugLog)(t,"Found previously-opened transport.")),i||(i=yield e.openConnected(),i&&(0,s.debugLog)(t,"Opened a new connection to a previously-opened transport.")),!i)return(0,s.debugLog)(t,"Need permission to use the connected Ledger device."),{status:"needs-permission",isConnected:!1};return{status:"connected",isConnected:!0,transport:i,selectedApp:yield(0,o.getSelectedLedgerApp)(i,e.defaultTransportTimeout)}}))})),i.register("3KU10",(function(t,n){e(t.exports,"default",(function(){return f}),(function(e){return f=e}));var r=i("lNRH9"),o=i("1Jx7r"),s=i("hgJF4"),a=i("de28I"),c=i("7wUYG"),u=i("4ODJX"),d=i("1NWaX"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},f=(e,t,n=!0,i=!1)=>{const f=u.hardwareQueryKeys.requestLedgerPermission();return(0,r.useQuery)({enabled:n,queryKey:f,queryFn:()=>l(void 0,void 0,void 0,(function*(){var n,r,l,f,p,h,g;let v;try{(0,s.debugLog)(i,"Requesting permission to connect to Ledger..."),v=yield e.request()}catch(o){if((0,s.debugLog)(i,`Received error trying to request permission: ${o}`),"string"==typeof o.message&&(null===(n=o.message)||void 0===n?void 0:n.includes("device is already open"))){(0,s.debugLog)(i,"✅ Permission granted, device already open. Connecting to device...");const n=u.hardwareQueryKeys.ledgerTransportState(),o=yield t.getQueryData(n);let h;try{h=yield(0,d.fetchLedgerWireTransportState)(e,i,o)}catch(e){}return(null==h?void 0:h.isConnected)?((0,s.debugLog)(i,`✅ Permission granted. Connected to Ledger device: ${null!==(l=null===(r=h.transport.deviceModel)||void 0===r?void 0:r.productName)&&void 0!==l?l:"Unknown device"}. Selected app: ${null!==(p=null===(f=null==h?void 0:h.selectedApp)||void 0===f?void 0:f.app)&&void 0!==p?p:"none"}`),yield(0,c.setLedgerTransportStateOverride)(t,h),(0,a.debugLogStateChange)(i,void 0,h),{type:"granted",transport:h.transport}):((0,s.debugLog)(i,"❌ Unable to connect. Try again and make sure device is unlocked."),{type:"unable-to-connect"})}return(0,s.debugLog)(i,"❌ Permission denied."),{type:"denied"}}if(!v){const e="Unable to connect to Ledger device. Permission granted, but no Transport received.";return(0,s.debugLog)(i,`❌ ${e}`),{type:"unable-to-connect"}}const y={status:"connected",isConnected:!0,transport:v,selectedApp:yield(0,o.getSelectedLedgerApp)(v,e.defaultTransportTimeout)};return yield(0,c.setLedgerTransportStateOverride)(t,y),(0,a.debugLogStateChange)(i,void 0,y),(0,s.debugLog)(i,`✅ Permission granted. Connected to Ledger device: ${null!==(g=null===(h=v.deviceModel)||void 0===h?void 0:h.productName)&&void 0!==g?g:"Unknown device"}`),{type:"granted",transport:v}})),cacheTime:0,staleTime:0,refetchOnMount:!0})}})),i.register("3R3wS",(function(t,n){e(t.exports,"useNearbyLedgerBLEDevices",(function(){return o}));var r=i("lDSNw");(e=>{const t=[];for(let o=1;o<=e;++o){const e=(n=0,r=3,n=Math.ceil(n),r=Math.floor(r),Math.floor(Math.random()*(r-n)+n));let i;i=0===e?0:1===e?-70:-100,t.push({name:`Nano X ${o}`,id:`${o}`,rssi:i})}var n,r;t.sort(((e,t)=>t.rssi-e.rssi))})(100);const o=(e,t)=>{const n=(0,r.useRef)([]),o=(0,r.useRef)(),[i,s]=(0,r.useState)([]);return(0,r.useEffect)((()=>{var r;if(!t)return void(null===(r=o.current)||void 0===r||r.unsubscribe());let i=n.current;const a=e.scan({onDeviceAdded:e=>{i=i.filter((t=>t.id!==e.id)),i.push(e),i.sort(((e,t)=>t.rssi-e.rssi));const t=[...i];n.current.length!==t.length&&(n.current=t,s(n.current))},onDeviceRemoved:e=>{i=i.filter((t=>t.id!==e.id)),i.sort(((e,t)=>t.rssi-e.rssi));const t=[...i];n.current.length!==t.length&&(n.current=t,s(n.current))},onError:e=>{var t;console.error(e),null===(t=o.current)||void 0===t||t.unsubscribe()}});return o.current=a,()=>{var e;null===(e=o.current)||void 0===e||e.unsubscribe()}}),[e,t]),i}})),i.register("5ARdl",(function(e,t){var n,r,o=i("7wUYG");n=e.exports,r=o,Object.keys(r).forEach((function(e){"default"===e||"__esModule"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})}))})),i.register("7as68",(function(t,n){e(t.exports,"getLedgerTransportState",(function(){return a}),(function(e){return a=e}));var r=i("lMux6"),o=i("4ODJX"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=e=>s(void 0,void 0,void 0,(function*(){const t=yield e.getQueryData(o.hardwareQueryKeys.ledgerTransportState());return null!=t?t:r.LEDGER_NOT_CONNECTED_STATE}))})),i.register("fB0uY",(function(e,t){})),i.register("iqxmM",(function(e,t){i("6rT8n"),i("5lurW"),i("eE7wc"),i("6Tvfa"),i("d0go3"),i("belzv"),i("gd9Oy"),i("3fvLJ"),i("4yY1D"),i("4y59b"),i("5GnSC"),i("13Nf3"),i("2h0yV"),i("lMux6"),i("1NWaX"),i("iTpzE"),i("dPPBv"),i("keP0C"),i("iG6SM"),i("1ZJGX"),i("fALED"),i("9tNa2"),i("1Jx7r")})),i.register("1ZJGX",(function(t,n){e(t.exports,"convertSignTypedDataToEip712Message",(function(){return r}));const r=e=>{var t;const n={name:e.domain.name,version:e.domain.version,verifyingContract:e.domain.verifyingContract,chainId:null===(t=e.domain)||void 0===t?void 0:t.chainId},r=[],o={};for(const[t,n]of Object.entries(e.types))for(const e of n)"EIP712Domain"===t?r.push(e):t in o?o[t].push(e):o[t]=[e];return{domain:n,types:Object.assign({EIP712Domain:r},o),primaryType:e.primaryType,message:Object.assign({},e.message)}}})),i.register("fbmp8",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("2UKlV")).then((()=>i("3sixR")))})),i.register("W0Kfy",(function(t,n){e(t.exports,"createOnboardingHooks",(function(){return i("8We9Q").createOnboardingHooks})),e(t.exports,"BATCH_SIZE_BY_PLATFORM",(function(){return i("a6TvO").BATCH_SIZE_BY_PLATFORM})),e(t.exports,"useSelectMultichainAccountsProps",(function(){return i("a6TvO").useSelectMultichainAccountsProps})),e(t.exports,"ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT",(function(){return i("aP4uK").ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT})),e(t.exports,"OnboardingType",(function(){return i("cviTh").OnboardingType})),e(t.exports,"discoverAccounts",(function(){return i("feBHk").discoverAccounts}));i("8We9Q"),i("a6TvO"),i("arV63"),i("bpVLE"),i("aP4uK"),i("cSA8p"),i("cviTh"),i("iXAls"),i("kXIUx"),i("feBHk"),i("5lcT5"),i("9qNQV")})),i.register("8We9Q",(function(t,n){e(t.exports,"createOnboardingHooks",(function(){return f}));var r=i("kXIUx"),o=i("5glVg"),s=i("45FS4"),a=i("ekgVg"),c=i("1TkaT"),u=i("5x4lU"),d=i("b8vJU"),l=i("4Tmjz");function f(e,t,n,i,f){const p=new(0,r.LedgerOnboardingAnalytics)(n);return{useIsFirstTimeOnboarding:()=>(0,a.useIsFirstTimeOnboarding)(e),useSetIsFirstTimeOnboarding:()=>(0,a.useSetIsFirstTimeOnboarding)(e,t),useIsResettingApp:()=>(0,c.useIsResettingApp)(e),useSetIsResettingApp:()=>(0,c.useSetIsResettingApp)(e,t),useSetIsFirstTimeResettingApp:()=>(0,c.useSetIsFirstTimeResettingApp)(e,t),useDeriveLedgerAccounts:e=>(0,o.useDeriveLedgerAccounts)(i,t,p,e),useDiscoverLedgerAccounts:e=>(0,s.useDiscoverLedgerAccounts)(p,e),useTermsAcknowledgement:()=>(0,d.useTermsAcknowledgement)(e,f),useWhatsNewOverlay:()=>(0,l.useWhatsNewOverlay)(e),useSetTermsAcknowledgement:()=>(0,u.useSetTermsAcknowledgement)(e,t),useSetAcknowledgeWhatsNewOverlay:()=>(0,l.useSetAcknowledgeWhatsNewOverlay)(e,t)}}})),i.register("kXIUx",(function(t,n){e(t.exports,"LedgerOnboardingAnalytics",(function(){return d}),(function(e){return d=e}));var r=i("belzv");i("hsoDC");var o,s=i("dPPBv"),a=i("gd9Oy"),c=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},u=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class d{constructor(e){o.set(this,void 0),this.onOpen=()=>u(this,o,"f").capture("connectHardwareOpen"),this.onSelectedChains=e=>{const t=new Set(e),n=[];for(const e of r.Chains.getAllChainIDs())t.has(e)&&n.push(e);const i={numChains:n.length,selectedChains:n.map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(", ")};u(this,o,"f").capture("connectHardwareSelectedChains",{data:i})},this.onDerivedAccounts=e=>{const t={};for(const[n,r]of Object.entries(e.derivedAddresses)){if(!l(n))continue;const e={numberOfDerivedAccounts:r.addresses.length};void 0!==r.duration&&(e.derivationDuration=r.duration),t[n]=e}u(this,o,"f").capture("connectHardwareAccountsDerived",{data:Object.assign({},t)})},this.onDiscoveredAccounts=e=>{var t;const{discoveredAccounts:n}=e,r={};for(const e of n){if("undiscovered"===e.status)continue;const n=e.accounts.reduce(((e,{derivationPathType:t,hasAccountActivity:n})=>(e[a.AddressTypes.getAddressType(t)]={derivationPathType:t,hasAccountActivity:n},e)),{});for(const{hasAccountActivity:e,derivationPathType:o}of Object.values(n)){if(!e)continue;const n=null!==(t=r[o])&&void 0!==t?t:0;r[o]=n+1}}u(this,o,"f").capture("connectHardwareAccountsDiscovered",{data:{numberOfActiveAccounts:r}})},this.onConnectedAccounts=e=>{var t;const n={};for(const r of e.accounts){const e=[...r.addresses,...r.publicKeys].reduce(((e,t)=>(e[a.AddressTypes.getAddressType(t.pathType)]=t.pathType,e)),{});for(const r of Object.values(e)){const e=null!==(t=n[r])&&void 0!==t?t:0;n[r]=e+1}}u(this,o,"f").capture("connectHardwareAccountsConnected",{data:{numberOfAccountsImported:e.accounts.length,numberOfAccountsImportedByDerivationPath:n}})},c(this,o,e,"f")}}function l(e){return"string"==typeof e&&Object.keys(s.LedgerApp).includes(e)}o=new WeakMap})),i.register("5glVg",(function(t,n){e(t.exports,"useDeriveLedgerAccounts",(function(){return l}),(function(e){return l=e})),i("hsoDC");var r=i("lMux6"),o=i("7as68"),s=i("lNRH9"),a=i("lDSNw"),c=i("4bmfd"),u=i("bpVLE"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const l=(e,t,n,i)=>{var l;const{selectedChains:f,ledgerTransportState:p=r.LEDGER_NOT_CONNECTED_STATE}=i,h=f.length>0&&p.isConnected,g=u.onboardingQueryKeys.deriveLedgerAccounts,v=p.isConnected?null===(l=p.selectedApp)||void 0===l?void 0:l.app:void 0;(0,a.useEffect)((()=>{v&&t.invalidateQueries(g)}),[v,t,g]);return(0,s.useQuery)({enabled:h,queryKey:g,queryFn:()=>d(void 0,void 0,void 0,(function*(){const r=yield t.getQueryData(g);return(0,c.deriveLedgerAccounts)(Object.assign(Object.assign({ledgerDeps:e,queryClient:t,ledgerOnboardingAnalytics:n,queryKey:g},i),{ledgerTransportState:yield(0,o.getLedgerTransportState)(t),previousResponse:r}))})),retry:!1})}})),i.register("4bmfd",(function(t,n){e(t.exports,"deriveLedgerAccounts",(function(){return p}),(function(e){return p=e}));var r=i("d0go3"),o=i("belzv");i("hsoDC");var s=i("iG6SM"),a=i("kr4Fg"),c=i("aP4uK"),u=i("9VYtE"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const l={ledgerAppsToDerive:[],currentlyDerivingNetworkIDs:[],derivedAddresses:{}},f=(e,t)=>e.map((e=>({ledgerApp:e,status:t[e]?"complete":"incomplete"}))),p=e=>d(void 0,void 0,void 0,(function*(){var t;const{ledgerDeps:n,queryClient:i,ledgerOnboardingAnalytics:d,queryKey:p,selectedChains:h,enableDebugLogs:g=!0,enableLedgerXPubDerivation:v=!0,ledgerTransportState:y,previousResponse:m=l}=e;if(!(({selectedChains:e,ledgerTransportState:t})=>e.length>0&&t.isConnected)(e))return{ledgerAppsToDerive:[],currentlyDerivingNetworkIDs:[],derivedAddresses:{}};const T=m.derivedAddresses,w=new Set(h),E=o.Chains.getAllNetworkIDs({mainnetOnly:!0}).filter((e=>{const t=o.Chains.getChainID(e);return w.has(t)})),b=Array.from(E.map((e=>(0,s.getLedgerAppForNetworkID)(e))).reduce(((e,t)=>(e.add(t),e)),new Set)),S=f(b,T),A=S.find((e=>"incomplete"===e.status));if(!A)return{ledgerAppsToDerive:[],currentlyDerivingNetworkIDs:[],derivedAddresses:T};const{ledgerApp:x}=A,I=S.filter((e=>"incomplete"===e.status)).map((e=>e.ledgerApp)),O=E.filter((e=>(0,s.getLedgerAppForNetworkID)(e)===x));if(i.setQueryData(p,{ledgerAppsToDerive:I,currentlyDerivingNetworkIDs:O,derivedAddresses:T}),!y.isConnected||(null===(t=y.selectedApp)||void 0===t?void 0:t.app)!==x)return{ledgerAppsToDerive:I,currentlyDerivingNetworkIDs:O,derivedAddresses:T};const P=(0,u.createLedgerOnboardingParams)(x,c.LEDGER_ONBOARDING_INDICES_TO_DERIVE);let D;const R=yield(0,a.deriveLedgerAddresses)({transportTimeout:n.defaultTransportTimeout,state:y,derivationPathParams:P,enableDebugLogs:g,enableLedgerXPubDerivation:v,onSuccess:e=>{D=e}}),C=P.map((e=>{const t=(0,r.getDerivationPath)(e),n=R[t];return{paramsUsed:e,address:n.address,publicKey:n.publicKey}})),N=Object.assign(Object.assign({},T),{[x]:{addresses:C,duration:D}}),L=f(b,N).filter((e=>"incomplete"===e.status)).map((e=>e.ledgerApp)),k=0===L.length?[]:E.filter((e=>(0,s.getLedgerAppForNetworkID)(e)===L[0])),M={ledgerAppsToDerive:L,currentlyDerivingNetworkIDs:k,derivedAddresses:N};return 0===L.length&&d.onDerivedAccounts(M),M}))})),i.register("aP4uK",(function(t,n){e(t.exports,"LEDGER_ONBOARDING_INDICES_TO_DERIVE",(function(){return o})),e(t.exports,"ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT",(function(){return s}));var r=i("cSA8p");const o=19,s=[r.OnboardingStorageKeys.FirstTimeOnboarding,r.OnboardingStorageKeys.IsResettingApp]})),i.register("cSA8p",(function(t,n){var r,o;e(t.exports,"OnboardingStorageKeys",(function(){return r})),(o=r||(r={})).FirstTimeOnboarding="firstTimeOnboarding",o.IsResettingApp="isResettingApp"})),i.register("9VYtE",(function(t,n){e(t.exports,"createLedgerOnboardingParams",(function(){return s}));var r=i("d0go3");i("hsoDC");var o=i("dPPBv");const s=(e,t)=>{const n=[];e===o.LedgerApp.Solana?n.push({pathType:r.DerivationPathType.Bip44RootSolana}):e===o.LedgerApp.EVM&&n.push({pathType:r.DerivationPathType.Bip44RootEthereum});for(let i=0;i<t;++i)switch(e){case o.LedgerApp.Solana:n.push({index:i,pathType:r.DerivationPathType.Bip44ChangeSolana}),n.push({index:i,pathType:r.DerivationPathType.Bip44Solana});break;case o.LedgerApp.EVM:n.push({index:i,pathType:r.DerivationPathType.Bip44Ethereum}),n.push({index:i,pathType:r.DerivationPathType.Bip44EthereumSecondary});break;case o.LedgerApp.Bitcoin:n.push({index:i,pathType:r.DerivationPathType.BitcoinTaproot}),n.push({index:i,pathType:r.DerivationPathType.BitcoinNativeSegwit})}return n}})),i.register("bpVLE",(function(t,n){e(t.exports,"onboardingQueryKeys",(function(){return o}));const r="@phantom/onboarding",o={firstTimeOnboarding:[`${r}:first-time-onboarding`],isResettingApp:[`${r}:is-resetting-app`],deriveLedgerAccounts:[`${r}:derive-ledger-accounts`],discoverLedgerAccounts:[`${r}:discover-ledger-accounts`]}})),i.register("45FS4",(function(t,n){e(t.exports,"useDiscoverLedgerAccounts",(function(){return c}),(function(e){return c=e}));var r=i("lNRH9"),o=i("gejWP"),s=i("bpVLE"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=(e,t)=>{const n=(0,o.isDiscoverLedgerAccountsEnabled)(t),i=s.onboardingQueryKeys.discoverLedgerAccounts;return(0,r.useQuery)({enabled:n,queryKey:i,queryFn:()=>a(void 0,void 0,void 0,(function*(){return(0,o.discoverLedgerAccounts)(Object.assign({ledgerOnboardingAnalytics:e},t))}))})}})),i.register("gejWP",(function(t,n){e(t.exports,"isDiscoverLedgerAccountsEnabled",(function(){return f}),(function(e){return f=e})),e(t.exports,"discoverLedgerAccounts",(function(){return p}),(function(e){return p=e}));var r=i("6Tvfa"),o=i("belzv");i("hsoDC");var s=i("iG6SM"),a=i("a54cU"),c=i("8PPME"),u=i("feBHk"),d=i("9qNQV"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const f=({existingAccountsFetched:e,selectedChains:t,deriveLedgerAccountsResponse:n})=>e&&t.length>0&&!!n&&0===n.ledgerAppsToDerive.length,p=e=>l(void 0,void 0,void 0,(function*(){var t,n,i,l,p;const{ledgerOnboardingAnalytics:h,existingAccounts:g,discoveryBatchSize:v,selectedChains:y,deriveLedgerAccountsResponse:m,retryDiscoverAccountsOnFail:T=!0}=e;if(!f(e))throw new Error("Query disabled.");const w={},E=new Set(y);for(const e of o.Chains.getAllNetworkIDs({mainnetOnly:!0})){if(!E.has(o.Chains.getChainID(e)))continue;const c=(0,s.getLedgerAppForNetworkID)(e),u=null!==(i=null===(n=(null!==(t=null==m?void 0:m.derivedAddresses)&&void 0!==t?t:{})[c])||void 0===n?void 0:n.addresses)&&void 0!==i?i:[];for(const{address:t,publicKey:n,paramsUsed:o}of u){const i=(0,r.getDerivationPathGroupKey)(o),s=null!==(l=w[i])&&void 0!==l?l:{accounts:{},derivationIndex:null!==(p=o.index)&&void 0!==p?p:-1};s.accounts[`${e}-${t}`]={chainType:(0,a.getAddressTypeFromDerivationPathType)(o.pathType),chainId:e,address:t,publicKey:n,pathParams:o},w[i]=s}}const b=Object.entries(w).sort((([e,t],[n,o])=>(0,r.compareDerivationPathGroup)(e,n))).map((([e,t])=>t)),S=(0,d.getExistingAddressesSet)(g),A=b.reduce(((e,t)=>{let n=!1;for(const{address:e}of Object.values(t.accounts))n=n||S.has(e);return n||e.push(t),e}),[]),x=[],I=[];for(let e=0;e<A.length;e+=v){const t=A.slice(e,e+v).map((e=>Object.entries(e.accounts).reduce(((e,[t,n])=>(e[t]={account:n},e)),{})));I.push(t)}for(const e of I)x.push((0,u.discoverAccounts)(e,T));const O=(yield Promise.all(x)).flat().map((e=>{switch(e.status){case"discovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>e.hasAccountActivity||(0,r.isRecommendedDerivationPathType)(e.derivationPathType)))});case"undiscovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>(0,r.isRecommendedDerivationPathType)(e.derivationPathType)))})}})).filter((e=>e.accounts.length>0)).map((e=>{const t=(0,c.default)();return Object.assign(Object.assign({},e),{discoveryIdentifier:t})})),P=O.filter((e=>"undiscovered"===e.status||e.isSelectedByDefault)),D=O.filter((e=>!("undiscovered"===e.status||e.isSelectedByDefault))).slice(0,2),R=P.length>0,C=g.filter((e=>e.type===r.AccountType.Ledger)).length,N=(R?[...P,...D]:O.slice(0,3)).map(((e,t)=>Object.assign(Object.assign({},e),{accountIndex:C+t}))),L={};N.forEach(((e,t)=>{("discovered"===e.status&&e.isSelectedByDefault||0===t)&&(L[e.discoveryIdentifier]=!0)}));const k={discoveredAccounts:N,activeAccountsFound:R,defaultSelectedAccounts:L};return h.onDiscoveredAccounts(k),k}))})),i.register("feBHk",(function(t,n){e(t.exports,"discoverAccounts",(function(){return m}),(function(e){return m=e})),e(t.exports,"useDiscoverMultiChainAccounts",(function(){return w}),(function(e){return w=e}));var r=i("6Tvfa"),o=i("d0go3"),s=i("belzv"),a=i("gd9Oy"),c=i("4yY1D"),u=i("4y59b"),d=i("tv9Be"),l=i("5lcT5"),f=i("6rT8n").Buffer,p=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const h="fetch-multi-chain-accounts-by-seed",g=(e,t)=>[o.DerivationPathType.BitcoinTaproot,o.DerivationPathType.BitcoinNativeSegwit].map((n=>{const r={pathType:n,index:e},{publicKey:o}=t.derivePathType(n,e),i=a.AddressTypes.getAddressType(n),c=(0,a.publicKeyToAddress)({publicKey:o,addressType:i});return{chainType:i,chainId:s.NetworkIDs.Bitcoin.Mainnet,address:c,publicKey:f.from(o).toString("hex"),pathParams:r}})),v=(e,t)=>[o.DerivationPathType.Bip44Ethereum,o.DerivationPathType.Bip44EthereumSecondary,o.DerivationPathType.Bip44EthereumTertiary].map((n=>{const r={pathType:n,index:e},{publicKey:o}=t.derivePathType(n,e);return{chainType:a.AddressTypes.getAddressType(n),pathType:n,address:(0,a.publicKeyToAddress)({publicKey:o,addressType:a.AddressType.EVM}),publicKey:f.from(o).toString("hex"),pathParams:r}})),y=(e,t)=>[o.DerivationPathType.Bip44ChangeSolana,o.DerivationPathType.Bip44Solana,o.DerivationPathType.DeprecatedSolana].map((n=>{const r={pathType:n,index:e},{publicKey:o}=t.derivePathType(n,e),i=(0,a.publicKeyToAddress)({publicKey:o,addressType:a.AddressType.Solana});return{chainType:a.AddressType.Solana,chainId:s.NetworkIDs.Solana.Mainnet,address:i,publicKey:f.from(o).toString("hex"),pathParams:r}})),m=(e,t=!0)=>p(void 0,void 0,void 0,(function*(){const n=Object.assign({},...e);try{const e=Object.values(n).map((({account:e})=>({address:e.address,chainId:e.chainId})));let o;o=t?(yield(0,u.withRetry)((()=>p(void 0,void 0,void 0,(function*(){return(0,u.withTimeout)((0,l.fetchDiscoverAccounts)({accounts:e}),1e4)}))),(()=>!0),2)).accounts:(yield(0,l.fetchDiscoverAccounts)({accounts:e})).accounts;const i={};for(const e of o){const{account:t}=n[`${e.chain.id}-${e.address}`],o=t.publicKey,s=t.chainType,a=(0,r.getDerivationPathGroupKey)(t.pathParams),c=Object.assign(Object.assign({},e),{publicKey:o,chainType:s,derivationPathType:t.pathParams.pathType,hasAccountActivity:!!e.lastActivityTimestamp||parseFloat(e.amount)>0});i[a]=[...i[a]||[],c]}Object.keys(i).forEach((e=>{i[e]=i[e].sort(((e,t)=>s.Chains.compareNetworkID(e.chain.id,t.chain.id)))}));const a=Object.values(i),c=a.filter((e=>e.some((e=>e.hasAccountActivity)))),d=!!c.length;return(d?c:a).map((e=>{var t;const r=e[0];return{status:"discovered",seedIndex:null!==(t=n[`${r.chain.id}-${r.address}`].account.pathParams.index)&&void 0!==t?t:-1,isSelectedByDefault:d,accounts:e}}))}catch(e){const t=Object.values(n).map((({account:e})=>e)),o={};for(const e of t){const{account:t}=n[`${e.chainId}-${e.address}`],i=(0,r.getDerivationPathGroupKey)(t.pathParams),c=Object.assign(Object.assign({},e),{chain:{id:e.chainId,name:s.Chains.getNetworkName(e.chainId),symbol:s.Chains.getTokenSymbol(e.chainId)},chainType:a.AddressTypes.getAddressType(t.pathParams.pathType),derivationPathType:t.pathParams.pathType,hasAccountActivity:!1});o[i]=[...o[i]||[],c]}Object.keys(o).forEach((e=>{o[e]=o[e].sort(((e,t)=>s.Chains.compareNetworkID(e.chain.id,t.chain.id)))}));const i=Object.values(o).map((e=>{var t;const r=e[0];return{status:"undiscovered",seedIndex:null!==(t=n[`${r.chain.id}-${r.address}`].account.pathParams.index)&&void 0!==t?t:-1,accounts:e,isSelectedByDefault:!1}}));return i}})),T=({hdWallet:e,startIndex:t,endIndex:n,enabledAddressTypes:r})=>p(void 0,void 0,void 0,(function*(){const o=[];for(let i=t;i<=n;++i){const t={};if(r.includes(a.AddressType.BitcoinNativeSegwit))for(const n of g(i,e))t[`${s.NetworkIDs.Bitcoin.Mainnet}-${n.address}`]={account:n};if(r.includes(a.AddressType.EVM)){const n=v(i,e),r=s.Chains.getChainIDs(a.AddressType.EVM);for(const e of r){const r=s.Chains[e];for(const{address:e,publicKey:o,chainType:i,pathParams:s}of n)t[`${r.mainnetID}-${e}`]={account:{chainType:i,chainId:r.mainnetID,address:e,publicKey:o,pathParams:s}}}}if(r.includes(a.AddressType.Solana))for(const n of y(i,e))t[`${n.chainId}-${n.address}`]={account:n};o.push(t)}return m(o)}));function w({batchSize:e,hdWallet:t,enabledAddressTypes:n}){const r=!!t&&0!=n.length,o=[h,e];return(0,d.useInfiniteQuery)({enabled:r,queryKey:o,queryFn:({pageParam:r=0})=>p(this,void 0,void 0,(function*(){if(e<1)throw new Error(`Need positive batchSize: ${e}`);if(!t)throw new Error("Missing HDWallet");const o=[],i=[],s=0===r;let a=r,c=!0;for(;c;){const r=a,u=a+e-1,d=(yield T({hdWallet:t,startIndex:r,endIndex:u,enabledAddressTypes:n})).flat(1);a+=e,c=!1;for(const e of d)o.push(e),("undiscovered"===e.status||e.isSelectedByDefault)&&i.push(e),s&&"discovered"===e.status&&e.isSelectedByDefault&&(c=!0)}if(s&&0===i.length&&o.length>1){const e=o[0],t=e.accounts.map((e=>Object.assign(Object.assign({},e),{hasAccountActivity:!1}))),n={status:"undiscovered",seedIndex:e.seedIndex,accounts:t,isSelectedByDefault:!1};i.push(n)}return i})),getNextPageParam:(t,n)=>{const r=n.length,o=r?n[0]:[],i=o.length?E(o[o.length-1].seedIndex,e):0;return 1===r?i:i+e*(r-1)},cacheTime:0,staleTime:0,onError:e=>c.telemetry.captureError(e,c.FeatureTag.Account)})}const E=(e,t)=>Math.ceil(e/t)*t+t})),i.register("5lcT5",(function(t,n){e(t.exports,"fetchDiscoverAccounts",(function(){return u}),(function(e){return u=e}));var r=i("belzv"),o=i("6Nxml"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=`${(0,o.getAPIEnvironment)()}/discover/v1`,c={Accept:"application/json","Content-Type":"application/json"},u=e=>s(void 0,void 0,void 0,(function*(){if(!e.accounts.length)throw new Error("Must send at least 1 account for discovery");const t=yield fetch(a,{method:"POST",headers:c,body:JSON.stringify(e)}),n=yield t.json();if(200!==t.status){if((o=n)&&"string"==typeof o.message)throw new Error(n.message);throw new Error(`Unable to discover accounts with args: ${JSON.stringify(e)}`)}var o;if((e=>{if(!e||!Array.isArray(e.accounts))return!1;for(const t of e.accounts)if("string"!=typeof t.address||"string"!=typeof t.amount||t.lastActivityTimestamp&&"number"!=typeof t.lastActivityTimestamp||!t.chain||"string"!=typeof t.chain.id||!new Set(r.Chains.getAllNetworkIDs()).has(t.chain.id)||"string"!=typeof t.chain.name||"string"!=typeof t.chain.symbol||"string"!=typeof t.chain.imageUrl)return!1;return!0})(n))return n;throw new Error(`Invalid discover accounts response: ${JSON.stringify(n)}`)}))})),i.register("9qNQV",(function(t,n){e(t.exports,"getExistingAddressesSet",(function(){return r}));const r=e=>{const t=new Set;for(const n of e)for(const{address:e}of n.addresses)t.add(e);return t}})),i.register("ekgVg",(function(t,n){e(t.exports,"useIsFirstTimeOnboarding",(function(){return u}),(function(e){return u=e})),e(t.exports,"useSetIsFirstTimeOnboarding",(function(){return d}),(function(e){return d=e}));var r=i("fG04A"),o=i("lNRH9"),s=i("cSA8p"),a=i("bpVLE"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const u=e=>{const{data:t}=(0,o.useQuery)({queryKey:a.onboardingQueryKeys.firstTimeOnboarding,queryFn:()=>c(void 0,void 0,void 0,(function*(){const t=yield e.get(s.OnboardingStorageKeys.FirstTimeOnboarding);return null===t||t.isFirstTimeOnboarding}))});return t},d=(e,t)=>(0,r.useMutation)({mutationFn:n=>c(void 0,void 0,void 0,(function*(){yield e.set(s.OnboardingStorageKeys.FirstTimeOnboarding,{isFirstTimeOnboarding:n}),t.setQueryData(a.onboardingQueryKeys.firstTimeOnboarding,n)}))})})),i.register("1TkaT",(function(t,n){e(t.exports,"useIsResettingApp",(function(){return u}),(function(e){return u=e})),e(t.exports,"useSetIsResettingApp",(function(){return d}),(function(e){return d=e})),e(t.exports,"useSetIsFirstTimeResettingApp",(function(){return l}),(function(e){return l=e}));var r=i("fG04A"),o=i("lNRH9"),s=i("cSA8p"),a=i("bpVLE"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const u=e=>{const{data:t}=(0,o.useQuery)({queryKey:a.onboardingQueryKeys.isResettingApp,queryFn:()=>c(void 0,void 0,void 0,(function*(){const t=yield e.get(s.OnboardingStorageKeys.IsResettingApp);return null===t?{isResettingApp:!1,isFirstTimeResettingApp:!1}:t}))});return t},d=(e,t)=>(0,r.useMutation)({mutationFn:n=>c(void 0,void 0,void 0,(function*(){var r;const o=yield e.get(s.OnboardingStorageKeys.IsResettingApp),i=null!==(r=null==o?void 0:o.isFirstTimeResettingApp)&&void 0!==r&&r;yield e.set(s.OnboardingStorageKeys.IsResettingApp,{isResettingApp:n,isFirstTimeResettingApp:i}),t.setQueryData(a.onboardingQueryKeys.isResettingApp,{isResettingApp:n,isFirstTimeResettingApp:i})}))}),l=(e,t)=>(0,r.useMutation)({mutationFn:n=>c(void 0,void 0,void 0,(function*(){var r;const o=yield e.get(s.OnboardingStorageKeys.IsResettingApp),i=null!==(r=null==o?void 0:o.isResettingApp)&&void 0!==r&&r;yield e.set(s.OnboardingStorageKeys.IsResettingApp,{isResettingApp:i,isFirstTimeResettingApp:n}),t.setQueryData(a.onboardingQueryKeys.isResettingApp,{isResettingApp:i,isFirstTimeResettingApp:n})}))})})),i.register("5x4lU",(function(t,n){e(t.exports,"useSetTermsAcknowledgement",(function(){return a}),(function(e){return a=e}));var r=i("6Tvfa"),o=i("fG04A"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=(e,t)=>(0,o.useMutation)({mutationFn:n=>s(void 0,void 0,void 0,(function*(){yield e.set(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2,n),t.setQueryData([r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2],n)}))})})),i.register("b8vJU",(function(t,n){e(t.exports,"useTermsAcknowledgement",(function(){return a}),(function(e){return a=e}));var r=i("6Tvfa"),o=i("lNRH9"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=(e,t)=>(0,o.useQuery)({queryKey:[r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2],queryFn:()=>s(void 0,void 0,void 0,(function*(){const n=yield e.get(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2),o=yield((e,t,n)=>s(void 0,void 0,void 0,(function*(){if(e)return e;try{const e=yield n.get(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2);return e&&(yield t.set(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2,e),yield n.remove(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2)),t.get(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2)}catch(e){return null}})))(n,e,t);return!!o}))})})),i.register("4Tmjz",(function(t,n){e(t.exports,"useWhatsNewOverlay",(function(){return c}),(function(e){return c=e})),e(t.exports,"useSetAcknowledgeWhatsNewOverlay",(function(){return u}),(function(e){return u=e}));var r=i("1uUV4"),o=i("fG04A"),s=i("lNRH9"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=e=>(0,s.useQuery)({queryKey:[r.StorageKeys.LastSeenWhatsNewId],queryFn:()=>a(void 0,void 0,void 0,(function*(){var t;return 37>(null!==(t=yield e.get(r.StorageKeys.LastSeenWhatsNewId))&&void 0!==t?t:0)}))}),u=(e,t)=>(0,o.useMutation)({mutationFn:()=>a(void 0,void 0,void 0,(function*(){yield e.set(r.StorageKeys.LastSeenWhatsNewId,37)})),onSuccess:()=>{t.setQueryData([r.StorageKeys.LastSeenWhatsNewId],!1)}})})),i.register("a6TvO",(function(t,n){e(t.exports,"BATCH_SIZE_BY_PLATFORM",(function(){return l}),(function(e){return l=e})),e(t.exports,"useSelectMultichainAccountsProps",(function(){return f}),(function(e){return f=e}));var r=i("lMzyG"),o=i("4y59b"),s=i("lDSNw"),a=i("8yJNR"),c=i("feBHk"),u=i("arV63"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const l={extension:7,ios:7,android:7},f=({platform:e,seed:t,navigationCallback:n,storageCallback:i,enabledAddressTypes:f})=>{var p;const{t:h}=(0,r.useTranslation)(),g=h("onboardingSelectAccountsFindMoreAccounts"),[v,y]=(0,s.useState)({}),[m,T]=(0,s.useState)(!1),[w,E]=(0,s.useState)(!1),[b,S]=(0,s.useState)(g),A=(0,u.useCachedHDWallet)(t),{data:x,status:I,fetchNextPage:O,isFetchingNextPage:P}=(0,c.useDiscoverMultiChainAccounts)({batchSize:l[e],hdWallet:A,enabledAddressTypes:f}),D=(0,s.useMemo)((()=>{var e;return null!==(e=null==x?void 0:x.pages.flat())&&void 0!==e?e:[]}),[x]),R=(C=D,(0,s.useMemo)((()=>C?C.map((e=>"undiscovered"===e.status?e:Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>e.hasAccountActivity))}))):[]),[C]));var C;const N=(L=R,(0,s.useMemo)((()=>L.reduce(((e,t,n)=>(e[n]=0===n||t.isSelectedByDefault,e)),{})),[L]));var L;const k=((e,t)=>(0,s.useMemo)((()=>{var n;return null!==(n=null==e?void 0:e.reduce(((e,n,r)=>t[r]?[...e,n]:e),[]))&&void 0!==n?n:[]}),[e,t]))(D,v),M=(({activeAccountsNumber:e,allAccountsNumber:t,hasDiscoveryFailed:n})=>{const{t:o}=(0,r.useTranslation)(),i=e>0&&!n;return(0,s.useMemo)((()=>0===t?o("onboardingImportImportingFindingAccounts"):0===e?o("onboardingImportAccountsEmptyResult"):1===t?i?o("onboardingImportAccountsFoundAccounts_one",{numberOfWallets:e}):o("onboardingImportAccountsFoundAccountsNoActivity_one",{numberOfWallets:t}):t>1?i?o("onboardingImportAccountsFoundAccounts_other",{numberOfWallets:e}):o("onboardingImportAccountsFoundAccountsNoActivity_other",{numberOfWallets:t}):""),[e,t,i,o])})({activeAccountsNumber:R.length,allAccountsNumber:D.length,hasDiscoveryFailed:"undiscovered"===(null===(p=D[0])||void 0===p?void 0:p.status)});((e,t)=>{const{t:n}=(0,r.useTranslation)();(0,s.useEffect)((()=>{let r;if(e){const{pages:o}=e,i=o.length>1,s=0===o[o.length-1].length;i&&s&&(t(n("onboardingSelectAccountsFindMoreNoneFound")),r=setTimeout((()=>{t(n("onboardingSelectAccountsFindMoreAccounts"))}),3e3))}return()=>{r&&clearTimeout(r)}}),[e])})(x,S),((e,t)=>{(0,s.useEffect)((()=>{t((t=>{const{length:n}=Object.keys(e),r={};for(let o=0;o<n;o++)r[o]=void 0===t[o]?e[o]:t[o];return r}))}),[e,t])})(N,y);const _=(0,s.useCallback)((()=>E(!0)),[]),B=(0,s.useCallback)((e=>{if("success"!==I)return;const t=Object.assign({},v);t[e]=!t[e],y(t)}),[I,v,y]),U=(0,s.useCallback)((()=>d(void 0,void 0,void 0,(function*(){m||(T(!0),yield(0,o.delayAsync)(0),yield i(k,(0,a.generateImportedAccountChainAnalytics)(k)),n((0,a.generateImportedAccountChainAnalytics)(k)))}))),[m,k,n,i]),F={expanded:w,findMoreAccountsButtonText:b,isFetchingMoreAccounts:P,isImporting:m,renderedPages:R,selectedAccounts:v,subtitle:M,findMoreAccounts:O,onExpand:_,onImport:U,onSelect:B};return"success"!==I?Object.assign({status:"loading",isImportButtonDisabled:!0},F):Object.assign({status:"success",isImportButtonDisabled:0===k.length},F)}})),i.register("8yJNR",(function(t,n){e(t.exports,"generateImportedAccountChainAnalytics",(function(){return r}));const r=e=>e.reduce(((e,t)=>{var n,r,o,i;let s=e;for(const a of t.accounts){const t=a.chain.name.toLowerCase();if((null===(n=e[t])||void 0===n?void 0:n.balance)&&(null===(r=e[t])||void 0===r?void 0:r.history))continue;const c="amount"in a&&parseFloat(a.amount)>0,u=a.hasAccountActivity;e[t]?s=Object.assign(Object.assign({},s),{[t]:Object.assign(Object.assign({},s[t]),{balance:c||(null===(o=s[t])||void 0===o?void 0:o.balance),history:u||(null===(i=s[t])||void 0===i?void 0:i.history)})}):s=Object.assign(Object.assign({},s),{[t]:{balance:c,history:u}})}return s}),{})})),i.register("arV63",(function(t,n){e(t.exports,"useCachedHDWallet",(function(){return s}));var r=i("d0go3"),o=i("lDSNw");const s=e=>{const[t,n]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(e.length){const t=new(0,r.CachedHDWallet)(e);return n(t),()=>{n(null),t.cleanup()}}}),[e]),t}})),i.register("cviTh",(function(t,n){e(t.exports,"OnboardingType",(function(){return r}));var r,o,s=i("7pPsM");(o=r||(r={})).Initial="initial",o.Create="create",o.Import="import",o.Restore="restore",o.Append="append",o.SeedVault="seedVault";const a=s.z.object({balance:s.z.boolean(),history:s.z.boolean()});s.z.record(s.z.string(),a)})),i.register("iXAls",(function(e,t){i("bpVLE")})),i.register("fOc77",(function(t,n){e(t.exports,"prefetchShortcuts",(function(){return i("c1xlr").prefetchShortcuts})),e(t.exports,"trackLinkOpen",(function(){return i("vH2es").trackLinkOpen})),e(t.exports,"trackModalOpen",(function(){return i("vH2es").trackModalOpen})),e(t.exports,"createShortcutHooks",(function(){return i("jXZgH").createShortcutHooks})),e(t.exports,"DEFAULT_ICON",(function(){return i("fxzB8").DEFAULT_ICON})),e(t.exports,"getIcon",(function(){return i("2lhm1").getIcon})),e(t.exports,"WALLET_SHORTCUTS_QUERY_KEY",(function(){return i("81b1l").WALLET_SHORTCUTS_QUERY_KEY}));i("c1xlr"),i("vH2es"),i("jXZgH"),i("hKbhf"),i("fxzB8"),i("2lhm1"),i("81b1l")})),i.register("c1xlr",(function(t,n){e(t.exports,"prefetchShortcuts",(function(){return a}));var r=i("81b1l"),o=i("9IAca");const s=10;function a(e,t,n,i){if(!n)return;const{externalUrl:a,isSpam:c,items:u}=n;if(c||!i)return;const d=(null!=u?u:[]).map((e=>e.externalUrl));Array.from(new Set([a,...d])).reduce(((e,t)=>{const n=(0,o.ensureExternalUrl)(t);return(0,o.isValidUrl)(n)&&e.length<s?[...e,n]:e}),[]).forEach((n=>{const i=(0,o.ensureExternalUrl)(n);(0,o.isValidUrl)(i)&&t.prefetchQuery((0,r.getShortcutsQuery)(new URL(i),e)).catch((e=>{console.error(`Failed to prefetch ${i}`,e)}))}))}})),i.register("81b1l",(function(t,n){e(t.exports,"WALLET_SHORTCUTS_QUERY_KEY",(function(){return a}),(function(e){return a=e})),e(t.exports,"getShortcutsQuery",(function(){return c}),(function(e){return c=e}));var r=i("fxzB8"),o=i("9IAca"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a="wallet-shortcuts",c=(e,t)=>({queryKey:[a,null==e?void 0:e.toString()],queryFn(){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("URL is null");const n=(0,o.appendShortcut)(e),i=yield d(t,n);if(!1===r.SchemaType.safeParse(i).success)throw new Error(`Invalid shortcut response from URL ${n.toString()}`);return r.SchemaType.parse(i).shortcuts}))}}),u=new Error("Failed to fetch shortcuts for collection"),d=(e,t)=>s(void 0,void 0,void 0,(function*(){const n=`${e}/collectibles/v1/shortcuts`;let r;try{r=yield fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:t.toString()})})}catch(e){throw u}if(!r.ok)throw u;return r.json()}))})),i.register("fxzB8",(function(t,n){e(t.exports,"DEFAULT_ICON",(function(){return o})),e(t.exports,"SchemaType",(function(){return f}));var r=i("7pPsM");const o="default",s=r.z.union([r.z.literal("vote"),r.z.literal("vote-2"),r.z.literal("stake"),r.z.literal("stake-2"),r.z.literal("view"),r.z.literal("chat"),r.z.literal("tip"),r.z.literal("mint"),r.z.literal("mint-2"),r.z.literal("discord"),r.z.literal("twitter"),r.z.literal("twitter-2"),r.z.literal("x"),r.z.literal("instagram"),r.z.literal("telegram"),r.z.literal("leaderboard"),r.z.literal("gaming"),r.z.literal("gaming-2"),r.z.literal("generic-link"),r.z.literal("generic-add"),r.z.literal(o)]).optional().default(o).catch(o),a=r.z.object({label:r.z.string(),uri:r.z.string().url().refine((e=>e.startsWith("https://")||e.startsWith("solana:")),(e=>({message:`${e} is not a valid protocol`}))),prefersExternalTarget:r.z.boolean().optional().default(!1),preferredPresentation:r.z.union([r.z.literal("default"),r.z.literal("immerse")]).optional().default("immerse"),platform:r.z.union([r.z.literal("mobile"),r.z.literal("desktop"),r.z.literal("all")]).optional().default("all"),icon:s}),c=a.extend({limitToCollections:r.z.string().array().optional().default([]).refine((e=>0===e.length||e.every((e=>e.length))),(e=>({message:`${e} is not a valid array of collection ids`})))}),u=a.extend({type:r.z.literal("fungible"),limitToTokenAddresses:r.z.string().array().optional().default([]).refine((e=>0===e.length||e.every((e=>e.length))),(e=>({message:`${e} is not a valid array of token addresses`})))}),d=c.extend({type:r.z.literal("collectible").optional().default("collectible")}),l=r.z.union([d,u]),f=r.z.union([r.z.object({version:r.z.literal(1),shortcuts:r.z.array(c).optional().default([])}),r.z.object({version:r.z.literal(2),shortcuts:r.z.array(l).optional().default([])})]);r.z.object({collectionId:r.z.string().optional(),tokenId:r.z.string().optional(),ownerAddress:r.z.string().optional()})})),i.register("9IAca",(function(t,n){e(t.exports,"appendShortcut",(function(){return r})),e(t.exports,"ensureExternalUrl",(function(){return o})),e(t.exports,"isValidUrl",(function(){return i}));const r=e=>{const t=e.pathname.split("/").filter((e=>""!==e)).join("/"),n=new URL(`https://${e.hostname}`);return n.pathname=t+"/shortcuts.json",n.search=e.search,n},o=e=>{if(!e||!e.trim())return"";const t=e.trim();return/^https?:\/\//.test(t)?t:`https://${t}`},i=e=>{if(!e)return!1;try{return new URL(e),!0}catch(e){return!1}}})),i.register("vH2es",(function(t,n){e(t.exports,"trackLinkOpen",(function(){return o}),(function(e){return o=e})),e(t.exports,"trackModalOpen",(function(){return i}),(function(e){return i=e}));var r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function o(e,t){var{hostname:n,platform:o}=e,i=r(e,["hostname","platform"]);const s=n.includes("//")?new URL(n).hostname:n;return{data:"collectible"===i.type?{platform:o,hostname:s,collectionName:i.collectionName,label:t.label,uri:t.uri}:{hostname:s,platform:o,fungible:i.caip19,label:t.label,uri:t.uri}}}function i(e){var{hostname:t,platform:n}=e,o=r(e,["hostname","platform"]);const i=t.includes("//")?new URL(t).hostname:t;return{data:"collectible"===o.type?{platform:n,hostname:i,collectionName:o.collectionName}:{platform:n,hostname:i,fungible:o.caip19}}}})),i.register("jXZgH",(function(t,n){e(t.exports,"createShortcutHooks",(function(){return s}));var r=i("hKbhf"),o=i("hhSeR");function s(e,t){return{useShortcuts:(t,n,r)=>(0,o.useShortcuts)(e(),t,n,r),usePrefetchShortcuts:(n,o)=>(0,r.usePrefetchShortcuts)(e(),t,n,o)}}})),i.register("hKbhf",(function(t,n){e(t.exports,"usePrefetchShortcuts",(function(){return u})),e(t.exports,"useFetchShortcuts",(function(){return l}));var r=i("4y59b"),o=i("lNRH9"),s=i("lDSNw"),a=i("c1xlr"),c=i("81b1l");const u=(e,t,n,r)=>{(0,s.useEffect)((()=>{(0,a.prefetchShortcuts)(e,t,n,r)}),[n,r,e,t])},d=(0,r.toMilliseconds)({minutes:5}),l=(e,t,n)=>{const r=null!==t&&n;return(0,o.useQuery)(Object.assign({enabled:r,cacheTime:d,staleTime:d,refetchInterval:!1,refetchOnMount:!1},(0,c.getShortcutsQuery)(t,e)))}})),i.register("hhSeR",(function(t,n){e(t.exports,"useShortcuts",(function(){return u}));var r=i("cR6w7"),o=i("9IAca"),s=i("hKbhf"),a=i("cCvgZ");function c(e){return Boolean(e&&"object"==typeof e&&"type"in e&&"fungible"===e.type)}function u(e,t,n,r){var i,u;const l=function(e){return c(e)?(0,o.ensureExternalUrl)(e.externalUrl):(0,o.ensureExternalUrl)(null==e?void 0:e.externalUrl)}(t),f=(0,o.isValidUrl)(l)&&Boolean(l)&&!function(e){var t;return!c(e)&&(null===(t=null==e?void 0:e.collection.isSpam)||void 0===t||t)}(t)&&r,{data:p,isLoading:h}=(0,s.useFetchShortcuts)(e,f&&l?new URL(l):null,r),g=c(t)?"":null!==(i=d(t))&&void 0!==i?i:"",v=c(t)?t.tokenAddress:null!==(u=null==t?void 0:t.id)&&void 0!==u?u:"",y=c(t)?{platform:n,tokenAddress:v,type:"fungible"}:{platform:n,collectionId:g,type:"collectible"},m=(0,a.useMappedShortcuts)(null!=p?p:[],{collectionId:g,tokenId:v,ownerAddress:null==t?void 0:t.owner},y);return{isLoading:!t||h&&f,shortcuts:f?m:[]}}const d=e=>{if(null==e?void 0:e.chainData)return(0,r.isEthereumCollectibleChainData)(e.chainData)?e.chainData.contract:(0,r.isSolanaCollectibleChainData)(e.chainData)?e.collection.id:(0,r.isBitcoinCollectibleChainData)(e.chainData)?e.chainData.firstCreatedInscriptionId:void 0}})),i.register("cCvgZ",(function(t,n){e(t.exports,"useMappedShortcuts",(function(){return a}));var r=i("lDSNw"),o=i("92XKC"),s=i("2Snx5");const a=(e,t,n)=>(0,r.useMemo)((()=>{const r=(0,s.parse)({input:t,shortcuts:e});return(0,o.filter)(r,n)}),[e,t,n])})),i.register("92XKC",(function(t,n){e(t.exports,"filter",(function(){return r}));const r=(e,t)=>e?e.filter((e=>"fungible"===t.type?function(e,t){const n="type"in e&&"fungible"===e.type?e:null;if(!n)return!1;const r="all"===n.platform||n.platform===t.platform,o=n.limitToTokenAddresses&&n.limitToTokenAddresses.length>0;return!(!r||o)||!(!r||!o)&&n.limitToTokenAddresses.some((e=>e===t.tokenAddress))}(e,t):function(e,t){const n="type"in e&&"collectible"!==e.type?null:e;if(!n)return!1;const r="all"===n.platform||n.platform===t.platform,o=n.limitToCollections&&n.limitToCollections.length>0;return!(!r||o)||!(!r||!o)&&n.limitToCollections.some((e=>e===t.collectionId))}(e,t))).slice(0,8):[]})),i.register("2Snx5",(function(t,n){e(t.exports,"parse",(function(){return r}));const r=({input:e,shortcuts:t})=>{if(0===t.length)return[];let n=JSON.stringify(t);return e.collectionId&&(n=n.replaceAll("{{collectionId}}",e.collectionId)),e.tokenId&&(n=n.replaceAll("{{tokenId}}",e.tokenId)),e.ownerAddress&&(n=n.replaceAll("{{ownerAddress}}",e.ownerAddress)),JSON.parse(n)}})),i.register("2lhm1",(function(t,n){e(t.exports,"getIcon",(function(){return a}));var r=i("4y59b"),o=i("fxzB8");const s=[["twitter",[/twitter.com/i]],["x",[/x.com/i]],["discord",[/discord.com/i,/discord.gg/i]],["telegram",[/t.me/i]],["instagram",[/instagram.com/i]]];function a(e,t){const n=(0,r.getHostname)(e.toString());return t===o.DEFAULT_ICON&&n?function(e){for(const[t,n]of s)if(n.some((t=>t.test(e))))return t;return o.DEFAULT_ICON}(n):t}})),i.register("5cqUH",(function(t,n){e(t.exports,"getLegacyMnemonicFetcher",(function(){return a}),(function(e){return a=e}));var r=i("aQIUM"),o=i("WH8YE"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=()=>({fetch:()=>s(void 0,void 0,void 0,(function*(){const e=yield(0,o.getLegacyMnemonic)();if(!e)return null;switch(e.type){case"bip39":{const t=yield e.value.getMnemonic(),n=r.ObfuscatedBytes.from(t);return t.fill(0),n}case"deprecated":{const t=r.ObfuscatedBytes.from(e.value);return e.value.fill(0),t}}}))})})),i.register("WH8YE",(function(n,r){e(n.exports,"lockExtension",(function(){return m}),(function(e){return m=e})),e(n.exports,"unlockExtension",(function(){return T}),(function(e){return T=e})),e(n.exports,"isExtensionUnlocked",(function(){return w}),(function(e){return w=e})),e(n.exports,"setPassword",(function(){return E}),(function(e){return E=e})),e(n.exports,"verifyPassword",(function(){return b}),(function(e){return b=e})),e(n.exports,"updatePassword",(function(){return S}),(function(e){return S=e})),e(n.exports,"importSeedAccount",(function(){return x}),(function(e){return x=e})),e(n.exports,"isExistingSeed",(function(){return I}),(function(e){return I=e})),e(n.exports,"exportPrivateKey",(function(){return R}),(function(e){return R=e})),e(n.exports,"exportEntropy",(function(){return C}),(function(e){return C=e})),e(n.exports,"hasOnboarded",(function(){return _}),(function(e){return _=e})),e(n.exports,"resetHasOnboarded",(function(){return B}),(function(e){return B=e})),e(n.exports,"getVaultProxy",(function(){return U}),(function(e){return U=e})),e(n.exports,"getLegacyMnemonic",(function(){return F}),(function(e){return F=e}));var o=i("6Tvfa"),s=i("aQIUM"),a=i("gd9Oy");i("c9gT2");var c=i("hvrUa"),u=i("9h19n"),d=i("4y59b"),l=i("13Nf3"),f=i("2GHjd"),p=i("f44BS"),h=i("9F7Hg"),g=i("5Doro"),v=i("6rT8n").Buffer,y=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const m=()=>y(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.LockExtension),t=yield c.sendMessage(p.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),T=e=>y(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.UnlockExtension,e),n=yield c.sendMessage(p.browser.runtime,t);if("error"in n)throw new Error(n.error.message);if(!n.result)throw new Error("Missing unlock extension response.");const{isUnlocked:r,migrationResult:o}=n.result;if(void 0===r)throw new Error("Missing isUnlocked in unlock response.");if(void 0===o)throw new Error("Missing migrationResult in unlock response.");switch(o){case"success":yield g.queryClient.invalidateQueries({refetchType:"all"});break;case"no-migration":case"failure":break;default:(0,d.assertNever)(o)}return{isUnlocked:r,migrationResult:o}})),w=()=>y(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.IsExtensionUnlocked),t=yield c.sendMessage(p.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),E=e=>y(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.SetPassword,e),n=yield c.sendMessage(p.browser.runtime,t);if("error"in n)throw new Error(n.error.message);return n.result})),b=e=>y(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.VerifyPassword,e),n=yield c.sendMessage(p.browser.runtime,t);if("error"in n)throw new Error(n.error.message);return n.result})),S=e=>y(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.UpdatePassword,e),n=yield c.sendMessage(p.browser.runtime,t);if("error"in n)throw new Error(n.error.message);return n.result})),A=(e,t,n)=>y(void 0,void 0,void 0,(function*(){const r=t.fold((e=>v.from(e.buffer).toString("base64"))),o=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ImportPrivateKeyAccount,[e,r,n]),i=yield c.sendMessage(p.browser.runtime,o);if("error"in i)throw new Error(i.error.message);if("string"==typeof i.result)return JSON.parse(i.result);throw new Error("Invalid response")})),x=(e,n,r)=>y(void 0,void 0,void 0,(function*(){const o=e.getEntropy(),i=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ImportSeedAccount,[t(l).encode(o),n,r]);o.fill(0);const s=yield c.sendMessage(p.browser.runtime,i);if("error"in s)throw new Error(s.error.message);if("string"==typeof s.result)return JSON.parse(s.result);throw new Error("Invalid response")})),I=e=>y(void 0,void 0,void 0,(function*(){const n=e.getEntropy(),r=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.IsExistingSeed,t(l).encode(n));n.fill(0);const o=yield c.sendMessage(p.browser.runtime,r);if("error"in o)throw new Error(o.error.message);if("boolean"==typeof o.result||null===o.result)return o.result;throw new Error("Invalid response")})),O=e=>y(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.AddAccountForSeed,[e]),n=u.parse(yield p.browser.runtime.sendMessage(u.stringify(t)));if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return JSON.parse(n.result);throw new Error("Invalid response")})),P=(e,t)=>y(void 0,void 0,void 0,(function*(){const n=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.AddLedgerAccounts,[e,t]),r=u.parse(yield p.browser.runtime.sendMessage(u.stringify(n)));if("error"in r)throw new Error(r.error.message);if("string"==typeof r.result)return JSON.parse(r.result);throw new Error("Invalid response")})),D=e=>y(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ImportReadOnlyAccount,e),n=u.parse(yield p.browser.runtime.sendMessage(u.stringify(t)));if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return JSON.parse(n.result);throw new Error("Invalid response")})),R=(e,t)=>y(void 0,void 0,void 0,(function*(){const n=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ExportPrivateKey,[e,t]),r=u.parse(yield p.browser.runtime.sendMessage(u.stringify(n)));if("error"in r)throw new Error(r.error.message);if("string"==typeof r.result)return s.ObfuscatedBytes.from(v.from(r.result,"hex"));throw new Error("Invalid response")})),C=e=>y(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ExportEntropy,[e]),n=u.parse(yield p.browser.runtime.sendMessage(u.stringify(t)));if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return s.ObfuscatedBytes.from(v.from(n.result,"hex"));throw new Error("Invalid response")})),N=()=>y(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.DeriveAddresses),t=yield c.sendMessage(p.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),L=()=>y(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.GetAllAccounts),t=u.parse(yield p.browser.runtime.sendMessage(u.stringify(e)));if("error"in t)throw new Error(t.error.message);if("string"==typeof t.result){const e=JSON.parse(t.result);return(0,o.deserializeUint8Arrays)({accounts:e}).accounts}throw new Error("Invalid response")})),k=()=>y(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.GetAllSeeds),t=u.parse(yield p.browser.runtime.sendMessage(u.stringify(e)));if("error"in t)throw new Error(t.error.message);if("string"==typeof t.result)return JSON.parse(t.result);throw new Error("Invalid response")})),M=(e,n)=>y(void 0,void 0,void 0,(function*(){const r=o.VaultSignerParams.parse(n);r.chainType===a.AddressType.Solana&&"transaction"===r.signingType&&"string"!=typeof r.message&&(r.message=t(l).encode(r.message));const i=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.Sign,{accountIdentifier:e,params:r}),s=u.parse(yield p.browser.runtime.sendMessage(u.stringify(i)));if("error"in s)throw new Error(s.error.message);if("string"==typeof s.result)return JSON.parse(s.result);throw new Error("Invalid response")})),_=()=>y(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.HasOnboarded),t=yield c.sendMessage(p.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),B=()=>y(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ResetHasOnboarded),t=yield c.sendMessage(p.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),U=()=>({addAccountForSeed:O,addReadonlyAccount:D,importPrivateKeyAccount:A,connectLedgerAccounts:P,fetchAllAccounts:L,fetchAllSeedMetas:k,connectSolanaSeedVaultAccounts:()=>{throw new Error("Solana Seed Vault is not supported on browser extension.")},deriveAddresses:N,removeAccount:e=>y(void 0,void 0,void 0,(function*(){const t=yield(e=>y(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.RemoveAccount,e),n=yield c.sendMessage(p.browser.runtime,t);if("error"in n)throw new Error(n.error.message);return n.result})))(e);if(!t)throw new Error("Error while removing account")})),reorderAccount:(e,t)=>y(void 0,void 0,void 0,(function*(){const n=yield((e,t)=>y(void 0,void 0,void 0,(function*(){const n=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ReorderAccount,{identifier:e,toIndex:t}),r=yield c.sendMessage(p.browser.runtime,n);if("error"in r)throw new Error(r.error.message);return r.result})))(e,t);if(!n)throw new Error("Error while reordering account")})),sign:M}),F=()=>y(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.GetLegacyMnemonic),n=u.parse(yield p.browser.runtime.sendMessage(u.stringify(e)));if("error"in n)throw new Error(n.error.message);if(!n.result)return null;const[r,o]=n.result;switch(r){case 0:{const e=new Uint8Array(t(l).decode(o).buffer),n=(yield(0,h.getBip39)()).fromEntropy(e);return e.fill(0),{type:"bip39",value:n}}case 1:return{type:"deprecated",value:new Uint8Array(t(l).decode(o).buffer)}}}))})),i.register("c9gT2",(function(t,n){e(t.exports,"parse",(function(){return i("9h19n").parse})),e(t.exports,"stringify",(function(){return i("9h19n").stringify})),e(t.exports,"sendMessage",(function(){return i("hvrUa").sendMessage}));i("9h19n"),i("hvrUa")})),i.register("9h19n",(function(t,n){e(t.exports,"stringify",(function(){return a})),e(t.exports,"parse",(function(){return c}));var r=i("f6Qba");const o=function(e){const t=this[e];for(const e of Object.values(r.ALL_SERIALIZERS))if(e.canSerialize(t))return e.serialize(t);return t},s=(e,t)=>{if(t&&"object"==typeof t&&Object.keys(t)[0]){const e=Object.keys(t)[0].slice(1);if(e in r.ALL_SERIALIZERS)return r.ALL_SERIALIZERS[e].deserialize(t)}return t},a=e=>JSON.stringify(e,o),c=e=>JSON.parse(e,s)})),i.register("f6Qba",(function(t,n){e(t.exports,"ALL_SERIALIZERS",(function(){return d}));var r=i("leY4F");const o={canSerialize:e=>"number"==typeof e&&Number.isNaN(e),serialize:e=>({["$"+r.SUPPORTED_TYPES.NAN]:1}),deserialize:e=>NaN},s={canSerialize:e=>e instanceof Date,serialize:e=>({[`$${r.SUPPORTED_TYPES.DATE}`]:e.valueOf()}),deserialize:e=>new Date(e[`$${r.SUPPORTED_TYPES.DATE}`])},a={canSerialize:e=>e instanceof Uint8Array,serialize:e=>({[`$${r.SUPPORTED_TYPES.UINT8ARRAY}`]:Array.from(e)}),deserialize:e=>Uint8Array.from(e[`$${r.SUPPORTED_TYPES.UINT8ARRAY}`])},c={canSerialize:e=>"bigint"==typeof e,serialize:e=>({[`$${r.SUPPORTED_TYPES.BIGINT}`]:e.toString()}),deserialize:e=>BigInt(e[`$${r.SUPPORTED_TYPES.BIGINT}`])},u={canSerialize:e=>e instanceof URL,serialize:e=>({[`$${r.SUPPORTED_TYPES.URL}`]:e.href}),deserialize:e=>new URL(e[`$${r.SUPPORTED_TYPES.URL}`])},d={[r.SUPPORTED_TYPES.NAN]:o,[r.SUPPORTED_TYPES.DATE]:s,[r.SUPPORTED_TYPES.UINT8ARRAY]:a,[r.SUPPORTED_TYPES.BIGINT]:c,[r.SUPPORTED_TYPES.URL]:u}})),i.register("leY4F",(function(t,n){var r,o;e(t.exports,"SUPPORTED_TYPES",(function(){return r})),(o=r||(r={})).NAN="NAN",o.DATE="DATE",o.UINT8ARRAY="UINT8ARRAY",o.BIGINT="BIGINT",o.URL="URL"})),i.register("hvrUa",(function(t,n){e(t.exports,"sendMessage",(function(){return s}),(function(e){return s=e}));var r=i("9h19n"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const s=(e,t)=>o(void 0,void 0,void 0,(function*(){return(0,r.parse)(yield e.sendMessage((0,r.stringify)(t)))}))})),i.register("2GHjd",(function(t,n){var r,o,i,s;e(t.exports,"WalletToBackgroundRequestMethods",(function(){return r})),e(t.exports,"createJsonRpcRequest",(function(){return a})),(o=r||(r={})).LockExtension="lockExtension",o.UnlockExtension="unlockExtension",o.IsExtensionUnlocked="IsExtensionUnlocked",o.SetPassword="setPassword",o.VerifyPassword="verifyPassword",o.UpdatePassword="updatePassword",o.ImportPrivateKeyAccount="importPrivateKeyAccount",o.ImportReadOnlyAccount="importReadOnlyAccount",o.ImportSeedAccount="importSeedAccount",o.IsExistingSeed="isExistingSeed",o.AddAccountForSeed="addAccountForSeed",o.AddLedgerAccounts="addLedgerAccounts",o.DeriveAddresses="deriveAddresses",o.ExportPrivateKey="exportPrivateKey",o.ExportEntropy="exportEntropy",o.SetAccountIcon="setAccountIcon",o.RemoveAccount="removeAccount",o.ReorderAccount="reorderAccount",o.GetAllAccounts="getAllAccounts",o.GetAllSeeds="getAllSeeds",o.Sign="sign",o.HasOnboarded="hasOnboarded",o.ResetHasOnboarded="resetHasOnboarded",o.ProviderInjectionOptions="providerInjectionOptions",o.HasMnemonic="hasMnemonic",o.GetLegacyMnemonic="getLegacyMnemonic",o.SetMnemonic="setMnemonic",o.GetSeed="getSeed",(s=i||(i={}))[s.UserRejectedRequest=4001]="UserRejectedRequest",s[s.Unauthorized=4100]="Unauthorized",s[s.Disconnected=4900]="Disconnected",s[s.InternalError=-32603]="InternalError",s[s.InvalidInput=-32e3]="InvalidInput",s[s.MethodNotFound=-32601]="MethodNotFound",s[s.TransactionRejected=-32003]="TransactionRejected",s[s.ResourceUnavailable=-32002]="ResourceUnavailable";i.UserRejectedRequest,i.InternalError,i.MethodNotFound,i.InvalidInput,i.Unauthorized,i.Disconnected,i.TransactionRejected,i.ResourceUnavailable;const a=(e,t,n=Date.now())=>({jsonrpc:"2.0",id:n,method:e,params:t})})),i.register("9F7Hg",(function(t,n){e(t.exports,"getBip39",(function(){return s}),(function(e){return s=e})),i("dvKEl");var r=i("2EjNO");i("8WRrL");var o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const s=(()=>{let e=null;return()=>o(void 0,void 0,void 0,(function*(){e||(e=yield r.Bip39Factory.webCrypto("english"));return e}))})()})),i.register("dvKEl",(function(t,n){e(t.exports,"Bip39Factory",(function(){return i("2EjNO").Bip39Factory}));i("88Yw1"),i("2EjNO")})),i.register("88Yw1",(function(t,n){e(t.exports,"ERR_UNKNOWN",(function(){return o}),(function(e){return o=e})),e(t.exports,"ERR_INVALID_CHECKSUM",(function(){return a}),(function(e){return a=e})),e(t.exports,"assertEntropyLengthIsValid",(function(){return f}),(function(e){return f=e})),e(t.exports,"assertWordlistIsValid",(function(){return h}),(function(e){return h=e})),e(t.exports,"generateEntropy",(function(){return g}),(function(e){return g=e})),e(t.exports,"deriveBits",(function(){return v}),(function(e){return v=e})),e(t.exports,"mapBitsToIndexes",(function(){return y}),(function(e){return y=e})),e(t.exports,"indexesToEntropy",(function(){return m}),(function(e){return m=e})),e(t.exports,"entropyToIndexes",(function(){return T}),(function(e){return T=e})),e(t.exports,"mnemonicToIndexes",(function(){return w}),(function(e){return w=e})),e(t.exports,"entropyToMnemonic",(function(){return E}),(function(e){return E=e})),e(t.exports,"entropyToSeed",(function(){return S}),(function(e){return S=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const o=new Error("Unknown error"),i=new Error("Invalid entropy length"),s=new Error("Invalid mn*monic sentence length"),a=new Error("Invalid checksum"),c=new RangeError("Invalid mn*monic word"),u=new RangeError("Invalid wordlist"),d=new RangeError("Invalid wordlist index"),l=(e,t)=>{if(!e)throw t};function f(e){l(e>=128,i),l(e<=256,i),l(e%32==0,i)}function p(e){l(e>=12,s),l(e<=24,s),l(e%3==0,s)}function h(e){l(2048===e.length,u),l(e.every((e=>"string"==typeof e)),u)}function g(e,t){return p(e),t(4*e/3)}function v(e,t){return r(this,void 0,void 0,(function*(){const n=8*e.length;f(n);const r=n/32,o=yield t(e),[i]=o,s=8-r,a=i>>>s<<s>>>0,c=new Uint8Array(e.length+1);return c.set(e,0),c[c.length-1]=a,c}))}function y(e){const t=8*(e.length-1);f(t);const n=(t+t/32)/11,r=new ArrayBuffer(4*n),o=new DataView(r);let i=0,a=0,c=0;for(const t of e)if(c+=8,a|=t<<32-c,a>>>=0,c>=11){const e=a>>>21;l(e>=0&&e<=2047,d),o.setUint32(4*i,e,!0),i++,a<<=11,a>>>=0,c-=11}return l(i===n,s),new Uint32Array(r)}function m(e){p(e.length);const t=function(e){p(e.length);const t=11*e.length,n=new ArrayBuffer(Math.ceil(t/8)),r=new DataView(n),o=new DataView(e.buffer),i=e.length;let s=0,a=0,c=0,u=8;for(let e=0;e<i;e++){const t=o.getUint32(4*e,!0);l(t<2048,d);let n=11;for(;n>0;){const e=n>=u?u:n;s|=t>>32-(32-n)-e&(1<<e)-1,a+=e,s<<=u-e,s>>>=0,n-=e,u-=e,u<=0&&(u=8),a%8==0&&(r.setUint8(c,s),c++,s=0)}}return i%8!=0&&r.setUint8(c,s),new Uint8Array(n)}(e),n=t.slice(0,t.length-1);return t.fill(0),n}function T(e,t){return r(this,void 0,void 0,(function*(){f(8*e.length);const n=yield v(e,t),r=y(n);return n.fill(0),r}))}function w(e,t){h(t);const n=new Set(t),r=new Uint32Array(24);let o=0,i="";for(let s=0;s<e.length;s++){const a=e[s],u=32===a,d=s===e.length-1;if(d&&(i+=String.fromCharCode(a)),u||d){l(n.has(i),c);let e=0;for(const n of t){if(i===n)break;e++}r[o++]=e,i=""}else i+=String.fromCharCode(a)}p(o);const s=r.slice(0,o);return r.fill(0),s}function E(e,t,n){return r(this,void 0,void 0,(function*(){const r=yield T(e,n),o=new Uint8Array(r.reduce(((e,n)=>e+t[n].length+1),-1));let i=0;for(const e of r){i>0&&(o[i++]=32);const n=t[e];for(const e of n)o[i++]=e.charCodeAt(0)}return r.fill(0),o}))}const b=Uint8Array.of(109,110,101,109,111,110,105,99);function S(e,t,n,o,i){return r(this,void 0,void 0,(function*(){const r=yield E(e,n,o),s=new Uint8Array(b.length+t.length);s.set(b,0),s.set(t,b.length);const a=yield i(r,s,2048,64,"sha512");return s.fill(0),r.fill(0),a}))}})),i.register("2EjNO",(function(t,n){e(t.exports,"Bip39Factory",(function(){return p}),(function(e){return p=e}));var r=i("88Yw1"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},a=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};function c(e){return o(this,void 0,void 0,(function*(){if("english"===e)return(yield i("dCUvq")).default}))}function u(e){return t=>new e(t)}function d(e,t){return n=>o(this,void 0,void 0,(function*(){let o=null,i=null,s=null,a=null,c=null;try{i=(0,r.indexesToEntropy)(n),s=yield(0,r.deriveBits)(i,t),a=(0,r.mapBitsToIndexes)(s);const o=n[n.length-1];if(o!==a[a.length-1])throw r.ERR_INVALID_CHECKSUM;c=e.fromEntropy(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=r.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),null==s||s.fill(0),null==a||a.fill(0),o)throw o;return c}}))}function l(e,t){return n=>o(this,void 0,void 0,(function*(){let o=null,i=null,s=null;try{i=(0,r.mnemonicToIndexes)(n,t),s=yield e.fromIndexes(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=r.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),o)throw o;return s}}))}function f(e,t){return n=>{let o=null,i=null,s=null;try{i=(0,r.generateEntropy)(n,t),s=e.fromEntropy(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=r.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),o)throw o;return s}}}class p{static webCrypto(e){var t,n;return o(this,void 0,void 0,(function*(){const i="string"==typeof e?yield c(e):e;(0,r.assertWordlistIsValid)(i);const p=e=>o(this,void 0,void 0,(function*(){return new Uint8Array(yield crypto.subtle.digest("SHA-256",e))})),h=(e,t,n,r,i)=>o(this,void 0,void 0,(function*(){const o="SHA-"+i.substring(3),s=yield crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]),a=yield crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:o},s,8*r);return new Uint8Array(a)}));return n=class{constructor(e){t.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,r.entropyToSeed)(a(this,t,"f"),e,i,p,h),this.getEntropy=()=>a(this,t,"f").slice(),this.getIndexes=()=>(0,r.entropyToIndexes)(a(this,t,"f"),p),this.getMnemonic=()=>(0,r.entropyToMnemonic)(a(this,t,"f"),i,p),this.getSentenceLength=()=>{const e=8*a(this,t,"f").length;return(e+e/32)/11},(0,r.assertEntropyLengthIsValid)(8*e.length),s(this,t,e.slice(),"f")}},t=new WeakMap,n.fromEntropy=u(n),n.fromIndexes=d(n,p),n.fromMnemonic=l(n,i),n.fromSentenceLength=f(n,(e=>crypto.getRandomValues(new Uint8Array(e)))),n.wordlist=i,n}))}static nodeCrypto(e){var t,n;return o(this,void 0,void 0,(function*(){const o="string"==typeof e?yield c(e):e;(0,r.assertWordlistIsValid)(o);const{randomBytes:p,createHash:h,pbkdf2:g}=yield i("f5plE"),v=e=>new Uint8Array(h("sha256").update(e).digest().buffer),y=(...e)=>new Promise(((t,n)=>{g(...e,((e,r)=>{if(e)return n(e);t(new Uint8Array(r.buffer))}))}));return n=class{constructor(e){t.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,r.entropyToSeed)(a(this,t,"f"),e,o,v,y),this.getEntropy=()=>a(this,t,"f").slice(),this.getIndexes=()=>(0,r.entropyToIndexes)(a(this,t,"f"),v),this.getMnemonic=()=>(0,r.entropyToMnemonic)(a(this,t,"f"),o,v),this.getSentenceLength=()=>{const e=8*a(this,t,"f").length;return(e+e/32)/11},(0,r.assertEntropyLengthIsValid)(8*e.length),s(this,t,e.slice(),"f")}},t=new WeakMap,n.fromEntropy=u(n),n.fromIndexes=d(n,v),n.fromMnemonic=l(n,o),n.fromSentenceLength=f(n,(e=>new Uint8Array(p(e).buffer))),n.wordlist=o,n}))}static customCrypto(e,t){var n,i;return o(this,void 0,void 0,(function*(){const o="string"==typeof e?yield c(e):e;(0,r.assertWordlistIsValid)(o);const{random:p,sha256:h,pbkdf2:g}=t;return i=class{constructor(e){n.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,r.entropyToSeed)(a(this,n,"f"),e,o,h,g),this.getEntropy=()=>a(this,n,"f").slice(),this.getIndexes=()=>(0,r.entropyToIndexes)(a(this,n,"f"),h),this.getMnemonic=()=>(0,r.entropyToMnemonic)(a(this,n,"f"),o,h),this.getSentenceLength=()=>{const e=8*a(this,n,"f").length;return(e+e/32)/11},(0,r.assertEntropyLengthIsValid)(8*e.length),s(this,n,e.slice(),"f")}},n=new WeakMap,i.fromEntropy=u(i),i.fromIndexes=d(i,h),i.fromMnemonic=l(i,o),i.fromSentenceLength=f(i,p),i.wordlist=o,i}))}}})),i.register("dCUvq",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("8ydDW")).then((()=>i("ggpRk")))})),i.register("f5plE",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("esIsT")).then((()=>i("c5KV4")))})),i.register("9hiP6",(function(t,n){e(t.exports,"getLedgerWebHIDDependencies",(function(){return c}),(function(e){return c=e}));var r=i("8Hh7g"),o=i("ibYAx"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=()=>s(void 0,void 0,void 0,(function*(){const{default:e}=yield i("6YF93");return e})),c=()=>({defaultTransportTimeout:2e3,isSupported:()=>s(void 0,void 0,void 0,(function*(){if(o.BROWSER_ENV.browser.name===r.BROWSER_MAP.firefox||o.BROWSER_ENV.browser.name===r.BROWSER_MAP.safari)return!1;return(yield a()).isSupported()})),getNumDevices:()=>s(void 0,void 0,void 0,(function*(){const e=yield a();return(yield e.list()).length})),getFirstOpenedTransport:()=>s(void 0,void 0,void 0,(function*(){const e=yield a(),t=(yield e.list()).find((e=>e.opened));return t?new e(t):void 0})),create:()=>s(void 0,void 0,void 0,(function*(){return(yield a()).create()})),openConnected:()=>s(void 0,void 0,void 0,(function*(){const e=yield a();return yield e.openConnected()})),request:()=>s(void 0,void 0,void 0,(function*(){const e=yield a();return yield e.request()})),on:(e,t)=>{"hid"in window.navigator&&window.navigator.hid.addEventListener(e,(()=>{t()}))}})})),i.register("6YF93",(function(e,t){e.exports=Promise.all([import("./"+i("5V6iE").resolve("2UKlV")),import("./"+i("5V6iE").resolve("hgCva")),import("./"+i("5V6iE").resolve("h3t8x"))]).then((()=>i("2Vsq5")))})),i.register("kO1EB",(function(t,n){e(t.exports,"hexToRGB",(function(){return r}));const r=(e,t)=>{const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return"number"==typeof t?"rgba("+n+", "+r+", "+o+", "+t+")":"rgb("+n+", "+r+", "+o+")"}})),i.register("miiws",(function(t,n){e(t.exports,"Circle",(function(){return o}));var r=i("kO1EB");const o=i("cZIbv").default.div`
  height: ${e=>e.diameter}px;
  width: ${e=>e.diameter}px;
  margin: ${e=>e.margin};
  background-color: ${e=>e.alpha&&e.color?(0,r.hexToRGB)(e.color,e.alpha):e.color};
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  opacity: ${e=>e.opacity};
  overflow: hidden;
  ${e=>e.includeDarkBoxShadow?"box-shadow: inset 0px 0px 4px rgba(0, 0, 0, 0.25);":""}
`;o.defaultProps={color:"#333333",diameter:24,opacity:1}})),i.register("2KczM",(function(t,n){e(t.exports,"useIsomorphicLayoutEffect",(function(){return o}));var r=i("lDSNw"),o=(0,i("8UVR7").canUseDOM)()?r.useLayoutEffect:r.useEffect})),i.register("8UVR7",(function(t,n){function r(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}e(t.exports,"canUseDOM",(function(){return r}))})),i.register("3Uon5",(function(t,n){function r(e){}function o(e,t,n){}e(t.exports,"useCheckStyles",(function(){return r})),e(t.exports,"useControlledSwitchWarning",(function(){return o})),i("lDSNw")})),i.register("9PqFM",(function(t,n){e(t.exports,"useComposedRefs",(function(){return u}));var r=i("lDSNw"),o=i("l4vvo");function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function c(e,t){if(null!=e)if((0,o.isFunction)(e))e(t);else try{e.current=t}catch(n){throw new Error('Cannot assign value "'+t+'" to ref "'+e+'"')}}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useCallback)((function(e){for(var n,r=a(t);!(n=r()).done;){c(n.value,e)}}),t)}})),i.register("l4vvo",(function(t,n){function r(e){return"boolean"==typeof e}function o(e){return!(!e||"[object Function]"!={}.toString.call(e))}function i(e){return"string"==typeof e}e(t.exports,"isBoolean",(function(){return r})),e(t.exports,"isFunction",(function(){return o})),e(t.exports,"isString",(function(){return i}))})),i.register("a9mJX",(function(t,n){function r(e,t){return function(n){if(e&&e(n),!n.defaultPrevented)return t(n)}}e(t.exports,"composeEventHandlers",(function(){return r}))})),i.register("90BMT",(function(t,n){function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(e){return!!e&&!!e[V]}function i(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===q}(e)||Array.isArray(e)||!!e[W]||!!e.constructor[W]||f(e)||p(e))}function s(e,t,n){void 0===n&&(n=!1),0===a(e)?(n?Object.keys:z)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function a(e){var t=e[V];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:f(e)?2:p(e)?3:0}function c(e,t){return 2===a(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){return 2===a(e)?e.get(t):e[t]}function d(e,t,n){var r=a(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function l(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){return F&&e instanceof Map}function p(e){return j&&e instanceof Set}function h(e){return e.o||e.t}function g(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=H(e);delete t[V];for(var n=z(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function v(e,t){return void 0===t&&(t=!1),m(e)||o(e)||!i(e)||(a(e)>1&&(e.set=e.add=e.clear=e.delete=y),Object.freeze(e),t&&s(e,(function(e,t){return v(t,!0)}),!0)),e}function y(){r(2)}function m(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function T(e){var t=$[e];return t||r(18,e),t}function w(){return B}function E(e,t){t&&(T("Patches"),e.u=[],e.s=[],e.v=t)}function b(e){S(e),e.p.forEach(x),e.p=null}function S(e){e===B&&(B=e.l)}function A(e){return B={p:[],l:B,h:e,m:!0,_:0}}function x(e){var t=e[V];0===t.i||1===t.i?t.j():t.O=!0}function I(e,t){t._=t.p.length;var n=t.p[0],o=void 0!==e&&e!==n;return t.h.g||T("ES5").S(t,e,o),o?(n[V].P&&(b(t),r(4)),i(e)&&(e=O(t,e),t.l||D(t,e)),t.u&&T("Patches").M(n[V].t,e,t.u,t.s)):e=O(t,n,[]),b(t),t.u&&t.v(t.u,t.s),e!==K?e:void 0}function O(e,t,n){if(m(t))return t;var r=t[V];if(!r)return s(t,(function(o,i){return P(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return D(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=g(r.k):r.o;s(3===r.i?new Set(o):o,(function(t,i){return P(e,r,o,t,i,n)})),D(e,o,!1),n&&e.u&&T("Patches").R(r,n,e.u,e.s)}return r.o}function P(e,t,n,r,s,a){if(o(s)){var u=O(e,s,a&&t&&3!==t.i&&!c(t.D,r)?a.concat(r):void 0);if(d(n,r,u),!o(u))return;e.m=!1}if(i(s)&&!m(s)){if(!e.h.F&&e._<1)return;O(e,s),t&&t.A.l||D(e,s)}}function D(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&v(t,n)}function R(e,t){var n=e[V];return(n?h(n):e)[t]}function C(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function N(e){e.P||(e.P=!0,e.l&&N(e.l))}function L(e){e.o||(e.o=g(e.t))}function k(e,t,n){var r=f(t)?T("MapSet").N(t,n):p(t)?T("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:w(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=Y;n&&(o=[r],i=J);var s=Proxy.revocable(o,i),a=s.revoke,c=s.proxy;return r.k=c,r.j=a,c}(t,n):T("ES5").J(t,n);return(n?n.A:w()).p.push(r),r}function M(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return g(e)}e(t.exports,"default",(function(){return ee}));var _,B,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),F="undefined"!=typeof Map,j="undefined"!=typeof Set,G="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,K=U?Symbol.for("immer-nothing"):((_={})["immer-nothing"]=!0,_),W=U?Symbol.for("immer-draftable"):"__$immer_draftable",V=U?Symbol.for("immer-state"):"__$immer_state",q=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),z="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,H=Object.getOwnPropertyDescriptors||function(e){var t={};return z(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},$={},Y={get:function(e,t){if(t===V)return e;var n=h(e);if(!c(n,t))return function(e,t,n){var r,o=C(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!i(r)?r:r===R(e.t,t)?(L(e),e.o[t]=k(e.A.h,r,e)):r},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,n){var r=C(h(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=R(h(e),t),i=null==o?void 0:o[V];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(l(n,o)&&(void 0!==n||c(e.t,t)))return!0;L(e),N(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==R(e.t,t)||t in e.t?(e.D[t]=!1,L(e),N(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=h(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},J={};s(Y,(function(e,t){J[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),J.deleteProperty=function(e,t){return J.set.call(this,e,t,void 0)},J.set=function(e,t,n){return Y.set.call(this,e[0],t,n,e[0])};var X=function(){function e(e){var t=this;this.g=G,this.F=!0,this.produce=function(e,n,o){if("function"==typeof e&&"function"!=typeof n){var s=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=s);for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var c;if("function"!=typeof n&&r(6),void 0!==o&&"function"!=typeof o&&r(7),i(e)){var u=A(t),d=k(t,e,void 0),l=!0;try{c=n(d),l=!1}finally{l?b(u):S(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(e){return E(u,o),I(e,u)}),(function(e){throw b(u),e})):(E(u,o),I(c,u))}if(!e||"object"!=typeof e){if(void 0===(c=n(e))&&(c=e),c===K&&(c=void 0),t.F&&v(c,!0),o){var f=[],p=[];T("Patches").M(e,c,f,p),o(f,p)}return c}r(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))};var r,o,i=t.produce(e,n,(function(e,t){r=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,o]})):[i,r,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||r(8),o(e)&&(e=function(e){return o(e)||r(22,e),function e(t){if(!i(t))return t;var n,r=t[V],o=a(t);if(r){if(!r.P&&(r.i<4||!T("ES5").K(r)))return r.t;r.I=!0,n=M(t,o),r.I=!1}else n=M(t,o);return s(n,(function(t,o){r&&u(r.t,t)===o||d(n,t,e(o))})),3===o?new Set(n):n}(e)}(e));var t=A(this),n=k(this,e,void 0);return n[V].C=!0,S(t),n},t.finishDraft=function(e,t){var n=(e&&e[V]).A;return E(n,t),I(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!G&&r(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=T("Patches").$;return o(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Q=new X,Z=Q.produce,ee=(Q.produceWithPatches.bind(Q),Q.setAutoFreeze.bind(Q),Q.setUseProxies.bind(Q),Q.applyPatches.bind(Q),Q.createDraft.bind(Q),Q.finishDraft.bind(Q),Z)})),i.register("LqQFk",(function(t,n){e(t.exports,"default",(function(){return a}));var r=i("lDSNw"),o=i("lPSQ1"),s=function(e,t){return e===t};function a(e,t){void 0===t&&(t=s);var n=(0,r.useRef)(),i=(0,r.useRef)(e);return(0,o.useFirstMountState)()||t(i.current,e)||(n.current=i.current,i.current=e),n.current}})),i.register("lPSQ1",(function(t,n){e(t.exports,"useFirstMountState",(function(){return o}));var r=i("lDSNw");function o(){var e=(0,r.useRef)(!0);return e.current?(e.current=!1,!0):e.current}})),i.register("g1ck2",(function(t,n){e(t.exports,"createNamedContext",(function(){return o}));var r=i("lDSNw");function o(e,t){return(0,r.createContext)(t)}})),i.register("6l2nq",(function(t,n){e(t.exports,"Row",(function(){return r}));const r=i("cZIbv").default.div`
  display: flex;
  flex-direction: row;
  width: ${e=>e.width};
  margin: ${e=>e.margin};
  padding: ${e=>e.padding};
  align-items: ${e=>e.align};
  justify-content: ${e=>e.justify};
`;r.defaultProps={width:"100%",align:"center",justify:"flex-start"}})),i.register("e4sKe",(function(n,r){e(n.exports,"TokenNameBadge",(function(){return u})),e(n.exports,"AddressTypeBadge",(function(){return d}));var o=i("gYh0e"),s=i("lDSNw"),a=i("gMNJN"),c=i("csTfi");const u=({children:e,networkID:n,walletAddress:r})=>t(s).createElement(c.TitleBadgeWrapper,null,e,r?t(s).createElement(d,{networkID:n,address:r}):null),d=({networkID:e,address:n})=>{const r=a.hooks.useEnabledAddressTypes();if(!(0,o.showAddressTypeBadge)(r,e))return null;const i=(0,o.getAddressBadge)(e,n);return i?t(s).createElement(c.TitleBadge,{text:i}):null}})),i.register("csTfi",(function(n,r){e(n.exports,"TitleBadge",(function(){return u})),e(n.exports,"TitleBadgeContainer",(function(){return l})),e(n.exports,"TitleBadgeWrapper",(function(){return d}));var o=i("lDSNw"),s=i("kO1EB"),a=i("cZIbv"),c=i("kn91D");const u=({text:e})=>t(o).createElement(l,null,t(o).createElement(f,null,e)),d=a.default.div`
  display: flex;
  align-items: center;
`,l=a.default.div`
  background: ${(0,s.hexToRGB)("#FFFFFF",.1)};
  border-radius: 3px;
  padding: 0px 4px;
  color: white;
  display: inline-block;
  margin-left: 5px;
`,f=(0,a.default)(c.StyledText).attrs({size:12,lineHeight:17,weight:600,noWrap:!0})``})),i.register("houiY",(function(e,t){e.exports=i("jAiiq")()})),i.register("jAiiq",(function(e,t){var n=i("kXOqC");function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,r,o,i,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}})),i.register("kXOqC",(function(e,t){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"})),i.register("KqC1b",(function(t,n){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r,o;e(t.exports,"assign",(function(){return a})),e(t.exports,"createMachine",(function(){return f})),e(t.exports,"interpret",(function(){return h})),(o=r||(r={}))[o.NotStarted=0]="NotStarted",o[o.Running=1]="Running",o[o.Stopped=2]="Stopped";var i={type:"xstate.init"};function s(e){return void 0===e?[]:[].concat(e)}function a(e){return{type:"xstate.assign",assignment:e}}function c(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function u(e){return function(t){return e===t}}function d(e){return"string"==typeof e?{type:e}:e}function l(e,t){return{value:e,context:t,actions:[],changed:!1,matches:u(e)}}function f(e,t){void 0===t&&(t={});var n={config:e,_options:t,initialState:{value:e.initial,actions:s(e.states[e.initial].entry).map((function(e){return c(e,t.actions)})),context:e.context,matches:u(e.initial)},transition:function(t,r){var o,i,a="string"==typeof t?{value:t,context:e.context}:t,f=a.value,p=a.context,h=d(r),g=e.states[f];if(g.on){var v=s(g.on[h.type]),y=function(t){if(void 0===t)return{value:l(f,p)};var r="string"==typeof t?{target:t}:t,o=r.target,i=void 0===o?f:o,s=r.actions,a=void 0===s?[]:s,d=r.cond,v=p;if((void 0===d?function(){return!0}:d)(p,h)){var y=e.states[i],m=!1,T=[].concat(g.exit,a,y.entry).filter((function(e){return e})).map((function(e){return c(e,n._options.actions)})).filter((function(e){if("xstate.assign"===e.type){m=!0;var t=Object.assign({},v);return"function"==typeof e.assignment?t=e.assignment(v,h):Object.keys(e.assignment).forEach((function(n){t[n]="function"==typeof e.assignment[n]?e.assignment[n](v,h):e.assignment[n]})),v=t,!1}return!0}));return{value:{value:i,context:v,actions:T,changed:i!==f||T.length>0||m,matches:u(i)}}}};try{for(var m=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(v),T=m.next();!T.done;T=m.next()){var w=y(T.value);if("object"==typeof w)return w.value}}catch(e){o={error:e}}finally{try{T&&!T.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}}return l(f,p)}};return n}var p=function(e,t){return e.actions.forEach((function(n){var r=n.exec;return r&&r(e.context,t)}))};function h(e){var t=e.initialState,n=r.NotStarted,o=new Set,s={_machine:e,send:function(i){n===r.Running&&(t=e.transition(t,i),p(t,d(i)),o.forEach((function(e){return e(t)})))},subscribe:function(e){return o.add(e),e(t),{unsubscribe:function(){return o.delete(e)}}},start:function(){return n=r.Running,p(t,i),s},stop:function(){return n=r.Stopped,o.clear(),s},get state(){return t},get status(){return n}};return s}})),i.register("3C4EA",(function(t,n){e(t.exports,"useMachine",(function(){return d})),e(t.exports,"useCreateMachine",(function(){return l}));var r=i("lDSNw"),o=i("KqC1b"),s=(o=i("KqC1b"),i("l4vvo")),a=i("8KJ9S");function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var u=function(e){var t;return e.subscribe((function(e){t=e})).unsubscribe(),t};function d(e,t,n){var i=(0,r.useRef)(e),d=(0,a.useConstant)((function(){return(0,o.interpret)(i.current).start()})),l=(0,r.useRef)(null),f=(0,r.useState)((function(){return u(d)})),p=f[0],h=f[1],g=(0,r.useCallback)((function(e){var n=(0,s.isString)(e)?{type:e}:e,r=function(e){return Object.entries(e).reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r.current,e}),{})}(t);d.send(c({},n,{lastEventType:l.current,refs:r})),l.current=n.type}),[n]);return(0,r.useEffect)((function(){return d.subscribe((function(e){e.changed&&h(e)})),function(){d.stop()}}),[d]),(0,r.useEffect)((function(){}),[n,p]),[(0,r.useMemo)((function(){return c({},p,{matches:function(e){return e===p.value}})}),[p.changed,p.context,p.value]),g,d]}function l(e,t){return(0,a.useConstant)((function(){return(0,o.createMachine)(e,t)}))}})),i.register("8KJ9S",(function(t,n){e(t.exports,"useConstant",(function(){return o}));var r=i("lDSNw");function o(e){var t=(0,r.useRef)();return t.current||(t.current={v:e()}),t.current.v}})),i.register("03QiC",(function(n,r){e(n.exports,"ChainLogo",(function(){return u}));var o=i("belzv"),s=i("4y59b"),a=i("lDSNw"),c=i("aanFI");const u=t(a).memo((({networkID:e,height:n,width:r,stroke:i,strokeWidth:u,spacing:d="medium"})=>{if(!e)return null;const l={height:n,width:r,stroke:i,strokeWidth:u};return o.Chains.isBitcoinNetworkID(e)?"medium"===d?t(a).createElement(c.IconChainBitcoin,Object.assign({},l)):t(a).createElement(c.IconChainBitcoinLarge,Object.assign({},l)):o.Chains.isSolanaNetworkID(e)?"medium"===d?t(a).createElement(c.IconChainSolana,Object.assign({},l)):t(a).createElement(c.IconChainSolanaLarge,Object.assign({},l)):o.Chains.isEthereumNetworkID(e)?"medium"===d?t(a).createElement(c.IconChainEthereum,Object.assign({},l)):t(a).createElement(c.IconChainEthereumLarge,Object.assign({},l)):o.Chains.isPolygonNetworkID(e)?"medium"===d?t(a).createElement(c.IconChainPolygon,Object.assign({},l)):t(a).createElement(c.IconChainPolygonLarge,Object.assign({},l)):(0,s.assertNever)(e)}))})),i.register("7E6dj",(function(n,r){e(n.exports,"CheckboxGroup",(function(){return f}),(function(e){return f=e})),e(n.exports,"Checkbox",(function(){return p}),(function(e){return p=e}));var o=i("fkSoA"),s=i("lDSNw"),a=i("cZIbv"),c=i("aanFI"),u=i("6l2nq"),d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const l=22;const f=(0,a.default)(u.Row)`
  margin: ${e=>{var t;return null!==(t=e.margin)&&void 0!==t?t:0}};
  > * {
    margin-right: 10px;
  }

  label {
    color: #ab9ff2;
    cursor: pointer;

    &:hover {
      color: #e2dffe;
    }
  }
`,p=e=>{const{checked:n,onChange:r,color:i,checkColor:a}=e,u=d(e,["checked","onChange","color","checkColor"]),f=function(e,t="#AB9FF2"){return(0,s.useMemo)((()=>({background:"#282828",border:`1px solid ${e?t:"#4d4d4d"}`,borderRadius:"6px",height:`${l}px`,minHeight:`${l}px`,width:`${l}px`,minWidth:`${l}px`,cursor:"pointer",userSelect:"none",position:"relative",outlineColor:"transparent",outlineStyle:"none",boxShadow:"none"})),[e,t])}(n,i),p=function(e,t="#AB9FF2"){return(0,s.useMemo)((()=>({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",width:"100%",height:"100%",userSelect:"none",pointerEvents:"none",borderRadius:"4px",opacity:""+(e?1:0),zIndex:1,background:e?t:"transparent"})),[e,t])}(n,i);return t(s).createElement(o.CustomCheckboxContainer,{checked:n,onChange:r,style:f},t(s).createElement(o.CustomCheckboxInput,Object.assign({},u)),t(s).createElement("span",{"aria-hidden":!0,style:p},t(s).createElement(c.IconCheckmark,{width:"0.9em",fill:a||"#222"})))}})),i.register("fkSoA",(function(t,n){e(t.exports,"CustomCheckboxContainer",(function(){return L})),e(t.exports,"CustomCheckboxInput",(function(){return k}));var r=i("lDSNw"),o=i("g1ck2"),s=i("l4vvo"),a=i("3Uon5"),c=i("9PqFM"),u=i("a9mJX"),d=i("2KczM"),l=i("KqC1b"),f=i("3C4EA");function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var g,v,y,m,T,w=!1;function E(e){return!(!e||e.isControlled||e.disabled)}function b(e){return function(t,n){return t&&t.isControlled&&n.state===e}}(y=v||(v={})).Checked="checked",y.Mixed="mixed",y.Unchecked="unchecked",(T=m||(m={})).GetDerivedData="GET_DERIVED_DATA",T.Mount="MOUNT",T.Set="SET",T.Toggle="TOGGLE",T.Unmount="UNMOUNT";var S=(0,l.assign)((function(e,t){return p({},e,{refs:t.refs})})),A=((g={})[m.Mount]={actions:S},g[m.GetDerivedData]={actions:[S,(0,l.assign)((function(e,t){return p({},e,t.data)}))]},g[m.Set]=[{target:v.Checked,cond:b(v.Checked)},{target:v.Unchecked,cond:b(v.Unchecked)},{target:v.Mixed,cond:b(v.Mixed)}],g),x=function(e,t){var n,r,o,i;return{id:"mixed-checkbox",initial:e,context:{disabled:t.disabled,isControlled:t.isControlled,refs:{input:null}},states:(i={},i[v.Unchecked]={entry:S,on:p((n={},n[m.Toggle]={target:v.Checked,cond:E},n),A)},i[v.Checked]={entry:S,on:p((r={},r[m.Toggle]={target:v.Unchecked,cond:E},r),A)},i[v.Mixed]={entry:S,on:p((o={},o[m.Toggle]={target:v.Checked,cond:E},o),A)},i)}};function I(e,t,n){void 0===n&&(n="useMixedCheckbox");var o,i=t||{},s=i.checked,a=i.defaultChecked,c=i.disabled,l=i.onChange,p=i.onClick,h=null!=s,g=(0,f.useCreateMachine)(x(O(h?s:a),{disabled:!!c,isControlled:h})),y=(0,f.useMachine)(g,{input:e},w),T=y[0],E=y[1],b={"aria-checked":P(T.value),checked:(o=T.value,o===v.Checked),disabled:!!c,onChange:(0,u.composeEventHandlers)(l,(function(){h||E(m.Toggle)})),onClick:(0,u.composeEventHandlers)(p,(function(){A()})),type:"checkbox"},S={checked:P(T.value)};function A(){e.current&&(e.current.indeterminate=T.value===v.Mixed)}return(0,r.useEffect)((function(){h&&E({type:m.Set,state:O(s)})}),[h,s,E]),(0,d.useIsomorphicLayoutEffect)(A),(0,r.useEffect)((function(){E({type:m.GetDerivedData,data:{disabled:c,isControlled:h}})}),[c,h,E]),[b,S]}function O(e){return!0===e?v.Checked:"mixed"===e?v.Mixed:v.Unchecked}function P(e){return e===v.Checked||e===v.Mixed&&"mixed"}function D(e,t,n){var o=null!=e,i=(0,r.useRef)(o).current;(0,r.useEffect)((function(){}),[n,t,o,i])}var R=["as","checked","children","defaultChecked","disabled","onClick","onChange","__componentName"],C=["as","onBlur","onFocus"],N=(0,o.createNamedContext)("CustomCheckboxContext",{});var L=(0,r.forwardRef)((function(e,t){var n=e.as,o=void 0===n?"span":n,i=e.checked,c=e.children,d=e.defaultChecked,l=e.disabled,f=e.onClick,g=e.onChange,v=e.__componentName,y=void 0===v?"CustomCheckboxContainer":v,m=h(e,R),T=(0,r.useRef)(null),w=I(T,{defaultChecked:d,checked:i,disabled:l,onChange:g},y),E=w[0],b=w[1],S=(0,r.useState)(!1),A=S[0],x=S[1];var P={defaultChecked:d,disabled:l,focused:A,inputProps:E,inputRef:T,setFocused:x};return D(i,"checked",y),(0,a.useCheckStyles)("checkbox"),(0,r.createElement)(N.Provider,{value:P},(0,r.createElement)(o,p({},m,{ref:t,"data-reach-custom-checkbox-container":"","data-focused":A?"":void 0,"data-state":O(b.checked),onClick:(0,u.composeEventHandlers)(f,(function(){window.requestAnimationFrame((function(){T.current&&T.current.focus()}))}))}),(0,s.isFunction)(c)?c({checked:E["aria-checked"],inputRef:T,focused:A}):c))})),k=(0,r.forwardRef)((function(e,t){var n=e.as,o=void 0===n?"input":n,i=e.onBlur,s=e.onFocus,a=h(e,C),d=(0,r.useContext)(N),l=d.focused,f=d.inputProps,g=d.inputRef,v=d.setFocused,y=(0,c.useComposedRefs)(t,g),m=(0,r.useRef)(!0);return(0,r.useEffect)((function(){return function(){m.current=!1}}),[]),(0,r.createElement)(o,p({},a,f,{ref:y,type:"checkbox","data-reach-custom-checkbox-input":"","data-focused":l?"":void 0,onBlur:(0,u.composeEventHandlers)(i,(function(){window.requestAnimationFrame((function(){m.current&&v(!1)}))})),onFocus:(0,u.composeEventHandlers)(s,(function(){window.requestAnimationFrame((function(){m.current&&v(!0)}))}))}))}))})),i("gzsA1");
//# sourceMappingURL=ConnectHardwareMultichainFlow.7c48dae2.js.map
define=__define;})(window.define);