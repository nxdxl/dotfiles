(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},i=n.parcelRequire1d24;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},n.parcelRequire1d24=i),i.register("6Yrae",(function(e,t){i("eOkdY").register(JSON.parse('{"i8FRQ":"ConnectHardwareMultichainFlow.317aa7cc.js","5Hh3e":"bip32.0415b1e7.js","bnDSu":"Solana.39b78c22.js","ddATe":"Solana.881f481d.js","ia8XW":"Eth.2d040527.js","4nmlj":"semver.339a6680.js","8ZV50":"english.dc8cdfce.js","bSKtD":"crypto-browserify.e188246b.js","99t1D":"TransportWebHID.10460d8f.js","9Dpy0":"popup.5cbd182e.css"}'))})),i.register("eOkdY",(function(t,n){var r,o;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("gX5Te",(function(t,n){e(t.exports,"transactionsSdk",(function(){return F})),e(t.exports,"fungiblesSdk",(function(){return q})),e(t.exports,"hooks",(function(){return G}));var r=i("4xbAj");i("OZskz");var o=i("c8vyP"),s=i("iOvk1"),a=i("21aqi"),c=i("hM5LD"),u=i("bBa7X"),d=i("5slFC");i("eJxop");var l=i("3r36j"),p=i("ibwoK");i("g9PKp");var f=i("89Vzt"),h=i("56oyT"),g=i("hnZYD"),v=i("5uSEV"),y=i("egHtJ"),m=i("HlEsU"),T=i("kram9"),w=i("7gANb"),b=i("3FEtE");i("iMnOw");var E=i("cxnZW"),A=i("2jR04"),S=i("16XMG"),x=i("m2d5Y"),I=i("c8OXT"),O=i("41yT6"),P=i("cqeOY"),C=i("goVRJ"),R=i("JepPo"),D=i("twk6W"),k=i("93ApY"),L=i("gcdBN"),N=i("dbmto");const M=new(0,C.LegacyIndexedDBProxy),_=new(0,w.PriorityFeeService),B=(0,k.getVaultProxy)(),j=(0,w.createUtxoManager)(new(0,w.UtxoStore)(M)),U=new(0,a.CollectiblesSdk),F=new(0,w.TransactionsSdk),q=new(0,d.FungiblesSdk),G=function(e){const{analytics:t,chainAvailabilityDeps:n,fungiblesSdk:i,legacyStorage:O,priorityFeeService:C,queryClient:R,storage:k,vaultProxy:M}=e,_=(0,s.createChainHooks)(M,n,R,[r.invalidateAllAccounts,v.invalidateAddressBookEntries,p.invalidateActionBanners]),B=(0,r.createAccountHooks)(M,k,O,R,_,(e=>e.invalidateQueries(["browser-ext/MultichainMockAccountsContext"])),t,(0,P.getLegacyMnemonicFetcher)()),F=(0,o.createAutoConfirmHooks)(M,k,_,t,R),q=(0,x.createClusterHooks)(O),G=(0,h.createPriceHooks)({queryClient:R,getApiEnvironment:S.getAPIEnvironment}),K=(0,v.createSettingsHooks)(M,k,O,R,_,t,I.BROWSER_ENV.browser.name===A.BROWSER_MAP.firefox||v.DEFAULT_IS_ANALYTICS_OPTED_OUT),V=(0,w.createTransactionHooks)(B,M,R,k,t,G,S.getAPIEnvironment,j),W=(0,y.createStakingHooks)(V,R,S.getAPIEnvironment,D.asyncStakeAnalytics),H=(0,m.createStorageHooks)(O,k,R),z=(0,b.createWalletScreenHooks)(S.getAPIEnvironment,t),$=(0,d.createFungibleHooks)({analytics:t,sdk:i,storage:k,legacyStorage:O,getApiEnvironment:S.getAPIEnvironment,queryClient:R,settingsHooks:K,transactionHooks:V,accountSigner:M,accountHooks:B,priorityFeeService:C,utxoManager:j,vaultProxy:M,chainHooks:_,priceHooks:G,walletScreenHooks:z}),Y=(0,a.createCollectibleHooks)(M,k,S.getAPIEnvironment,R,C,B,t,V,$,j,U),Q=(0,T.createSwapperHooks)(M,k,S.getAPIEnvironment,R,t,D.asyncSwapAnalytics,G,$,B,K,V),X=(0,u.createFiatRampHooks)(S.getAPIEnvironment),J=(0,N.getLedgerWebHIDDependencies)(),Z=(0,l.createHardwareWireHooks)((0,N.getLedgerWebHIDDependencies)(),R),ee=(0,f.createOnboardingHooks)(k,R,t,J,O),te=(0,p.createInterstitialHooks)(k,R,B,I.ENABLE_DEV_SETTINGS||(0,L.isDebugBuild)(),p.Platform.BrowserExt,t),ne=(0,E.createShortcutHooks)(S.getAPIEnvironment,R),re=(0,g.createQuestHooks)(S.getAPIEnvironment,R,B,K),oe=(0,c.createExploreHooks)(k,S.getAPIEnvironment,B,t.getDeviceId(),(()=>(0,D.isFeatureEnabled)("enable-bitcoin-explore")));return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},B),F),_),q),Y),$),ee),G),K),W),H),Q),V),Z),X),te),z),ne),re),oe)}({analytics:D.analytics,chainAvailabilityDeps:{storage:M},fungiblesSdk:q,legacyStorage:new(0,R.LocalStorage),priorityFeeService:_,queryClient:O.queryClient,storage:M,utxoManager:j,vaultProxy:B})})),i.register("OZskz",(function(t,n){e(t.exports,"createAutoConfirmHooks",(function(){return i("c8vyP").createAutoConfirmHooks})),e(t.exports,"AbstractAutoConfirmService",(function(){return i("gSZiQ").AbstractAutoConfirmService})),e(t.exports,"AutoConfirmAnalytics",(function(){return i("guZvk").AutoConfirmAnalytics})),i("fLCrw");i("c8vyP"),i("gSZiQ"),i("guZvk")})),i.register("fLCrw",(function(t,n){e(t.exports,"createAutoConfirmHooks",(function(){return i("c8vyP").createAutoConfirmHooks}));i("gwqsO"),i("gvOZ5"),i("4b0uC"),i("lSVit"),i("c8vyP")})),i.register("gwqsO",(function(e,t){i("3ljHn"),i("29o0l"),i("lSVit")})),i.register("lSVit",(function(t,n){e(t.exports,"useFetchEnabledNetworkIdsForDomain",(function(){return u}),(function(e){return u=e}));var r=i("5ekp2"),o=i("16XMG"),s=i("Nt4tV"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=e=>[`auto-confirm:${e}--enabled`];function u(e){return(0,r.useQuery)({queryKey:c((0,s.removeWebPrefixes)(e)),refetchOnMount:"always",cacheTime:3e5,queryFn(){return a(this,void 0,void 0,(function*(){return yield function(e){return a(this,void 0,void 0,(function*(){const t=yield fetch(`${(0,o.getAPIEnvironment)()}/auto-confirm/v1/dapp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:e})}),n=yield t.json();return(null==n?void 0:n.supportedChainIds)&&Array.isArray(n.supportedChainIds)?n.supportedChainIds:[]}))}((0,s.removeWebPrefixes)(e))}))}})}})),i.register("gvOZ5",(function(n,r){e(n.exports,"useAutoConfirmSettingsStore",(function(){return a}));var o=i("gTwcH");const s={settings:void 0,origin:void 0,accountIdentifier:void 0},a=t(o)((e=>Object.assign(Object.assign({},s),{setSettingsForDomain:(t,n,r)=>e({accountIdentifier:t,origin:n,settings:r}),reset:()=>e(s)})))})),i.register("4b0uC",(function(n,r){e(n.exports,"useAutoConfirmSettingsProps",(function(){return h}),(function(e){return h=e}));var o=i("4xbAj"),s=i("3ljHn"),a=i("5uSEV"),c=i("4VuRl"),u=i("29o0l"),d=i("9w5Wb"),l=i("gvOZ5"),p=i("lSVit"),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const h=(e,n,r,i,h,g,{origin:v,autoSave:y=!1})=>{const{data:m}=(0,o.useSelectedMultiChainAccount)(e,n,r,!1,i),T=m?m.identifier:"",{get:{data:w},set:{mutateAsync:b}}=(0,a.useAutoConfirmSettings)(n,g,T,v),E=t(d)(w),A=(0,o.useSelectedNetworks)(e,n,r,i),{data:S=[],isLoading:x}=(0,p.useFetchEnabledNetworkIdsForDomain)(v),{data:[I,O]}=(0,s.useFeatureFlags)(["kill-automatic-approval","enable-automatic-approval-for-all-dapps"]),P=S.length>0,C=!I&&(O||P),{shadowSettings:R,setShadowSettings:D,reset:k,origin:L,accountIdentifier:N}=(0,l.useAutoConfirmSettingsStore)((e=>({shadowSettings:e.settings,setShadowSettings:e.setSettingsForDomain,origin:e.origin,accountIdentifier:e.accountIdentifier,reset:e.reset})));t(u).useEffect((()=>{v==L&&T==N||k()}),[v,L,k,T,N]),t(u).useEffect((()=>{C&&null!=w&&(null!=w&&null==R&&D(T,v,w),null==w||!y||(0,c.dequal)(w,R)||(0,c.dequal)(w,E)||D(T,v,w))}),[w,D,R,v,T,C,y,L,N,E]);const M=t(u).useMemo((()=>(0,o.isHardwareWalletAccountType)(null==m?void 0:m.type)),[m]),_=t(u).useMemo((()=>O?A:A.filter((e=>S.includes(e)))),[A,S,O]),B=t(u).useCallback((e=>{var t;return e?!!(null===(t=null==R?void 0:R.networks)||void 0===t?void 0:t[e]):_.some((e=>{var t;return!!(null===(t=null==R?void 0:R.networks)||void 0===t?void 0:t[e])}))}),[_,R]),j=t(u).useCallback((e=>{var t,n;if(!C||M)return;const r=JSON.parse(JSON.stringify(R));if((null==r?void 0:r.networks)&&null==(null===(t=null==r?void 0:r.networks)||void 0===t?void 0:t[e]))r.networks[e]=!0;else{if(!(null==r?void 0:r.networks))return!1;r.networks[e]=!r.networks[e]}r.sessionStartTime=Date.now(),r.maxSessionDuration=a.MAX_SESSION_DURATION,D(T,v,r),y&&b(r);const o=null!==(n=r.networks[e])&&void 0!==n&&n;return h.onAutoConfirmSettingsChanged({origin:v,networkID:e,enabled:o,sessionStartTime:o?null==r?void 0:r.sessionStartTime:void 0,maxSessionDuration:o?null==r?void 0:r.maxSessionDuration:void 0,view:y?"TRUSTED_APP":"NOTIFICATION"}),o}),[C,M,R,D,T,v,y,h,b]),U=t(u).useCallback((()=>{if(!C||null==R||M)return;const e=!B(),t=JSON.parse(JSON.stringify(R));for(const n of _)t.networks[n]=e;return t.sessionStartTime=Date.now(),t.maxSessionDuration=a.MAX_SESSION_DURATION,D(T,v,JSON.parse(JSON.stringify(t))),y&&b(t),h.onAutoConfirmSettingsChanged({origin:v,networkID:"all",enabled:e,sessionStartTime:e?null==t?void 0:t.sessionStartTime:void 0,maxSessionDuration:e?null==t?void 0:t.maxSessionDuration:void 0,view:y?"TRUSTED_APP":"NOTIFICATION"}),e}),[C,R,M,B,D,T,v,y,h,_,b]),F=t(u).useCallback((()=>f(void 0,void 0,void 0,(function*(){C&&null!=R&&!M&&(yield b(R))}))),[R,b,C,M]),q=t(u).useMemo((()=>{var e;return null!=(null==R?void 0:R.sessionStartTime)?new Date((null==R?void 0:R.sessionStartTime)+1e3*(null!==(e=null==R?void 0:R.maxSessionDuration)&&void 0!==e?e:0)):null}),[null==R?void 0:R.sessionStartTime,null==R?void 0:R.maxSessionDuration]),G=x;return t(u).useMemo((()=>({enabled:C,isHardwareAccount:M,showAutoConfirmRow:C&&!M,toggle:j,networkIDs:_,isActive:B,untilDate:q,settings:R,toggleAll:U,save:F,resetShadowSettings:k,loading:G,isAutoConfirmIsTouched:!(0,c.dequal)(R,w)})),[C,M,j,_,B,q,R,U,F,k,G,w])}})),i.register("9w5Wb",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("29o0l");e.exports.default=function(e){var t=n.useRef();return n.useEffect((function(){t.current=e})),t.current}})),i.register("c8vyP",(function(t,n){e(t.exports,"createAutoConfirmHooks",(function(){return a}));var r=i("4xbAj"),o=i("guZvk"),s=i("4b0uC");function a(e,t,n,i,a){const c=new(0,r.AccountAnalytics)(i),u=new(0,o.AutoConfirmAnalytics)(i);return{useAutoConfirmSettingsProps:r=>(0,s.useAutoConfirmSettingsProps)(e,t,n,c,u,a,r)}}})),i.register("guZvk",(function(t,n){e(t.exports,"AutoConfirmAnalytics",(function(){return c}),(function(e){return c=e}));var r,o=i("csW2r"),s=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},a=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class c{onAutoConfirmSettingsChanged({origin:e,networkID:t,enabled:n,sessionStartTime:i,maxSessionDuration:s,view:c}){o.telemetry.addBreadcrumb(`Auto-Confirm: ${n?"Enabling":"Disabling"} network ID ${t}`,o.FeatureTag.AutoConfirm,o.Severity.Info),a(this,r,"f").capture("autoConfirmSettingsChanged",{data:{origin:e,networkId:t,enabled:n,sessionStartTime:n?i:void 0,maxSessionDuration:n?s:void 0,view:c}})}transactionAutoConfirmed(e,t){var n;const i={type:"transaction",sequenceId:e,data:t};return(null===(n=t.autoConfirm.auditTrail)||void 0===n?void 0:n.length)&&t.autoConfirm.auditTrail.length<7&&(t.autoConfirm.suspectSettingsTamper=!0),o.telemetry.addBreadcrumb(`Auto-Confirm: transaction on origin ${t.origin} for network ${t.networkId} auto-confirmed`,o.FeatureTag.AutoConfirm,o.Severity.Info),t.autoConfirm.suspectSettingsTamper&&o.telemetry.addBreadcrumb("Auto-Confirm: suspected tampering with settings...",o.FeatureTag.AutoConfirm,o.Severity.Info),a(this,r,"f").capture("transactionAutoConfirmed",i)}messageAutoConfirmed(e,t){var n;const i={type:"message",sequenceId:e,data:t};return(null===(n=t.autoConfirm.auditTrail)||void 0===n?void 0:n.length)&&t.autoConfirm.auditTrail.length<7&&(t.autoConfirm.suspectSettingsTamper=!0),o.telemetry.addBreadcrumb(`Auto-Confirm: message on origin ${t.origin} for network ${t.networkId} auto-confirmed`,o.FeatureTag.AutoConfirm,o.Severity.Info),t.autoConfirm.suspectSettingsTamper&&o.telemetry.addBreadcrumb("Auto-Confirm: suspected tampering with settings...",o.FeatureTag.AutoConfirm,o.Severity.Info),a(this,r,"f").capture("transactionAutoConfirmed",i)}constructor(e){r.set(this,void 0),s(this,r,e,"f")}}r=new WeakMap})),i.register("gSZiQ",(function(t,n){e(t.exports,"AbstractAutoConfirmService",(function(){return p}),(function(e){return p=e}));var r=i("cFUcx"),o=i("5uSEV"),s=i("7gANb"),a=i("Nt4tV"),c=i("cr4aP"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const l=[];class p{isEthTransactionAutoConfirmable(e){return u(this,void 0,void 0,(function*(){this.executedChecksAudit=[];const t=yield this.didPassGenericChecks(e);if(t.status!==r.AutoConfirmStatusCode.OK)return t;if(!((yield this.isDappWhitelistOverridden())||(yield(0,c.isDappWhitelistedForTransaction)({chainId:e.networkID,domain:(0,a.removeWebPrefixes)(e.origin),txObjects:e.data}))))return Object.assign(Object.assign({},t),{status:r.AutoConfirmStatusCode.UnsupportedDapp,auditTrail:this.executedChecksAudit});const n=yield this.didPassEthTransactionSimulation(e),{success:o}=n,i=d(n,["success"]);return o?Object.assign(Object.assign(Object.assign({},t),i),{status:r.AutoConfirmStatusCode.OK,auditTrail:this.executedChecksAudit}):Object.assign(Object.assign(Object.assign({},t),i),{status:r.AutoConfirmStatusCode.SimulationFailed,auditTrail:this.executedChecksAudit})}))}isEthMessageAutoConfirmable(e){return u(this,void 0,void 0,(function*(){this.executedChecksAudit=[];const t=yield this.didPassGenericChecks(e);if(t.status!==r.AutoConfirmStatusCode.OK)return t;if(!((yield this.isDappWhitelistOverridden())||(yield(0,c.isDappWhitelistedForMessage)({chainId:e.networkID,domain:(0,a.removeWebPrefixes)(e.origin),data:e.data}))))return Object.assign(Object.assign({},t),{status:r.AutoConfirmStatusCode.UnsupportedDapp,auditTrail:this.executedChecksAudit});return(yield this.didPassEthMessageSimulation(e))?Object.assign(Object.assign({},t),{status:r.AutoConfirmStatusCode.OK,auditTrail:this.executedChecksAudit}):Object.assign(Object.assign({},t),{status:r.AutoConfirmStatusCode.SimulationFailed,auditTrail:this.executedChecksAudit})}))}isSolTransactionAutoConfirmable(e){return u(this,void 0,void 0,(function*(){this.executedChecksAudit=[];const t=yield this.didPassGenericChecks(e);if(t.status!==r.AutoConfirmStatusCode.OK)return t;if(!((yield this.isDappWhitelistOverridden())||(yield(0,c.isDappWhitelistedForTransaction)({chainId:e.networkID,domain:(0,a.removeWebPrefixes)(e.origin),transactions:e.data}))))return Object.assign(Object.assign({},t),{status:r.AutoConfirmStatusCode.UnsupportedDapp,auditTrail:this.executedChecksAudit});const n=yield this.didPassSolTransactionSimulation(e),{success:o}=n,i=d(n,["success"]);return o?Object.assign(Object.assign(Object.assign({},t),i),{status:r.AutoConfirmStatusCode.OK,auditTrail:this.executedChecksAudit}):Object.assign(Object.assign(Object.assign({},t),i),{status:r.AutoConfirmStatusCode.SimulationFailed,auditTrail:this.executedChecksAudit})}))}isSolMessageAutoConfirmable(e){return this.executedChecksAudit=[],Promise.resolve({status:r.AutoConfirmStatusCode.Unimplemented})}didPassGenericChecks(e){return u(this,void 0,void 0,(function*(){try{if(!(yield this.isFeatureEnabled()))return{status:r.AutoConfirmStatusCode.FeatureKilled};if(!(yield this.isWalletUnlocked()))return{status:r.AutoConfirmStatusCode.WalletLocked};if(!(yield this.isTabFocused(e.origin)))return{status:r.AutoConfirmStatusCode.TabNotFocused};if(!(yield this.isAutoConfirmEnabledInUserSettings({origin:e.origin,networkID:e.networkID,accountIdentifier:e.accountIdentifier})))return{status:r.AutoConfirmStatusCode.Disabled};const t=yield this.isAutoConfirmSessionActive(e.accountIdentifier,e.origin);return t.success?(yield this.isNotRateLimited())?{status:r.AutoConfirmStatusCode.OK,sessionStartTime:t.sessionStartTime,sessionMaxDuration:t.sessionMaxDuration}:{status:r.AutoConfirmStatusCode.RateLimitExceeded,sessionStartTime:t.sessionStartTime,sessionMaxDuration:t.sessionMaxDuration}:{status:r.AutoConfirmStatusCode.SessionExpired,sessionStartTime:t.sessionStartTime,sessionMaxDuration:t.sessionMaxDuration}}catch(e){return{status:r.AutoConfirmStatusCode.Unknown}}}))}isAutoConfirmEnabledInUserSettings({origin:e,accountIdentifier:t,networkID:n}){var i;return u(this,void 0,void 0,(function*(){this.executedChecksAudit.push(r.AutoConfirmCheck.IsAutoConfirmEnabledInUserSettings);const s=yield(0,o.getAutoConfirmSettingsForDomain)(this.storage,t,e);return!0===(null===(i=null==s?void 0:s.networks)||void 0===i?void 0:i[n])}))}isNotRateLimited(){this.executedChecksAudit.push(r.AutoConfirmCheck.IsNotRateLimited);const e=l.findIndex((e=>e<=Date.now()-6e4));return e>-1&&l.splice(e),!(l.length>=10)&&(l.push(Date.now()),!0)}isAutoConfirmSessionActive(e,t){return u(this,void 0,void 0,(function*(){this.executedChecksAudit.push(r.AutoConfirmCheck.IsAutoConfirmSessionActive);const n=yield(0,o.getAutoConfirmSettingsForDomain)(this.storage,e,t),i=(0,o.isAutoConfirmSessionActive)(n);return{sessionStartTime:n.sessionStartTime,sessionMaxDuration:n.maxSessionDuration,success:i}}))}didPassEthTransactionSimulation(e){return u(this,void 0,void 0,(function*(){this.executedChecksAudit.push(r.AutoConfirmCheck.DidPassEthTransactionSimulation);try{return function(e){var t,n,r,o,i,a;if(null==(null===(t=null==e?void 0:e.evaluation)||void 0===t?void 0:t.action))return{success:!1};if(null!=(null===(o=null===(r=null===(n=null==e?void 0:e.evaluation)||void 0===n?void 0:n.simulationResults)||void 0===r?void 0:r.error)||void 0===o?void 0:o.kind))return{success:!1};const c=s.simulations.estimateDollarValueFromEstimation(null===(a=null===(i=null==e?void 0:e.evaluation)||void 0===i?void 0:i.simulationResults)||void 0===a?void 0:a.expectedStateChanges).out;return{success:"NONE"===e.evaluation.action,dollarValue:parseFloat(c.toFixed(6))}}(yield s.simulations.scanMultichainTransaction({label:"autoConfirmScanTransaction",params:{networkID:e.networkID,origin:e.origin,userAccount:e.userAccountAddress,transactions:e.data}}))}catch(e){return{success:!1}}}))}didPassSolTransactionSimulation(e){return u(this,void 0,void 0,(function*(){this.executedChecksAudit.push(r.AutoConfirmCheck.DidPassSolTransactionSimulation);try{const t=yield s.simulations.scanMultichainTransaction({label:"autoConfirmScanTransaction",params:{networkID:e.networkID,origin:e.origin,userAccount:e.userAccountAddress,transactions:e.data}});return null==t?{success:!1}:function(e){var t,n,r,o,i,a;if(null==(null===(t=null==e?void 0:e.evaluation)||void 0===t?void 0:t.action))return{success:!1};if(null!=(null===(o=null===(r=null===(n=null==e?void 0:e.evaluation)||void 0===n?void 0:n.simulationResults)||void 0===r?void 0:r.error)||void 0===o?void 0:o.kind))return{success:!1};const c=s.simulations.estimateDollarValueFromEstimation(null===(a=null===(i=null==e?void 0:e.evaluation)||void 0===i?void 0:i.simulationResults)||void 0===a?void 0:a.expectedStateChanges).out;return{success:"NONE"===e.evaluation.action,dollarValue:parseFloat(c.toFixed(6))}}(t)}catch(e){return{success:!1}}}))}didPassEthMessageSimulation(e){return u(this,void 0,void 0,(function*(){this.executedChecksAudit.push(r.AutoConfirmCheck.DidPassEthMessageSimulation);try{const r=yield s.simulations.scanMessageQueryFn({networkID:e.networkID,parsedMessage:e.data,origin:e.origin,userAccount:e.userAccountAddress});return!(!r||r.error)&&(null!=(null===(n=null==(t=r)?void 0:t.evaluation)||void 0===n?void 0:n.action)&&"NONE"===t.evaluation.action)}catch(n){return!1}var t,n}))}constructor(e){this.storage=e,this.executedChecksAudit=[]}}})),i.register("cr4aP",(function(t,n){e(t.exports,"isDappWhitelistedForTransaction",(function(){return c}),(function(e){return c=e})),e(t.exports,"isDappWhitelistedForMessage",(function(){return u}),(function(e){return u=e}));var r=i("iOvk1"),o=i("16XMG"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=e=>`${(0,o.getAPIEnvironment)()}/auto-confirm/v1/${e}`;function c(e){return s(this,void 0,void 0,(function*(){if(r.Chains.isEVMNetworkID(e.chainId)){const t=yield fetch(a("transaction"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({txObjects:e.txObjects,chainId:e.chainId,domain:e.domain})}),n=yield t.json();return!0===(null==n?void 0:n.isEligible)}if(r.Chains.isSolanaNetworkID(e.chainId)){const t=yield fetch(a("transaction"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactions:e.transactions,chainId:e.chainId,domain:e.domain})}),n=yield t.json();return!0===(null==n?void 0:n.isEligible)}return!1}))}function u(e){return s(this,void 0,void 0,(function*(){if(r.Chains.isEVMNetworkID(e.chainId)){const t=JSON.parse(JSON.stringify(e.data));delete t.message,delete t.primaryType,delete t.types;const n=yield fetch(a("message"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chainId:e.chainId,domain:e.domain,data:[t]})}),r=yield n.json();return!0===(null==r?void 0:r.isEligible)}return!1}))}})),i.register("eJxop",(function(t,n){e(t.exports,"refetchLedgerAddresses",(function(){return i("dZ3qP").refetchLedgerAddresses})),e(t.exports,"resetLedgerAddresses",(function(){return i("dZ3qP").resetLedgerAddresses})),e(t.exports,"setLedgerTransportStateOverride",(function(){return i("dZ3qP").setLedgerTransportStateOverride})),e(t.exports,"createHardwareWireHooks",(function(){return i("3r36j").createHardwareWireHooks})),e(t.exports,"DEFAULT_LEDGER_TRANSPORT_STATE",(function(){return i("bwiqA").DEFAULT_LEDGER_TRANSPORT_STATE})),e(t.exports,"LEDGER_NOT_CONNECTED_STATE",(function(){return i("bwiqA").LEDGER_NOT_CONNECTED_STATE})),e(t.exports,"LEDGER_RECONNECTING_STATE",(function(){return i("bwiqA").LEDGER_RECONNECTING_STATE})),e(t.exports,"LEDGER_WAITING_FOR_APPROVAL_STATE",(function(){return i("bwiqA").LEDGER_WAITING_FOR_APPROVAL_STATE})),e(t.exports,"LedgerApp",(function(){return i("e59pI").LedgerApp})),e(t.exports,"LedgerLockedError",(function(){return i("a5LJM").LedgerLockedError})),e(t.exports,"getLedgerTransportState",(function(){return i("5i9Ta").getLedgerTransportState})),e(t.exports,"deriveLedgerAddresses",(function(){return i("54Y8k").deriveLedgerAddresses})),e(t.exports,"getLedgerAppDisplayName",(function(){return i("4kKEQ").getLedgerAppDisplayName})),e(t.exports,"getLedgerAppForAddressType",(function(){return i("4kKEQ").getLedgerAppForAddressType})),e(t.exports,"getLedgerAppForNetworkID",(function(){return i("4kKEQ").getLedgerAppForNetworkID})),e(t.exports,"createLedgerWireSigner",(function(){return i("cWagW").createLedgerWireSigner})),e(t.exports,"getAddressTypeFromDerivationPathType",(function(){return i("4vX1O").getAddressTypeFromDerivationPathType}));i("3r36j"),i("bwiqA"),i("e59pI");i("d1qVj");i("a5LJM"),i("5i9Ta"),i("54Y8k"),i("51YJE"),i("dfz3b"),i("4kKEQ"),i("cWagW"),i("4vX1O")})),i.register("3r36j",(function(t,n){e(t.exports,"createHardwareWireHooks",(function(){return c}));i("jgqfR");var r=i("4GWtC"),o=i("4Oih6"),s=(i("led49"),i("6epSx")),a=i("1yw5t");i("6ZHK3");function c(e,t){const{defaultTransportTimeout:n}=e;return{useIsLedgerSupported:()=>(0,r.default)(e),useLedgerWireTransportState:(n,r,o)=>(0,s.useLedgerWireTransportState)(e,t,n,r,o),useRequestLedgerPermission:(n,r)=>(0,a.default)(e,t,n,r),useLedgerAddresses:(e,r,i,s)=>(0,o.default)(n,t,e,r,i,s)}}})),i.register("jgqfR",(function(t,n){e(t.exports,"useConnectedLedgerDeviceMetadata",(function(){return a}));var r=i("5ekp2"),o=i("9O68d"),s=i("dUHlc");const a=(e,t)=>{const n=!!t,i=s.hardwareQueryKeys.accountConnectedDevice(t);return(0,r.useQuery)({enabled:n,queryKey:i,queryFn:()=>(0,o.getConnectedLedgerDeviceMetadata)(e,null!=t?t:"")})}})),i.register("9O68d",(function(t,n){e(t.exports,"getConnectedLedgerDeviceMetadata",(function(){return c}),(function(e){return c=e}));var r=i("4xbAj"),o=i("csW2r"),s=i("a5LJM"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=(e,t)=>a(void 0,void 0,void 0,(function*(){var n;o.telemetry.addBreadcrumb(o.FeatureTag.Ledger,`Getting Connected Ledger Device metadata for account: ${t}`,o.Severity.Info);const i=yield(0,r.getMultiChainAccountMetadata)(e,t),a=null===(n=null==i?void 0:i.connectedDevices)||void 0===n?void 0:n.find((e=>e.deviceType===r.DeviceType.Ledger&&e.connectionType===r.ConnectionType.BLE));if(!a)throw new(0,s.AccountMetadataNoConnectedDevicesError);return a}))})),i.register("a5LJM",(function(t,n){e(t.exports,"LedgerNotConnectedError",(function(){return o})),e(t.exports,"LedgerMultipleAppsRequestedError",(function(){return i})),e(t.exports,"LedgerLockedError",(function(){return s})),e(t.exports,"LedgerDuplicateAddressReceivedError",(function(){return a})),e(t.exports,"AccountMetadataNoConnectedDevicesError",(function(){return c}));class r extends Error{constructor(e){super(e)}}class o extends r{constructor(e="Ledger not connected."){super(e)}}class i extends r{constructor(e="Multiple apps requested from Ledger. Only request one at a time."){super(e)}}class s extends r{constructor(e="Ledger is locked, unlock to get addresses or sign."){super(e)}}class a extends r{constructor(e="Duplicate ledger address received"){super(e)}}class c extends r{constructor(e="No connected devices."){super(e)}}})),i.register("dUHlc",(function(t,n){e(t.exports,"HARDWARE_BASE_QUERY_KEY",(function(){return r})),e(t.exports,"hardwareQueryKeys",(function(){return o}));const r="@phantom/hardware",o={isLedgerSupported:()=>[`${r}:is-ledger-supported`],ledgerTransportState:()=>[`${r}:ledger-transport-state`],ledgerAddress:(e,t)=>[`${r}:ledger-address`,{chainType:e,derivationPath:t}],ledgerAddresses:(e=[],t)=>[`${r}:ledger-addresses`,{derivationPathParams:e,enableLedgerXPubDerivation:t}],requestLedgerPermission:()=>[`${r}:request-ledger-permission`],accountConnectedDevice:e=>[`${r}:account-connected-device`,{accountIdentifier:e}]}})),i.register("4GWtC",(function(t,n){e(t.exports,"default",(function(){return a}),(function(e){return a=e}));var r=i("5ekp2"),o=i("dUHlc"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=e=>{const t=o.hardwareQueryKeys.isLedgerSupported();return(0,r.useQuery)({queryKey:t,queryFn:()=>s(void 0,void 0,void 0,(function*(){return e.isSupported()}))})}})),i.register("4Oih6",(function(t,n){e(t.exports,"default",(function(){return l}),(function(e){return l=e}));var r=i("7mQ3Y"),o=i("5ekp2"),s=i("a5LJM"),a=i("4kKEQ"),c=i("54Y8k"),u=i("dUHlc"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},l=(e,t,n,i=[],l=!1,p=!1,f=(()=>{}))=>{var h;const g=(0,a.getLedgerAppForAddressType)(r.AddressTypes.getAddressType(i[0].pathType)),v=n.isConnected&&i.length>0&&g===(null===(h=n.selectedApp)||void 0===h?void 0:h.app),y=u.hardwareQueryKeys.ledgerAddresses(i,p);return(0,o.useQuery)({enabled:v,queryKey:y,queryFn:()=>d(void 0,void 0,void 0,(function*(){const n=yield t.getQueryData(u.hardwareQueryKeys.ledgerTransportState());if(!n)throw new(0,s.LedgerNotConnectedError);return(0,c.deriveLedgerAddresses)({transportTimeout:e,state:n,derivationPathParams:i,enableDebugLogs:l,enableLedgerXPubDerivation:p,onSuccess:f})})),retry:!1})}})),i.register("4kKEQ",(function(t,n){e(t.exports,"getLedgerAppDisplayName",(function(){return a})),e(t.exports,"getLedgerAppForNetworkID",(function(){return c})),e(t.exports,"getLedgerAppForAddressType",(function(){return u}));var r=i("iOvk1"),o=i("7mQ3Y"),s=i("e59pI");const a=e=>{switch(e){case s.LedgerApp.Bitcoin:return"Bitcoin";case s.LedgerApp.EVM:return"Ethereum";case s.LedgerApp.Solana:return"Solana"}},c=e=>{const t=r.Chains.getAddressTypes(e);return u(t[0])},u=e=>{switch(e){case o.AddressType.BitcoinTaproot:case o.AddressType.BitcoinNativeSegwit:case o.AddressType.BitcoinNestedSegwit:case o.AddressType.BitcoinLegacy:return s.LedgerApp.Bitcoin;case o.AddressType.EVM:return s.LedgerApp.EVM;case o.AddressType.Solana:return s.LedgerApp.Solana}}})),i.register("e59pI",(function(t,n){e(t.exports,"LedgerApp",(function(){return r}));var r,o,s=i("7XqVB");(o=r||(r={})).Bitcoin="Bitcoin",o.EVM="EVM",o.Solana="Solana";const a=s.z.string().regex(/^[0-9A-Fa-f]*$/,{message:"String must have only valid hex characters"});s.z.object({publicKey:a,chainCode:a}),s.z.object({name:s.z.string(),id:s.z.string().min(1),rssi:s.z.number().int()}),s.z.union([s.z.literal("low"),s.z.literal("medium"),s.z.literal("high")])})),i.register("54Y8k",(function(t,n){e(t.exports,"deriveLedgerAddresses",(function(){return y}),(function(e){return y=e}));var r=i("jZpRu"),o=i("7mQ3Y"),s=i("csW2r"),a=i("RVqnc"),c=i("a5LJM"),u=i("aLMPl"),d=i("2XRol"),l=i("bOnUg"),p=i("5E8aH"),f=i("eCWDh"),h=i("4kKEQ"),g=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const v=(e,t,n,r)=>{const i=new Set;return(s,d)=>g(void 0,void 0,void 0,(function*(){if(!t.isConnected)throw new(0,c.LedgerNotConnectedError);const l=e;try{const e=yield(0,a.withRetry)((()=>g(void 0,void 0,void 0,(function*(){const e=o.AddressTypes.getAddressType(s.pathType),n=yield(0,a.withTimeout)((0,u.getLedgerAddress)(t.transport,e,d,r),3e3);if(i.has(n.address))throw new(0,c.LedgerDuplicateAddressReceivedError);return n}))),(e=>{const t=e instanceof c.LedgerDuplicateAddressReceivedError;t&&(0,p.debugLog)(n,`❌ Duplicate address detected, retrying in ${l}ms...`);const r="InvalidChannel"===e.id;return r&&(0,p.debugLog)(n,`Invalid channel, trying again in ${l}ms...`),t||r}),3,l);return(0,p.debugLog)(n,`✅ Received address for ${d}: ${e.address}`),i.add(e.address),e}catch(e){throw yield(0,a.delayAsync)(1e3),e}}))},y=({transportTimeout:e,state:t,derivationPathParams:n,enableDebugLogs:i,enableLedgerXPubDerivation:a,onSuccess:u})=>g(void 0,void 0,void 0,(function*(){const y=Date.now();(e=>{let t,n=!0;for(const r of e){const e=o.AddressTypes.getAddressType(r.pathType),i=(0,h.getLedgerAppForAddressType)(e);if(t?n=n&&t===i:t=i,!n)throw new(0,c.LedgerMultipleAppsRequestedError)}})(n);const m=a?((e,t,n)=>{const i=v(e,t,n,!0),a={};return(e,c)=>g(void 0,void 0,void 0,(function*(){const u=o.AddressTypes.getAddressType(e.pathType);switch(u){case o.AddressType.BitcoinTaproot:case o.AddressType.BitcoinNativeSegwit:case o.AddressType.BitcoinNestedSegwit:case o.AddressType.BitcoinLegacy:{let r=a[e.pathType];if(!r)try{r=yield(0,d.createBitcoinChildAddressDeriver)(t,e.pathType),a[e.pathType]=r}catch(t){return s.telemetry.captureError(new Error(`error creating xpub from derivation path: ${c}. Reason: ${t.message}`),s.FeatureTag.Ledger),i(e,c)}const o=r(e.index);return(0,p.debugLog)(n,`⭐️ Derived address with xpub for ${c}: ${o.address}`),{type:"address",addressType:u,address:o.address,publicKey:o.publicKey}}case o.AddressType.Solana:return i(e,c);case o.AddressType.EVM:if(e.pathType===r.DerivationPathType.Bip44RootEthereum)return i(e,c);{let t=a[e.pathType];if(!t)try{const n=(0,f.getRelativeDerivationPath)("grandparent",e.pathType),r=yield i(e,n);if(r.addressType!==u||"chain-code"!==r.type)throw new Error(`invalid response from Ledger requesting grandparent path: ${n}`);const o=(0,f.getRelativeDerivationPath)("parent",e.pathType),s=yield i(e,o);if(s.addressType!==u||"chain-code"!==s.type)throw new Error(`invalid response from Ledger requesting parent path: ${n}`);t=(0,l.createEthereumChildAddressDeriver)(r,s),a[e.pathType]=t}catch(t){return s.telemetry.captureError(new Error(`error creating xpub from derivation path: ${c}. Reason: ${t.message}`),s.FeatureTag.Ledger),i(e,c)}const r=t(e.index);return(0,p.debugLog)(n,`⭐️ Derived address with xpub for ${c}: ${r.address}`),{type:"address",addressType:u,address:r.address,publicKey:r.publicKey}}}}))})(e,t,i):v(e,t,i,!1),T={};for(const e of n){const t=(0,r.getDerivationPath)(e),n=yield m(e,t);T[t]=n}const w=(Date.now()-y)/1e3;return(0,p.debugLog)(i,`✅ Finished requesting addresses for ${n.length} derivation paths. Time: ${w} s`),u(w),T}))})),i.register("aLMPl",(function(n,r){e(n.exports,"getLedgerAddress",(function(){return h}),(function(e){return h=e}));var o=i("jZpRu"),s=i("iOvk1"),a=i("7mQ3Y"),c=i("85iHy"),u=i("a5LJM"),d=i("eCWDh"),l=i("2XRol"),p=i("2B5FA"),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const h=(e,n,r,i)=>f(void 0,void 0,void 0,(function*(){const f=r.replace("m/","");try{switch(n){case a.AddressType.BitcoinTaproot:case a.AddressType.BitcoinNativeSegwit:case a.AddressType.BitcoinNestedSegwit:case a.AddressType.BitcoinLegacy:{const t=yield(0,p.getBitcoinLedgerApp)(e),i=a.AddressTypes[n].defaultDerivationPathType,c=(0,o.parseDerivationPath)(r).index,u=(0,d.getRelativeDerivationPath)("parent",i),f=yield t.getExtendedPubkey(u),h=(yield(0,l.createHDNodeFromXpub)(f,"mainnet")).derivePath(`${c}`);return{type:"chain-code",addressType:n,address:(0,a.publicKeyToAddress)({publicKey:new Uint8Array(h.publicKey),addressType:n,networkID:s.BitcoinNetworkID.Mainnet}),publicKey:h.publicKey.toString("hex"),chainCode:h.chainCode.toString("hex")}}case a.AddressType.Solana:{const r=yield(0,p.getSolanaLedgerApp)(e),{address:o}=yield r.getAddress(f);return{type:"address",addressType:n,address:t(c).encode(o),publicKey:o.toString("hex")}}case a.AddressType.EVM:{const t=yield(0,p.getEthereumLedgerApp)(e),{publicKey:r,address:o,chainCode:s}=yield t.getAddress(f,!1,i);if(i){if(!s)throw new Error("Chain code is requested from Ledger device, but no chain code was received.");return{type:"chain-code",addressType:n,address:o,publicKey:r,chainCode:s}}return{type:"address",addressType:n,address:o,publicKey:r}}}}catch(e){throw"TransportLocked"===e.id?new(0,u.LedgerLockedError):e}}))})),i.register("eCWDh",(function(t,n){e(t.exports,"getRelativeDerivationPath",(function(){return o}));var r=i("jZpRu");const o=(e,t)=>{switch(e){case"grandparent":switch(t){case r.DerivationPathType.BitcoinTaproot:return"m/86'/0'/0'";case r.DerivationPathType.BitcoinNativeSegwit:return"m/84'/0'/0'";case r.DerivationPathType.BitcoinNestedSegwit:return"m/46'/0'/0'";case r.DerivationPathType.BitcoinLegacy:return"m/44'/0'/0'";case r.DerivationPathType.Bip44Ethereum:return"m/44'/60'/0'";case r.DerivationPathType.Bip44EthereumSecondary:return"m/44'/60'/1'";case r.DerivationPathType.Bip44EthereumTertiary:return"m/44'/60'/2'"}break;case"parent":switch(t){case r.DerivationPathType.BitcoinTaproot:return"m/86'/0'/0'/0";case r.DerivationPathType.BitcoinNativeSegwit:return"m/84'/0'/0'/0";case r.DerivationPathType.BitcoinNestedSegwit:return"m/46'/0'/0'/0";case r.DerivationPathType.BitcoinLegacy:return"m/44'/0'/0'/0";case r.DerivationPathType.Bip44Ethereum:return"m/44'/60'/0'/0";case r.DerivationPathType.Bip44EthereumSecondary:return"m/44'/60'/1'/0";case r.DerivationPathType.Bip44EthereumTertiary:return"m/44'/60'/2'/0"}}}})),i.register("2XRol",(function(t,n){e(t.exports,"createHDNodeFromXpub",(function(){return p}),(function(e){return p=e})),e(t.exports,"createBitcoinChildAddressDeriver",(function(){return f}),(function(e){return f=e}));var r=i("7mQ3Y"),o=i("dG1lS"),s=i("a5LJM"),a=i("4vX1O"),c=i("eCWDh"),u=i("2B5FA"),d=i("8tcqI").Buffer,l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const p=(e,t)=>l(void 0,void 0,void 0,(function*(){const{default:n}=yield i("irYom");return n(yield Promise.resolve(i("2NpJF"))).fromBase58(e,"mainnet"===t?o.networks.bitcoin:o.networks.testnet)})),f=(e,t)=>l(void 0,void 0,void 0,(function*(){if(!e.isConnected)throw new(0,s.LedgerNotConnectedError);const n=yield(0,u.getBitcoinLedgerApp)(e.transport),o=(0,c.getRelativeDerivationPath)("parent",t),i=yield n.getExtendedPubkey(o),l=yield p(i,"mainnet");return e=>{const n=new Uint8Array(l.derivePath(`${e}`).publicKey),o=(0,r.publicKeyToAddress)({publicKey:n,addressType:(0,a.getAddressTypeFromDerivationPathType)(t)});return{publicKey:d.from(n).toString("hex"),address:o}}}))})),i.register("4vX1O",(function(t,n){e(t.exports,"getAddressTypeFromDerivationPathType",(function(){return s}));var r=i("jZpRu"),o=i("7mQ3Y");function s(e){switch(e){case r.DerivationPathType.Bip44RootSolana:case r.DerivationPathType.Bip44ChangeSolana:case r.DerivationPathType.Bip44Solana:case r.DerivationPathType.DeprecatedSolana:return o.AddressType.Solana;case r.DerivationPathType.Bip44RootEthereum:case r.DerivationPathType.Bip44Ethereum:case r.DerivationPathType.Bip44EthereumSecondary:case r.DerivationPathType.Bip44EthereumTertiary:return o.AddressType.EVM;case r.DerivationPathType.BitcoinLegacy:return o.AddressType.BitcoinLegacy;case r.DerivationPathType.BitcoinNativeSegwit:return o.AddressType.BitcoinNativeSegwit;case r.DerivationPathType.BitcoinNestedSegwit:return o.AddressType.BitcoinNestedSegwit;case r.DerivationPathType.BitcoinTaproot:return o.AddressType.BitcoinTaproot}}})),i.register("2B5FA",(function(t,n){e(t.exports,"getSolanaLedgerApp",(function(){return o}),(function(e){return o=e})),e(t.exports,"getEthereumLedgerApp",(function(){return s}),(function(e){return s=e})),e(t.exports,"getEthereumLedgerService",(function(){return a}),(function(e){return a=e})),e(t.exports,"getBitcoinLedgerApp",(function(){return c}),(function(e){return c=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};function o(e){return r(this,void 0,void 0,(function*(){const{default:t}=yield i("c0oz8");return new t(e)}))}function s(e){return r(this,void 0,void 0,(function*(){const{default:t}=yield i("bhEYe");return new t(e)}))}function a(){return r(this,void 0,void 0,(function*(){const{ledgerService:e}=yield i("bhEYe");return e}))}function c(e){return r(this,void 0,void 0,(function*(){const{AppClient:t}=yield Promise.resolve(i("MlrnL"));return new t(e)}))}})),i.register("c0oz8",(function(e,t){e.exports=Promise.all([i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("ddATe")),i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("bnDSu"))]).then((()=>i("903Vo")))})),i.register("j1yuj",(function(e,t){"use strict";var n=i("hE0rk");e.exports=n((function(e){return new Promise((function(t,n){var r=document.getElementsByTagName("script");if([].concat(r).some((function(t){return t.src===e})))t();else{var o=document.createElement("link");o.href=e,o.rel="preload",o.as="script",document.head.appendChild(o);var i=document.createElement("script");i.async=!0,i.type="text/javascript",i.src=e,i.onerror=function(t){var r=new TypeError("Failed to fetch dynamically imported module: ".concat(e,". Error: ").concat(t.message));i.onerror=i.onload=null,i.remove(),n(r)},i.onload=function(){i.onerror=i.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(i)}}))}))})),i.register("hE0rk",(function(e,t){"use strict";var n={},r={},o={};e.exports=function(e,t){return function(i){var s=function(e){switch(e){case"preload":return r;case"prefetch":return o;default:return n}}(t);return s[i]?s[i]:s[i]=e.apply(null,arguments).catch((function(e){throw delete s[i],e}))}}})),i.register("2FqAO",(function(t,n){var r;e(t.exports,"getBundleURL",(function(){return r}),(function(e){return r=e}));var o={};function i(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=o[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return i(e[2])}return"/"}(),o[e]=t),t}})),i.register("bhEYe",(function(e,t){e.exports=Promise.all([i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("ddATe")),i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("ia8XW"))]).then((()=>i("lwgEg")))})),i.register("MlrnL",(function(e,t){"use strict";var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WalletPolicy=e.exports.DefaultWalletPolicy=e.exports.PsbtV2=e.exports.AppClient=void 0;const r=n(i("dDSOe"));e.exports.AppClient=r.default;var o=i("5s6Ty");Object.defineProperty(e.exports,"DefaultWalletPolicy",{enumerable:!0,get:function(){return o.DefaultWalletPolicy}}),Object.defineProperty(e.exports,"WalletPolicy",{enumerable:!0,get:function(){return o.WalletPolicy}});var s=i("dlwOE");Object.defineProperty(e.exports,"PsbtV2",{enumerable:!0,get:function(){return s.PsbtV2}}),e.exports.default=r.default})),i.register("dDSOe",(function(e,t){var n=i("8tcqI").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AppClient=e.exports.PartialSignature=void 0;var r=i("6qoDS"),o=i("a97ro"),s=i("2Bu96"),a=i("6v8Fu"),c=i("dlwOE"),u=i("jpwMo");var d,l,p,f;(l=d||(d={}))[l.GET_PUBKEY=0]="GET_PUBKEY",l[l.REGISTER_WALLET=2]="REGISTER_WALLET",l[l.GET_WALLET_ADDRESS=3]="GET_WALLET_ADDRESS",l[l.SIGN_PSBT=4]="SIGN_PSBT",l[l.GET_MASTER_FINGERPRINT=5]="GET_MASTER_FINGERPRINT",l[l.SIGN_MESSAGE=16]="SIGN_MESSAGE",(f=p||(p={}))[f.CONTINUE_INTERRUPTED=1]="CONTINUE_INTERRUPTED";class h{constructor(e,t,n){this.pubkey=e,this.signature=t,this.tapleafHash=n}}function g(e,t){if(64==e.length)return new h(e.slice(0,32),t,e.slice(32,64));if(32==e.length||33==e.length)return new h(e,t);throw new Error(`Invalid length for pubkeyAugm: ${e.length} bytes.`)}e.exports.PartialSignature=h;class v{async makeRequest(e,t,n){let r=await this.transport.send(225,e,0,1,t,[36864,57344]);for(;57344===r.readUInt16BE(r.length-2);){if(!n)throw new Error("Unexpected SW_INTERRUPTED_EXECUTION");const e=r.slice(0,-2),t=n.execute(e);r=await this.transport.send(248,p.CONTINUE_INTERRUPTED,0,0,t,[36864,57344])}return r.slice(0,-2)}async getAppAndVersion(){const e=await this.transport.send(176,1,0,0);let t=0;if(1!==e[t++])throw new Error("Unexpected response");const n=e[t++],r=e.slice(t,t+=n).toString("ascii"),o=e[t++],i=e.slice(t,t+=o).toString("ascii"),s=e[t++];return{name:r,version:i,flags:e.slice(t,t+=s)}}async getExtendedPubkey(e,t=!1){const o=(0,r.pathStringToArray)(e);if(o.length>6)throw new Error("Path too long. At most 6 levels allowed.");return(await this.makeRequest(d.GET_PUBKEY,n.concat([n.from(t?[1]:[0]),(0,r.pathElementsToBuffer)(o)]))).toString("ascii")}async registerWallet(e){await this.validatePolicy(e);const t=new o.ClientCommandInterpreter;t.addKnownWalletPolicy(e);const r=e.serialize(),i=await this.makeRequest(d.REGISTER_WALLET,n.concat([(0,u.createVarint)(r.length),r]),t);if(64!=i.length)throw Error(`Invalid response length. Expected 64 bytes, got ${i.length}`);return[i.subarray(0,32),i.subarray(32)]}async getWalletAddress(e,t,r,i,s){if(0!==r&&1!==r)throw new Error("Change can only be 0 or 1");if(i<0||!Number.isInteger(i))throw new Error("Invalid address index");if(null!=t&&32!=t.length)throw new Error("Invalid HMAC length");await this.validatePolicy(e);const a=new o.ClientCommandInterpreter;a.addKnownWalletPolicy(e);const c=n.alloc(4);c.writeUInt32BE(i,0);return(await this.makeRequest(d.GET_WALLET_ADDRESS,n.concat([n.from(s?[1]:[0]),e.getId(),t||n.alloc(32,0),n.from([r]),c]),a)).toString("ascii")}async signPsbt(e,t,r,i){if(await this.validatePolicy(t),"string"==typeof e&&(e=n.from(e,"base64")),n.isBuffer(e)){const t=new c.PsbtV2;t.deserialize(e),e=t}const l=new s.MerkelizedPsbt(e);if(null!=r&&32!=r.length)throw new Error("Invalid HMAC length");const p=new o.ClientCommandInterpreter(i);p.addKnownWalletPolicy(t),p.addKnownMapping(l.globalMerkleMap);for(const e of l.inputMerkleMaps)p.addKnownMapping(e);for(const e of l.outputMerkleMaps)p.addKnownMapping(e);p.addKnownList(l.inputMapCommitments);const f=new a.Merkle(l.inputMapCommitments.map((e=>(0,a.hashLeaf)(e)))).getRoot();p.addKnownList(l.outputMapCommitments);const h=new a.Merkle(l.outputMapCommitments.map((e=>(0,a.hashLeaf)(e)))).getRoot();await this.makeRequest(d.SIGN_PSBT,n.concat([l.getGlobalKeysValuesRoot(),(0,u.createVarint)(l.getGlobalInputCount()),f,(0,u.createVarint)(l.getGlobalOutputCount()),h,t.getId(),r||n.alloc(32,0)]),p);const v=p.getYielded(),y=[];for(const e of v){const[t,n]=(0,u.parseVarint)(e,0),r=e[n],o=g(e.subarray(n+1,n+1+r),e.subarray(n+1+r));y.push([Number(t),o])}return y}async getMasterFingerprint(){return(await this.makeRequest(d.GET_MASTER_FINGERPRINT,n.from([]))).toString("hex")}async signMessage(e,t){const i=(0,r.pathStringToArray)(t),s=new o.ClientCommandInterpreter,c=Math.ceil(e.length/64),l=[];for(let t=0;t<c;t++)l.push(e.subarray(64*t,64*t+64));s.addKnownList(l);const p=new a.Merkle(l.map((e=>(0,a.hashLeaf)(e)))).getRoot();return(await this.makeRequest(d.SIGN_MESSAGE,n.concat([(0,r.pathElementsToBuffer)(i),(0,u.createVarint)(e.length),p]),s)).toString("base64")}async validatePolicy(e){if((e.descriptorTemplate.match(/[asctdvjnlu]+:/g)||[]).some((e=>e.includes("a")))){const e=await this.getAppAndVersion();if(["2.1.0","2.1.1"].includes(e.version))throw new Error("Please update your Ledger Bitcoin app.")}}constructor(e){this.transport=e}}e.exports.AppClient=v,e.exports.default=v})),i.register("6qoDS",(function(e,t){var n=i("8tcqI").Buffer,r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hardenedPathOf=e.exports.getXpubComponents=e.exports.pubkeyFromXpub=e.exports.pathStringToArray=e.exports.pathArrayToString=e.exports.bip32asBuffer=e.exports.pathElementsToBuffer=void 0;const o=r(i("kLlMG")),s=r(i("6mqWr"));function a(e){const t=n.alloc(1+4*e.length);return t[0]=e.length,e.forEach(((e,n)=>{t.writeUInt32BE(e,1+4*n)})),t}function c(e){return"m"==e||""==e?[]:o.default.fromString(e).toPathArray()}e.exports.pathElementsToBuffer=a,e.exports.bip32asBuffer=function(e){return a(e?c(e):[])},e.exports.pathArrayToString=function(e){return 0==e.length?"m":o.default.fromPathArray(e).toString()},e.exports.pathStringToArray=c,e.exports.pubkeyFromXpub=function(e){const t=s.default.decode(e);return t.slice(t.length-33)},e.exports.getXpubComponents=function(e){const t=s.default.decode(e);return{chaincode:t.slice(13,45),pubkey:t.slice(t.length-33),version:t.readUInt32BE(0)}},e.exports.hardenedPathOf=function(e){for(let t=e.length-1;t>=0;t--)if(e[t]>=2147483648)return e.slice(0,t+1);return[]}})),i.register("kLlMG",(function(e,t){const n=2147483648;var r=function(e){if(!Array.isArray(e))throw new Error("Input must be an Array");if(0===e.length)throw new Error("Path must contain at least one level");for(var t=0;t<e.length;t++)if("number"!=typeof e[t])throw new Error("Path element is not a number");this.path=e};r.validatePathArray=function(e){try{return r.fromPathArray(e),!0}catch(e){return!1}},r.validateString=function(e,t){try{return r.fromString(e,t),!0}catch(e){return!1}},r.fromPathArray=function(e){return new r(e)},r.fromString=function(e,t){if(/^m\//i.test(e))e=e.slice(2);else if(t)throw new Error("Root element is required");for(var o=e.split("/"),i=new Array(o.length),s=0;s<o.length;s++){var a=/(\d+)([hH\']?)/.exec(o[s]);if(null===a)throw new Error("Invalid input");if(i[s]=parseInt(a[1],10),i[s]>=n)throw new Error("Invalid child index");if("h"===a[2]||"H"===a[2]||"'"===a[2])i[s]+=n;else if(0!=a[2].length)throw new Error("Invalid modifier")}return new r(i)},r.prototype.toPathArray=function(){return this.path},r.prototype.toString=function(e,t){for(var r=new Array(this.path.length),o=0;o<this.path.length;o++){var i=this.path[o];r[o]=i&n?(2147483647&i)+(t?"h":"'"):i}return(e?"":"m/")+r.join("/")},r.prototype.inspect=function(){return"BIPPath <"+this.toString()+">"},e.exports=r})),i.register("a97ro",(function(e,t){var n=i("8tcqI").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ClientCommandInterpreter=e.exports.GetMoreElementsCommand=e.exports.GetMerkleLeafIndexCommand=e.exports.GetMerkleLeafProofCommand=e.exports.GetPreimageCommand=e.exports.YieldCommand=void 0;var r,o,s=i("dG1lS"),a=i("3V3fl"),c=i("6v8Fu"),u=i("jpwMo");(o=r||(r={}))[o.YIELD=16]="YIELD",o[o.GET_PREIMAGE=64]="GET_PREIMAGE",o[o.GET_MERKLE_LEAF_PROOF=65]="GET_MERKLE_LEAF_PROOF",o[o.GET_MERKLE_LEAF_INDEX=66]="GET_MERKLE_LEAF_INDEX",o[o.GET_MORE_ELEMENTS=160]="GET_MORE_ELEMENTS";class d{}class l extends d{execute(e){return this.results.push(n.from(e.subarray(1))),this.progressCallback&&this.progressCallback(),n.from("")}constructor(e,t){super(),this.progressCallback=t,this.code=r.YIELD,this.results=e}}e.exports.YieldCommand=l;class p extends d{execute(e){const t=n.from(e.subarray(1));if(33!=t.length)throw new Error("Invalid request, unexpected trailing data");if(0!=t[0])throw new Error("Unsupported request, the first byte should be 0");const r=n.alloc(32);for(let e=0;e<32;e++)r[e]=t[1+e];const o=r.toString("hex"),i=this.known_preimages.get(o);if(null!=i){const e=(0,u.createVarint)(i.length),t=255-e.length-1,r=Math.min(t,i.length);if(r<i.length)for(let e=r;e<i.length;e++)this.queue.push(n.from([i[e]]));return n.concat([e,n.from([r]),n.from(i.subarray(0,r))])}throw Error(`Requested unknown preimage for: ${o}`)}constructor(e,t){super(),this.code=r.GET_PREIMAGE,this.known_preimages=e,this.queue=t}}e.exports.GetPreimageCommand=p;class f extends d{execute(e){const t=n.from(e.subarray(1));if(t.length<34)throw new Error("Invalid request, expected at least 34 bytes");const r=new a.BufferReader(t),o=r.readSlice(32).toString("hex");let i,s;try{i=(0,u.sanitizeBigintToNumber)(r.readVarInt()),s=(0,u.sanitizeBigintToNumber)(r.readVarInt())}catch(e){throw new Error("Invalid request, couldn't parse tree_size or leaf_index")}const c=this.known_trees.get(o);if(!c)throw Error(`Requested Merkle leaf proof for unknown tree: ${o}`);if(s>=i||c.size()!=i)throw Error("Invalid index or tree size.");if(0!=this.queue.length)throw Error("This command should not execute when the queue is not empty.");const d=c.getProof(s),l=Math.min(Math.floor(6.90625),d.length),p=d.length-l;return p>0&&this.queue.push(...d.slice(-p)),n.concat([c.getLeafHash(s),n.from([d.length]),n.from([l]),...d.slice(0,l)])}constructor(e,t){super(),this.code=r.GET_MERKLE_LEAF_PROOF,this.known_trees=e,this.queue=t}}e.exports.GetMerkleLeafProofCommand=f;class h extends d{execute(e){const t=n.from(e.subarray(1));if(64!=t.length)throw new Error("Invalid request, unexpected trailing data");const r=n.alloc(32);for(let e=0;e<32;e++)r[e]=t.readUInt8(e);const o=r.toString("hex"),i=n.alloc(32);for(let e=0;e<32;e++)i[e]=t.readUInt8(32+e);const s=i.toString("hex"),a=this.known_trees.get(o);if(!a)throw Error(`Requested Merkle leaf index for unknown root: ${o}`);let c=0,d=0;for(let e=0;e<a.size();e++)if(a.getLeafHash(e).toString("hex")==s){d=1,c=e;break}return n.concat([n.from([d]),(0,u.createVarint)(c)])}constructor(e){super(),this.code=r.GET_MERKLE_LEAF_INDEX,this.known_trees=e}}e.exports.GetMerkleLeafIndexCommand=h;class g extends d{execute(e){if(1!=e.length)throw new Error("Invalid request, unexpected trailing data");if(0===this.queue.length)throw new Error("No elements to get");const t=this.queue[0].length;if(this.queue.some((e=>e.length!=t)))throw new Error("The queue contains elements with different byte length, which is not expected");const r=Math.floor(253/t),o=Math.min(r,this.queue.length),i=this.queue.splice(0,o);return n.concat([n.from([o]),n.from([t]),...i])}constructor(e){super(),this.code=r.GET_MORE_ELEMENTS,this.queue=e}}e.exports.GetMoreElementsCommand=g;e.exports.ClientCommandInterpreter=class{getYielded(){return this.yielded}addKnownPreimage(e){this.preimages.set(s.crypto.sha256(e).toString("hex"),e)}addKnownList(e){for(const t of e){const e=n.concat([n.from([0]),t]);this.addKnownPreimage(e)}const t=new c.Merkle(e.map((e=>(0,c.hashLeaf)(e))));this.roots.set(t.getRoot().toString("hex"),t)}addKnownMapping(e){this.addKnownList(e.keys),this.addKnownList(e.values)}addKnownWalletPolicy(e){this.addKnownPreimage(e.serialize()),this.addKnownList(e.keys.map((e=>n.from(e,"ascii")))),this.addKnownPreimage(n.from(e.descriptorTemplate))}execute(e){if(0==e.length)throw new Error("Unexpected empty command");const t=e[0],n=this.commands.get(t);if(!n)throw new Error(`Unexpected command code ${t}`);return n.execute(e)}constructor(e){this.roots=new Map,this.preimages=new Map,this.yielded=[],this.queue=[],this.commands=new Map;const t=[new l(this.yielded,e),new p(this.preimages,this.queue),new h(this.roots),new f(this.roots,this.queue),new g(this.queue)];for(const e of t){if(this.commands.has(e.code))throw new Error(`Multiple commands with code ${e.code}`);this.commands.set(e.code,e)}}}})),i.register("3V3fl",(function(e,t){var n=i("8tcqI").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BufferReader=e.exports.BufferWriter=e.exports.unsafeFrom64bitLE=e.exports.unsafeTo64bitLE=void 0;var r=i("jpwMo");function o(e){if(e>Number.MAX_SAFE_INTEGER)throw new Error("Can't convert numbers > MAX_SAFE_INT");const t=n.alloc(8,0);for(let n=0;n<t.length;n++){const r=255&e;t[n]=r,e=(e-r)/256}return t}function s(e){let t=0;if(8!=e.length)throw new Error("Expected Bufffer of lenght 8");if(0!=e[7])throw new Error("Can't encode numbers > MAX_SAFE_INT");if(e[6]>31)throw new Error("Can't encode numbers > MAX_SAFE_INT");for(let n=e.length-1;n>=0;n--)t=256*t+e[n];return t}e.exports.unsafeTo64bitLE=o,e.exports.unsafeFrom64bitLE=s;e.exports.BufferWriter=class{write(e,t){const r=n.alloc(e);t(r),this.bufs.push(r)}writeUInt8(e){this.write(1,(t=>t.writeUInt8(e,0)))}writeInt32(e){this.write(4,(t=>t.writeInt32LE(e,0)))}writeUInt32(e){this.write(4,(t=>t.writeUInt32LE(e,0)))}writeUInt64(e){const t=o(e);this.writeSlice(t)}writeVarInt(e){this.bufs.push((0,r.createVarint)(e))}writeSlice(e){this.bufs.push(n.from(e))}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}buffer(){return n.concat(this.bufs)}constructor(){this.bufs=[]}};e.exports.BufferReader=class{available(){return this.buffer.length-this.offset}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){return s(this.readSlice(8))}readVarInt(){const[e,t]=(0,r.parseVarint)(this.buffer,this.offset);return this.offset+=t,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){const e=(0,r.sanitizeBigintToNumber)(this.readVarInt());return this.readSlice(e)}readVector(){const e=this.readVarInt(),t=[];for(let n=0;n<e;n++)t.push(this.readVarSlice());return t}constructor(e,t=0){this.buffer=e,this.offset=t}}})),i.register("jpwMo",(function(e,t){var n=i("8tcqI").Buffer;function r(e,t,n){let r=BigInt(0);for(let o=0;o<n;o++){if(null==e[o+t])throw Error("Buffer too small");r+=BigInt(e[o+t])<<BigInt(8*o)}return r}function o(e){if(e<0)throw RangeError("Negative bigint is not a valid varint");if(e>Number.MAX_SAFE_INTEGER)throw RangeError("Too large for a Number");return Number(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createVarint=e.exports.parseVarint=e.exports.sanitizeBigintToNumber=void 0,e.exports.sanitizeBigintToNumber=o,e.exports.parseVarint=function(e,t){if(t<0)throw RangeError("Negative offset is invalid");if(null==e[t])throw Error("Buffer too small");if(e[t]<253)return[BigInt(e[t]),1];{let n;return n=253===e[t]?2:254===e[t]?4:8,[r(e,t+1,n),n+1]}},e.exports.createVarint=function(e){"number"==typeof e&&(e=o(e));const t=function(e){if("number"==typeof e&&(e=o(e)),e<BigInt(0))throw new RangeError("Negative numbers are not supported");if(e>=BigInt(1)<<BigInt(64))throw new RangeError("Too large for a Bitcoin-style varint");return e<BigInt(253)?1:e<=BigInt(65535)?3:e<=BigInt(4294967295)?5:9}(e);e=BigInt(e);const r=n.alloc(t);return 1==t?r[0]=Number(e):(r[0]=3==t?253:5===t?254:255,function(e,t,n,r){for(let o=0;o<t;o++){if(null==n[o+r])throw Error("Buffer too small");n[o+r]=Number(e%BigInt(256)),e>>=BigInt(8)}}(e,t-1,r,1)),r}})),i.register("6v8Fu",(function(e,t){var n=i("8tcqI").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hashLeaf=e.exports.Merkle=void 0;var r=i("dG1lS");e.exports.Merkle=class{getRoot(){return this.rootNode.hash}size(){return this.leaves.length}getLeaves(){return this.leaves}getLeafHash(e){return this.leafNodes[e].hash}getProof(e){if(e>=this.leaves.length)throw Error("Index out of bounds");return s(this.leafNodes[e])}calculateRoot(e){const t=e.length;if(0==t)return{root:new o(void 0,void 0,n.alloc(32,0)),leaves:[]};if(1==t){const t=new o(void 0,void 0,e[0]);return{root:t,leaves:[t]}}const r=function(e){if(e<2)throw Error("Expected n >= 2");return function(e){return 0==(e&e-1)}(e)?e/2:1<<Math.floor(Math.log2(e))}(t),i=this.calculateRoot(e.slice(0,r)),s=this.calculateRoot(e.slice(r)),a=i.root,c=s.root,u=this.hashNode(a.hash,c.hash),d=new o(a,c,u);return a.parent=d,c.parent=d,{root:d,leaves:i.leaves.concat(s.leaves)}}hashNode(e,t){return this.h(n.concat([n.from([1]),e,t]))}constructor(e,t=r.crypto.sha256){this.leaves=e,this.h=t;const n=this.calculateRoot(e);this.rootNode=n.root,this.leafNodes=n.leaves}},e.exports.hashLeaf=function(e,t=r.crypto.sha256){return function(e,t,r){return r(n.concat([e,t]))}(n.from([0]),e,t)};class o{isLeaf(){return null==this.leftChild}constructor(e,t,n){this.leftChild=e,this.rightChild=t,this.hash=n}}function s(e){if(!e.parent)return[];if(e.parent.leftChild==e){if(!e.parent.rightChild)throw new Error("Expected right child to exist");return[e.parent.rightChild.hash,...s(e.parent)]}if(!e.parent.leftChild)throw new Error("Expected left child to exist");return[e.parent.leftChild.hash,...s(e.parent)]}})),i.register("2Bu96",(function(e,t){var n=i("8tcqI").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MerkelizedPsbt=void 0;var r=i("luaUG"),o=i("dlwOE");class s extends o.PsbtV2{getGlobalSize(){return this.globalMap.size}getGlobalKeysValuesRoot(){return this.globalMerkleMap.commitment()}static createMerkleMap(e){const t=[...e.keys()].sort(),o=t.map((t=>{const n=e.get(t);if(!n)throw new Error("No value for key "+t);return n})),i=t.map((e=>n.from(e,"hex")));return new r.MerkleMap(i,o)}constructor(e){super(),this.inputMerkleMaps=[],this.outputMerkleMaps=[],e.copy(this),this.globalMerkleMap=s.createMerkleMap(this.globalMap);for(let e=0;e<this.getGlobalInputCount();e++)this.inputMerkleMaps.push(s.createMerkleMap(this.inputMaps[e]));this.inputMapCommitments=[...this.inputMerkleMaps.values()].map((e=>e.commitment()));for(let e=0;e<this.getGlobalOutputCount();e++)this.outputMerkleMaps.push(s.createMerkleMap(this.outputMaps[e]));this.outputMapCommitments=[...this.outputMerkleMaps.values()].map((e=>e.commitment()))}}e.exports.MerkelizedPsbt=s})),i.register("luaUG",(function(e,t){var n=i("8tcqI").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MerkleMap=void 0;var r=i("6v8Fu"),o=i("jpwMo");e.exports.MerkleMap=class{commitment(){return n.concat([(0,o.createVarint)(this.keys.length),this.keysTree.getRoot(),this.valuesTree.getRoot()])}constructor(e,t){if(e.length!=t.length)throw new Error("keys and values should have the same length");for(let t=0;t<e.length-1;t++)if(e[t].toString("hex")>=e[t+1].toString("hex"))throw new Error("keys must be in strictly increasing order");this.keys=e,this.keysTree=new r.Merkle(e.map((e=>(0,r.hashLeaf)(e)))),this.values=t,this.valuesTree=new r.Merkle(t.map((e=>(0,r.hashLeaf)(e))))}}})),i.register("dlwOE",(function(e,t){var n=i("8tcqI").Buffer,r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PsbtV2=e.exports.NoSuchEntry=e.exports.psbtOut=e.exports.psbtIn=e.exports.psbtGlobal=void 0;const a=s(i("dG1lS"));var c,u,d,l,p,f,h=i("3V3fl"),g=i("jpwMo");(u=c=e.exports.psbtGlobal||(e.exports.psbtGlobal={}))[u.UNSIGNED_TX=0]="UNSIGNED_TX",u[u.XPUB=1]="XPUB",u[u.TX_VERSION=2]="TX_VERSION",u[u.FALLBACK_LOCKTIME=3]="FALLBACK_LOCKTIME",u[u.INPUT_COUNT=4]="INPUT_COUNT",u[u.OUTPUT_COUNT=5]="OUTPUT_COUNT",u[u.TX_MODIFIABLE=6]="TX_MODIFIABLE",u[u.VERSION=251]="VERSION",(l=d=e.exports.psbtIn||(e.exports.psbtIn={}))[l.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",l[l.WITNESS_UTXO=1]="WITNESS_UTXO",l[l.PARTIAL_SIG=2]="PARTIAL_SIG",l[l.SIGHASH_TYPE=3]="SIGHASH_TYPE",l[l.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",l[l.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",l[l.BIP32_DERIVATION=6]="BIP32_DERIVATION",l[l.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",l[l.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",l[l.PREVIOUS_TXID=14]="PREVIOUS_TXID",l[l.OUTPUT_INDEX=15]="OUTPUT_INDEX",l[l.SEQUENCE=16]="SEQUENCE",l[l.TAP_KEY_SIG=19]="TAP_KEY_SIG",l[l.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",(f=p=e.exports.psbtOut||(e.exports.psbtOut={}))[f.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",f[f.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",f[f.BIP_32_DERIVATION=2]="BIP_32_DERIVATION",f[f.AMOUNT=3]="AMOUNT",f[f.SCRIPT=4]="SCRIPT",f[f.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION";const v=n.from([112,115,98,116,255]);class y extends Error{}e.exports.NoSuchEntry=y;function m(e,t,r,o){if(!e)throw Error("No such map");const i=new T(t,r),s=e.get(i.toString());if(!s){if(o)return;throw new y(i.toString())}return n.from(s)}e.exports.PsbtV2=class{setGlobalTxVersion(e){this.setGlobal(c.TX_VERSION,x(e))}getGlobalTxVersion(){return this.getGlobal(c.TX_VERSION).readUInt32LE(0)}setGlobalFallbackLocktime(e){this.setGlobal(c.FALLBACK_LOCKTIME,x(e))}getGlobalFallbackLocktime(){var e;return null===(e=this.getGlobalOptional(c.FALLBACK_LOCKTIME))||void 0===e?void 0:e.readUInt32LE(0)}setGlobalInputCount(e){this.setGlobal(c.INPUT_COUNT,O(e))}getGlobalInputCount(){return P(this.getGlobal(c.INPUT_COUNT))}setGlobalOutputCount(e){this.setGlobal(c.OUTPUT_COUNT,O(e))}getGlobalOutputCount(){return P(this.getGlobal(c.OUTPUT_COUNT))}setGlobalTxModifiable(e){this.setGlobal(c.TX_MODIFIABLE,e)}getGlobalTxModifiable(){return this.getGlobalOptional(c.TX_MODIFIABLE)}setGlobalPsbtVersion(e){this.setGlobal(c.VERSION,x(e))}getGlobalPsbtVersion(){return this.getGlobal(c.VERSION).readUInt32LE(0)}setInputNonWitnessUtxo(e,t){this.setInput(e,d.NON_WITNESS_UTXO,A(),t)}getInputNonWitnessUtxo(e){return this.getInputOptional(e,d.NON_WITNESS_UTXO,A())}setInputWitnessUtxo(e,t,n){const r=new h.BufferWriter;r.writeSlice(I(t)),r.writeVarSlice(n),this.setInput(e,d.WITNESS_UTXO,A(),r.buffer())}getInputWitnessUtxo(e){const t=this.getInputOptional(e,d.WITNESS_UTXO,A());if(!t)return;const n=new h.BufferReader(t);return{amount:(0,h.unsafeFrom64bitLE)(n.readSlice(8)),scriptPubKey:n.readVarSlice()}}setInputPartialSig(e,t,n){this.setInput(e,d.PARTIAL_SIG,t,n)}getInputPartialSig(e,t){return this.getInputOptional(e,d.PARTIAL_SIG,t)}setInputSighashType(e,t){this.setInput(e,d.SIGHASH_TYPE,A(),x(t))}getInputSighashType(e){const t=this.getInputOptional(e,d.SIGHASH_TYPE,A());if(t)return t.readUInt32LE(0)}setInputRedeemScript(e,t){this.setInput(e,d.REDEEM_SCRIPT,A(),t)}getInputRedeemScript(e){return this.getInputOptional(e,d.REDEEM_SCRIPT,A())}setInputWitnessScript(e,t){this.setInput(e,d.WITNESS_SCRIPT,A(),t)}getInputWitnessScript(e){return this.getInputOptional(e,d.WITNESS_SCRIPT,A())}setInputBip32Derivation(e,t,n,r){if(33!=t.length)throw new Error("Invalid pubkey length: "+t.length);this.setInput(e,d.BIP32_DERIVATION,t,this.encodeBip32Derivation(n,r))}getInputBip32Derivation(e,t){const n=this.getInputOptional(e,d.BIP32_DERIVATION,t);if(n)return this.decodeBip32Derivation(n)}setInputFinalScriptsig(e,t){this.setInput(e,d.FINAL_SCRIPTSIG,A(),t)}getInputFinalScriptsig(e){return this.getInputOptional(e,d.FINAL_SCRIPTSIG,A())}setInputFinalScriptwitness(e,t){this.setInput(e,d.FINAL_SCRIPTWITNESS,A(),t)}getInputFinalScriptwitness(e){return this.getInput(e,d.FINAL_SCRIPTWITNESS,A())}setInputPreviousTxId(e,t){this.setInput(e,d.PREVIOUS_TXID,A(),t)}getInputPreviousTxid(e){return this.getInput(e,d.PREVIOUS_TXID,A())}setInputOutputIndex(e,t){this.setInput(e,d.OUTPUT_INDEX,A(),x(t))}getInputOutputIndex(e){return this.getInput(e,d.OUTPUT_INDEX,A()).readUInt32LE(0)}setInputSequence(e,t){this.setInput(e,d.SEQUENCE,A(),x(t))}getInputSequence(e){var t,n;return null!==(n=null===(t=this.getInputOptional(e,d.SEQUENCE,A()))||void 0===t?void 0:t.readUInt32LE(0))&&void 0!==n?n:4294967295}setInputTapKeySig(e,t){this.setInput(e,d.TAP_KEY_SIG,A(),t)}getInputTapKeySig(e){return this.getInputOptional(e,d.TAP_KEY_SIG,A())}setInputTapBip32Derivation(e,t,n,r,o){if(32!=t.length)throw new Error("Invalid pubkey length: "+t.length);const i=this.encodeTapBip32Derivation(n,r,o);this.setInput(e,d.TAP_BIP32_DERIVATION,t,i)}getInputTapBip32Derivation(e,t){const n=this.getInput(e,d.TAP_BIP32_DERIVATION,t);return this.decodeTapBip32Derivation(n)}getInputKeyDatas(e,t){return this.getKeyDatas(this.inputMaps[e],t)}setOutputRedeemScript(e,t){this.setOutput(e,p.REDEEM_SCRIPT,A(),t)}getOutputRedeemScript(e){return this.getOutput(e,p.REDEEM_SCRIPT,A())}setOutputBip32Derivation(e,t,n,r){this.setOutput(e,p.BIP_32_DERIVATION,t,this.encodeBip32Derivation(n,r))}getOutputBip32Derivation(e,t){const n=this.getOutput(e,p.BIP_32_DERIVATION,t);return this.decodeBip32Derivation(n)}setOutputAmount(e,t){this.setOutput(e,p.AMOUNT,A(),I(t))}getOutputAmount(e){const t=this.getOutput(e,p.AMOUNT,A());return(0,h.unsafeFrom64bitLE)(t)}setOutputScript(e,t){this.setOutput(e,p.SCRIPT,A(),t)}getOutputScript(e){return this.getOutput(e,p.SCRIPT,A())}setOutputTapBip32Derivation(e,t,n,r,o){const i=this.encodeTapBip32Derivation(n,r,o);this.setOutput(e,p.TAP_BIP32_DERIVATION,t,i)}getOutputTapBip32Derivation(e,t){const n=this.getOutput(e,p.TAP_BIP32_DERIVATION,t);return this.decodeTapBip32Derivation(n)}deleteInputEntries(e,t){this.inputMaps[e].forEach(((e,n,r)=>{this.isKeyType(n,t)&&r.delete(n)}))}copy(e){this.copyMap(this.globalMap,e.globalMap),this.copyMaps(this.inputMaps,e.inputMaps),this.copyMaps(this.outputMaps,e.outputMaps)}copyMaps(e,t){e.forEach(((e,n)=>{const r=new Map;this.copyMap(e,r),t[n]=r}))}copyMap(e,t){e.forEach(((e,r)=>t.set(r,n.from(e))))}serialize(){const e=new h.BufferWriter;return e.writeSlice(n.from([112,115,98,116,255])),E(e,this.globalMap),this.inputMaps.forEach((t=>{E(e,t)})),this.outputMaps.forEach((t=>{E(e,t)})),e.buffer()}deserialize(e){const t=new h.BufferReader(e);if(!t.readSlice(5).equals(v))throw new Error("Invalid magic bytes");for(;this.readKeyPair(this.globalMap,t););let n,r,o;try{n=this.getGlobalPsbtVersion()}catch(e){n=0}if(0!==n&&2!==n)throw new Error("Only PSBTs of version 0 or 2 are supported");if(0==n){const e=this.getGlobal(c.UNSIGNED_TX),t=a.Transaction.fromBuffer(e);r=t.ins.length,o=t.outs.length}else r=this.getGlobalInputCount(),o=this.getGlobalOutputCount();for(let e=0;e<r;e++)for(this.inputMaps[e]=new Map;this.readKeyPair(this.inputMaps[e],t););for(let e=0;e<o;e++)for(this.outputMaps[e]=new Map;this.readKeyPair(this.outputMaps[e],t););this.normalizeToV2()}normalizeToV2(){var e;const t=null===(e=this.getGlobalOptional(c.VERSION))||void 0===e?void 0:e.readInt32LE(0);if(2===t)return;if(void 0!==t)throw new Error("Invalid or unsupported value for PSBT_GLOBAL_VERSION");const n=this.getGlobal(c.UNSIGNED_TX),r=a.Transaction.fromBuffer(n);this.setGlobalPsbtVersion(2),this.setGlobalTxVersion(r.version),this.setGlobalFallbackLocktime(r.locktime),this.setGlobalInputCount(r.ins.length),this.setGlobalOutputCount(r.outs.length);for(let e=0;e<r.ins.length;e++)this.setInputPreviousTxId(e,r.ins[e].hash),this.setInputOutputIndex(e,r.ins[e].index),this.setInputSequence(e,r.ins[e].sequence);for(let e=0;e<r.outs.length;e++)this.setOutputAmount(e,r.outs[e].value),this.setOutputScript(e,r.outs[e].script);this.globalMap.delete(c.UNSIGNED_TX.toString(16).padStart(2,"0"))}fromBitcoinJS(e){return this.setGlobalPsbtVersion(2),this.setGlobalTxVersion(e.version),this.setGlobalInputCount(e.data.inputs.length),this.setGlobalOutputCount(e.txOutputs.length),void 0!==e.locktime&&this.setGlobalFallbackLocktime(e.locktime),e.data.inputs.forEach(((t,n)=>{if(function(e){let t;try{a.payments.p2tr({output:e.witnessUtxo.script}),t=!0}catch(e){t=!1}return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||t)}(t))throw new Error("Taproot inputs not supported");this.setInputPreviousTxId(n,e.txInputs[n].hash),void 0!==e.txInputs[n].sequence&&this.setInputSequence(n,e.txInputs[n].sequence),this.setInputOutputIndex(n,e.txInputs[n].index),void 0!==t.sighashType&&this.setInputSighashType(n,t.sighashType),t.nonWitnessUtxo&&this.setInputNonWitnessUtxo(n,t.nonWitnessUtxo),t.witnessUtxo&&this.setInputWitnessUtxo(n,t.witnessUtxo.value,t.witnessUtxo.script),t.witnessScript&&this.setInputWitnessScript(n,t.witnessScript),t.redeemScript&&this.setInputRedeemScript(n,t.redeemScript),e.data.inputs[n].bip32Derivation.forEach((e=>{if(!/^m\//i.test(e.path))throw new Error("Invalid input bip32 derivation");const t=e.path.replace(/m\//i,"").split("/").map((e=>e.match(/['h]/i)?parseInt(e)+2147483648:Number(e)));this.setInputBip32Derivation(n,e.pubkey,e.masterFingerprint,t)}))})),e.txOutputs.forEach(((e,t)=>{this.setOutputAmount(t,e.value),this.setOutputScript(t,e.script)})),this}readKeyPair(e,t){const n=(0,g.sanitizeBigintToNumber)(t.readVarInt());if(0==n)return!1;return S(e,t.readUInt8(),t.readSlice(n-1),t.readVarSlice()),!0}getKeyDatas(e,t){const r=[];return e.forEach(((e,o)=>{this.isKeyType(o,[t])&&r.push(n.from(o.substring(2),"hex"))})),r}isKeyType(e,t){const r=n.from(e.substring(0,2),"hex").readUInt8(0);return t.some((e=>e==r))}setGlobal(e,t){const r=new T(e,n.from([]));this.globalMap.set(r.toString(),t)}getGlobal(e){return m(this.globalMap,e,A(),!1)}getGlobalOptional(e){return m(this.globalMap,e,A(),!0)}setInput(e,t,n,r){S(this.getMap(e,this.inputMaps),t,n,r)}getInput(e,t,n){return m(this.inputMaps[e],t,n,!1)}getInputOptional(e,t,n){return m(this.inputMaps[e],t,n,!0)}setOutput(e,t,n,r){S(this.getMap(e,this.outputMaps),t,n,r)}getOutput(e,t,n){return m(this.outputMaps[e],t,n,!1)}getMap(e,t){return t[e]?t[e]:t[e]=new Map}encodeBip32Derivation(e,t){const n=new h.BufferWriter;return this.writeBip32Derivation(n,e,t),n.buffer()}decodeBip32Derivation(e){const t=new h.BufferReader(e);return this.readBip32Derivation(t)}writeBip32Derivation(e,t,n){e.writeSlice(t),n.forEach((t=>{e.writeUInt32(t)}))}readBip32Derivation(e){const t=e.readSlice(4),n=[];for(;e.offset<e.buffer.length;)n.push(e.readUInt32());return{masterFingerprint:t,path:n}}encodeTapBip32Derivation(e,t,n){const r=new h.BufferWriter;return r.writeVarInt(e.length),e.forEach((e=>{r.writeSlice(e)})),this.writeBip32Derivation(r,t,n),r.buffer()}decodeTapBip32Derivation(e){const t=new h.BufferReader(e),n=(0,g.sanitizeBigintToNumber)(t.readVarInt()),r=[];for(let e=0;e<n;e++)r.push(t.readSlice(32));const o=this.readBip32Derivation(t);return Object.assign({hashes:r},o)}constructor(){this.globalMap=new Map,this.inputMaps=[],this.outputMaps=[]}};class T{toString(){const e=new h.BufferWriter;return this.toBuffer(e),e.buffer().toString("hex")}serialize(e){e.writeVarInt(1+this.keyData.length),this.toBuffer(e)}toBuffer(e){e.writeUInt8(this.keyType),e.writeSlice(this.keyData)}constructor(e,t){this.keyType=e,this.keyData=t}}class w{serialize(e){this.key.serialize(e),e.writeVarSlice(this.value)}constructor(e,t){this.key=e,this.value=t}}function b(e){return new T(e.readUInt8(0),e.slice(1))}function E(e,t){for(let[r,o]of[...t].sort((([e],[t])=>e.localeCompare(t)))){new w(b(n.from(r,"hex")),o).serialize(e)}e.writeUInt8(0)}function A(){return n.from([])}function S(e,t,n,r){const o=new T(t,n);e.set(o.toString(),r)}function x(e){const t=n.alloc(4);return t.writeUInt32LE(e,0),t}function I(e){return(0,h.unsafeTo64bitLE)(e)}function O(e){const t=new h.BufferWriter;return t.writeVarInt(e),t.buffer()}function P(e){return(0,g.sanitizeBigintToNumber)(new h.BufferReader(e).readVarInt())}})),i.register("5s6Ty",(function(e,t){var n=i("8tcqI").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DefaultWalletPolicy=e.exports.WalletPolicy=void 0;var r=i("dG1lS"),o=i("3V3fl"),s=i("6v8Fu");class a{getId(){return r.crypto.sha256(this.serialize())}serialize(){const e=this.keys.map((e=>n.from(e,"ascii"))),t=new s.Merkle(e.map((e=>(0,s.hashLeaf)(e)))),i=new o.BufferWriter;return i.writeUInt8(2),i.writeVarSlice(n.from(this.name,"ascii")),i.writeVarInt(this.descriptorTemplate.length),i.writeSlice(r.crypto.sha256(n.from(this.descriptorTemplate))),i.writeVarInt(this.keys.length),i.writeSlice(t.getRoot()),i.buffer()}constructor(e,t,n){this.name=e,this.descriptorTemplate=t,this.keys=n}}e.exports.WalletPolicy=a;e.exports.DefaultWalletPolicy=class extends a{constructor(e,t){super("",e,[t])}}})),i.register("irYom",(function(e,t){e.exports=i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("5Hh3e")).then((()=>i("aQ6v5")))})),i.register("bOnUg",(function(n,r){e(n.exports,"createEthereumChildAddressDeriver",(function(){return p}));var o=i("8tcqI"),s=i("8qXbd"),a=i("7cTdJ"),c=i("bU4Vn"),u=i("cFUcx"),d=i("85iHy");const l=(e,n,r)=>(e=>{const n=(0,a.sha256)((0,a.sha256)(e)).replace("0x","").slice(0,8);return t(d).encode(o.Buffer.concat([o.Buffer.from(e),o.Buffer.from(n,"hex")]))})(o.Buffer.from(`0488b21e04${e.replace("0x","")}00000000${n}${r.replace("0x","").toLowerCase()}`,"hex")),p=(e,t)=>{const n=(r=e.publicKey,(0,a.ripemd160)((0,a.sha256)((0,c.computePublicKey)(`0x${r}`,!0))).replace("0x","").slice(0,8));var r;const o=(0,c.computePublicKey)(`0x${t.publicKey}`,!0),i=l(n,t.chainCode,o),d=s.HDNode.fromExtendedKey(i);return e=>{const t=d.derivePath(`${e}`);if(u.EthAddress.safeParse(t.address).success)return{publicKey:t.publicKey,address:t.address};throw new Error(`Invalid Ethereum Child Address derived: ${t.address}`)}}})),i.register("5E8aH",(function(t,n){e(t.exports,"debugLog",(function(){return r}));const r=(e,t)=>{if(e){const e=new Date;console.log(`[${e.toISOString()}] ${t}`)}}})),i.register("led49",(function(t,n){e(t.exports,"useLedgerBLETransportState",(function(){return h}),(function(e){return h=e}));var r=i("RVqnc"),o=i("5ekp2"),s=i("bwiqA"),a=i("5E8aH"),c=i("5EX67"),u=i("dZ3qP"),d=i("20mzf"),l=i("dUHlc"),p=i("4GWtC"),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const h=(e,t,n)=>{const{deviceID:i,enabled:h=!0,enableDebugLogs:g=!1,refetchInterval:v=1e3,pairingTimeout:y=e.defaultTransportTimeout,expectedLedgerApp:m}=n,{data:T=!1}=(0,p.default)(e),w=!!i&&h&&T,b=l.hardwareQueryKeys.ledgerTransportState();return(0,o.useQuery)({enabled:w,queryKey:b,queryFn:()=>f(void 0,void 0,void 0,(function*(){if(!w)return s.LEDGER_NOT_CONNECTED_STATE;let n,o=t.getQueryData(b),l=!1,p=0;do{try{n=(yield Promise.all([(0,r.withTimeout)((0,d.fetchLedgerBLETransportState)(e,g,i,m),y),(0,r.delayAsync)(200)]))[0]}catch(e){n=s.LEDGER_NOT_CONNECTED_STATE}l=!!(null==o?void 0:o.isConnected)&&"not-connected"===n.status&&++p<5,l&&((0,u.setLedgerTransportStateOverride)(t,s.LEDGER_RECONNECTING_STATE),(0,a.debugLog)(g,"Attempting to reconnect..."),1===p&&(0,c.debugLogStateChange)(g,o,s.LEDGER_RECONNECTING_STATE),yield(0,r.delayAsync)(1e3))}while(l);return(0,c.debugLogStateChange)(g,o,n),p>0&&(o=s.LEDGER_RECONNECTING_STATE),(0,c.debugLogStateChange)(g,o,n),(null==o?void 0:o.isConnected)&&!n.isConnected&&(0,u.resetLedgerAddresses)(t).then((()=>(0,u.refetchLedgerAddresses)(t))),n})),refetchOnMount:!0,refetchInterval:v,initialData:s.LEDGER_NOT_CONNECTED_STATE})}})),i.register("bwiqA",(function(t,n){e(t.exports,"LEDGER_NOT_CONNECTED_STATE",(function(){return r})),e(t.exports,"LEDGER_RECONNECTING_STATE",(function(){return o})),e(t.exports,"LEDGER_WAITING_FOR_APPROVAL_STATE",(function(){return i})),e(t.exports,"DEFAULT_LEDGER_TRANSPORT_STATE",(function(){return s}));const r={status:"not-connected",isConnected:!1},o={status:"reconnecting",isConnected:!1},i={status:"waiting-for-approval",isConnected:!1},s=r})),i.register("5EX67",(function(t,n){e(t.exports,"debugLogStateChange",(function(){return s}));var r=i("4kKEQ"),o=i("5E8aH");const s=(e=!1,t,n)=>{if((null==t?void 0:t.status)===n.status)return;let i,s="";switch(n.status){case"connected":i="🟢 Connected",s=`, selected app: ${n.selectedApp?(0,r.getLedgerAppDisplayName)(n.selectedApp.app):"None"}`;break;case"needs-permission":i="🟠 Needs Permission";break;case"reconnecting":i="🟠 Reconnecting";break;case"waiting-for-approval":i="🟠 Waiting For Approval";break;case"not-connected":i="⚪️ Not Connected"}(0,o.debugLog)(e,`${i}${s}`)}})),i.register("dZ3qP",(function(t,n){e(t.exports,"resetLedgerAddresses",(function(){return s}),(function(e){return s=e})),e(t.exports,"refetchLedgerAddresses",(function(){return a}),(function(e){return a=e})),e(t.exports,"invalidateLedgerTransportState",(function(){return c}),(function(e){return c=e})),e(t.exports,"setLedgerTransportStateOverride",(function(){return u}),(function(e){return u=e}));var r=i("dUHlc"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const s=e=>o(void 0,void 0,void 0,(function*(){yield e.resetQueries([`${r.HARDWARE_BASE_QUERY_KEY}:ledger-addresses`])})),a=e=>o(void 0,void 0,void 0,(function*(){yield e.refetchQueries([`${r.HARDWARE_BASE_QUERY_KEY}:ledger-addresses`])})),c=e=>o(void 0,void 0,void 0,(function*(){yield e.invalidateQueries(r.hardwareQueryKeys.ledgerTransportState())})),u=(e,t)=>e.setQueryData(r.hardwareQueryKeys.ledgerTransportState(),t)})),i.register("20mzf",(function(t,n){e(t.exports,"fetchLedgerBLETransportState",(function(){return c}),(function(e){return c=e}));var r=i("bwiqA"),o=i("51YJE"),s=i("5E8aH"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=(e,t,n,i)=>a(void 0,void 0,void 0,(function*(){if(!n)return(0,s.debugLog)(t,"Attempting to connect to Ledger BLE device, no device ID specified."),r.LEDGER_NOT_CONNECTED_STATE;const a=yield e.open(n);if(!a)return(0,s.debugLog)(t,`Unable to connect to transport with deviceID: ${n}`),r.LEDGER_NOT_CONNECTED_STATE;return{status:"connected",isConnected:!0,transport:a,selectedApp:yield(0,o.getSelectedLedgerApp)(a,e.defaultTransportTimeout,i)}}))})),i.register("51YJE",(function(t,n){e(t.exports,"getSelectedLedgerApp",(function(){return u}),(function(e){return u=e}));var r=i("RVqnc"),o=i("e59pI"),s=i("bP9qo"),a=i("2B5FA"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const u=(e,t=2e3,n)=>c(void 0,void 0,void 0,(function*(){const i=()=>c(void 0,void 0,void 0,(function*(){const t=n?[n]:Object.values(o.LedgerApp);return((e,t)=>c(void 0,void 0,void 0,(function*(){for(const n of t)switch(n){case o.LedgerApp.Solana:try{const t=yield(0,a.getSolanaLedgerApp)(e),r=yield t.getAppConfiguration();return{app:n,version:r.version,blindSigningEnabled:r.blindSigningEnabled}}catch(e){}break;case o.LedgerApp.EVM:try{const t=yield(0,a.getEthereumLedgerApp)(e),r=yield t.getAppConfiguration();return{app:n,version:r.version,blindSigningEnabled:1===r.arbitraryDataEnabled}}catch(e){}break;case o.LedgerApp.Bitcoin:try{return{app:n,version:(yield(0,s.getBitcoinAppConfiguration)(e)).version}}catch(e){}}return null})))(e,t)}));try{return yield(0,r.withTimeout)(i(),t)}catch(e){return null}}))})),i.register("bP9qo",(function(t,n){e(t.exports,"getBitcoinAppConfiguration",(function(){return o}),(function(e){return o=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const o=e=>r(void 0,void 0,void 0,(function*(){const t=yield e.send(176,1,0,0);let n=0;if(1!==t[n++])throw new Error("getBitcoinAppConfiguration: format not supported");const r=t[n++],o=t.subarray(n,n+=r).toString("ascii");if("Bitcoin"!==o)throw new Error("Ledger Bitcoin app not selected.");const i=t[n++];return{name:o,version:t.subarray(n,n+=i).toString("ascii")}}))})),i.register("6epSx",(function(t,n){e(t.exports,"useLedgerWireTransportState",(function(){return g}),(function(e){return g=e}));var r=i("RVqnc"),o=i("5ekp2"),s=i("29o0l"),a=i("bwiqA"),c=i("5E8aH"),u=i("5EX67"),d=i("dZ3qP"),l=i("4NgK7"),p=i("dUHlc"),f=i("4GWtC"),h=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const g=(e,t,n=!0,i=!1,g=2e3)=>{const[v,y]=(0,s.useState)(g);(0,s.useEffect)((()=>{e.on("disconnect",(()=>{(0,c.debugLog)(i,"disconnect event received from Ledger transport."),(0,d.invalidateLedgerTransportState)(t)}))}),[e,t]);const{data:m=!1}=(0,f.default)(e),T=n&&m,w=p.hardwareQueryKeys.ledgerTransportState();return(0,o.useQuery)({enabled:T,queryKey:w,queryFn:()=>h(void 0,void 0,void 0,(function*(){if(!T)return a.LEDGER_NOT_CONNECTED_STATE;let n,o=t.getQueryData(w),s=!1,p=0;do{try{n=(yield Promise.all([(0,r.withTimeout)((0,l.fetchLedgerWireTransportState)(e,i,p>0?a.LEDGER_RECONNECTING_STATE:o),e.defaultTransportTimeout),(0,r.delayAsync)(200)]))[0]}catch(e){n=a.LEDGER_NOT_CONNECTED_STATE}s=!!(null==o?void 0:o.isConnected)&&"not-connected"===n.status&&++p<5,s&&((0,d.setLedgerTransportStateOverride)(t,a.LEDGER_RECONNECTING_STATE),(0,c.debugLog)(i,"Attempting to reconnect..."),1===p&&(0,u.debugLogStateChange)(i,o,a.LEDGER_RECONNECTING_STATE),yield(0,r.delayAsync)(500))}while(s);return p>0&&(o=a.LEDGER_RECONNECTING_STATE),(0,u.debugLogStateChange)(i,o,n),(null==o?void 0:o.isConnected)&&!n.isConnected&&(0,d.resetLedgerAddresses)(t).then((()=>(0,d.refetchLedgerAddresses)(t))),n})),onSuccess:e=>(e.isConnected?y(3500):y(g),null),refetchOnMount:!0,refetchInterval:v,initialData:a.LEDGER_NOT_CONNECTED_STATE})}})),i.register("4NgK7",(function(t,n){e(t.exports,"fetchLedgerWireTransportState",(function(){return c}),(function(e){return c=e}));var r=i("bwiqA"),o=i("51YJE"),s=i("5E8aH"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=(e,t,n)=>a(void 0,void 0,void 0,(function*(){if(0===(yield e.getNumDevices()))return n!==r.LEDGER_NOT_CONNECTED_STATE&&(0,s.debugLog)(t,"Unable to detect Ledger devices."),r.LEDGER_NOT_CONNECTED_STATE;let i=n?n.transport:void 0;if((null==n?void 0:n.isConnected)&&(null==n?void 0:n.selectedApp)||"waiting-for-approval"===(null==n?void 0:n.status))return n;if(i||(i=yield e.getFirstOpenedTransport(),i&&(0,s.debugLog)(t,"Found previously-opened transport.")),i||(i=yield e.openConnected(),i&&(0,s.debugLog)(t,"Opened a new connection to a previously-opened transport.")),!i)return(0,s.debugLog)(t,"Need permission to use the connected Ledger device."),{status:"needs-permission",isConnected:!1};return{status:"connected",isConnected:!0,transport:i,selectedApp:yield(0,o.getSelectedLedgerApp)(i,e.defaultTransportTimeout)}}))})),i.register("1yw5t",(function(t,n){e(t.exports,"default",(function(){return p}),(function(e){return p=e}));var r=i("5ekp2"),o=i("51YJE"),s=i("5E8aH"),a=i("5EX67"),c=i("dZ3qP"),u=i("dUHlc"),d=i("4NgK7"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},p=(e,t,n=!0,i=!1)=>{const p=u.hardwareQueryKeys.requestLedgerPermission();return(0,r.useQuery)({enabled:n,queryKey:p,queryFn:()=>l(void 0,void 0,void 0,(function*(){var n,r,l,p,f,h,g;let v;try{(0,s.debugLog)(i,"Requesting permission to connect to Ledger..."),v=yield e.request()}catch(o){if((0,s.debugLog)(i,`Received error trying to request permission: ${o}`),"string"==typeof o.message&&(null===(n=o.message)||void 0===n?void 0:n.includes("device is already open"))){(0,s.debugLog)(i,"✅ Permission granted, device already open. Connecting to device...");const n=u.hardwareQueryKeys.ledgerTransportState(),o=yield t.getQueryData(n);let h;try{h=yield(0,d.fetchLedgerWireTransportState)(e,i,o)}catch(e){}return(null==h?void 0:h.isConnected)?((0,s.debugLog)(i,`✅ Permission granted. Connected to Ledger device: ${null!==(l=null===(r=h.transport.deviceModel)||void 0===r?void 0:r.productName)&&void 0!==l?l:"Unknown device"}. Selected app: ${null!==(f=null===(p=null==h?void 0:h.selectedApp)||void 0===p?void 0:p.app)&&void 0!==f?f:"none"}`),yield(0,c.setLedgerTransportStateOverride)(t,h),(0,a.debugLogStateChange)(i,void 0,h),{type:"granted",transport:h.transport}):((0,s.debugLog)(i,"❌ Unable to connect. Try again and make sure device is unlocked."),{type:"unable-to-connect"})}return(0,s.debugLog)(i,"❌ Permission denied."),{type:"denied"}}if(!v){const e="Unable to connect to Ledger device. Permission granted, but no Transport received.";return(0,s.debugLog)(i,`❌ ${e}`),{type:"unable-to-connect"}}const y={status:"connected",isConnected:!0,transport:v,selectedApp:yield(0,o.getSelectedLedgerApp)(v,e.defaultTransportTimeout)};return yield(0,c.setLedgerTransportStateOverride)(t,y),(0,a.debugLogStateChange)(i,void 0,y),(0,s.debugLog)(i,`✅ Permission granted. Connected to Ledger device: ${null!==(g=null===(h=v.deviceModel)||void 0===h?void 0:h.productName)&&void 0!==g?g:"Unknown device"}`),{type:"granted",transport:v}})),cacheTime:0,staleTime:0,refetchOnMount:!0})}})),i.register("6ZHK3",(function(t,n){e(t.exports,"useNearbyLedgerBLEDevices",(function(){return o}));var r=i("29o0l");(e=>{const t=[];for(let o=1;o<=e;++o){const e=(n=0,r=3,n=Math.ceil(n),r=Math.floor(r),Math.floor(Math.random()*(r-n)+n));let i;i=0===e?0:1===e?-70:-100,t.push({name:`Nano X ${o}`,id:`${o}`,rssi:i})}var n,r;t.sort(((e,t)=>t.rssi-e.rssi))})(100);const o=(e,t)=>{const n=(0,r.useRef)([]),o=(0,r.useRef)(),[i,s]=(0,r.useState)([]);return(0,r.useEffect)((()=>{var r;if(!t)return void(null===(r=o.current)||void 0===r||r.unsubscribe());let i=n.current;const a=e.scan({onDeviceAdded:e=>{i=i.filter((t=>t.id!==e.id)),i.push(e),i.sort(((e,t)=>t.rssi-e.rssi));const t=[...i];n.current.length!==t.length&&(n.current=t,s(n.current))},onDeviceRemoved:e=>{i=i.filter((t=>t.id!==e.id)),i.sort(((e,t)=>t.rssi-e.rssi));const t=[...i];n.current.length!==t.length&&(n.current=t,s(n.current))},onError:e=>{var t;console.error(e),null===(t=o.current)||void 0===t||t.unsubscribe()}});return o.current=a,()=>{var e;null===(e=o.current)||void 0===e||e.unsubscribe()}}),[e,t]),i}})),i.register("d1qVj",(function(e,t){var n,r,o=i("dZ3qP");n=e.exports,r=o,Object.keys(r).forEach((function(e){"default"===e||"__esModule"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})}))})),i.register("5i9Ta",(function(t,n){e(t.exports,"getLedgerTransportState",(function(){return a}),(function(e){return a=e}));var r=i("bwiqA"),o=i("dUHlc"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=e=>s(void 0,void 0,void 0,(function*(){const t=yield e.getQueryData(o.hardwareQueryKeys.ledgerTransportState());return null!=t?t:r.LEDGER_NOT_CONNECTED_STATE}))})),i.register("dfz3b",(function(e,t){})),i.register("cWagW",(function(n,r){e(n.exports,"createLedgerWireSigner",(function(){return D}),(function(e){return D=e}));var o=i("8tcqI"),s=i("kIJ9R"),a=i("4v43U"),c=i("4xbAj"),u=i("jZpRu"),d=i("iOvk1"),l=i("7mQ3Y"),p=i("hMVEP"),f=i("csW2r"),h=i("RVqnc"),g=i("dG1lS"),v=i("85iHy"),y=i("MlrnL"),m=i("bwiqA"),T=i("4NgK7"),w=(i("9O68d"),i("e59pI")),b=i("eCWDh"),E=i("4kKEQ"),A=i("1yP1g"),S=i("2XRol"),x=i("2B5FA"),I=i("51YJE"),O=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const P=(e,n,r)=>O(void 0,void 0,void 0,(function*(){if(r.chainType!==l.AddressType.Solana)return(0,c.createVaultSignerError)(c.VaultSignerErrorType.InvalidAddressType);let s;try{s="string"==typeof r.message?"transaction"===r.signingType?t(v).decode(r.message):o.Buffer.from(r.message,"utf8"):r.message}catch(e){return(0,c.createVaultSignerError)(c.VaultSignerErrorType.InvalidMessageEncoding)}const a=yield(0,x.getSolanaLedgerApp)(e),u=n.replace("m/","");let d;switch(r.signingType){case"transaction":try{const e=yield a.signTransaction(u,o.Buffer.from(s));d=t(v).encode(e.signature)}catch(n){const r=yield((e,t)=>O(void 0,void 0,void 0,(function*(){try{const n=yield(0,I.getSelectedLedgerApp)(e);if(!n||n.app!==w.LedgerApp.Solana)return null;const r=(0,p.messageStringToTransaction)(t),{gte:o}=yield i("Vd0HA");return{isVersionedTx:"version"in r&&"legacy"!==r.version,isVersionedTxSupported:o(n.version,"1.3.1")}}catch(e){return null}})))(e,t(v).encode(s));if(!r)throw n;const{isVersionedTx:o,isVersionedTxSupported:a}=r;if(o&&!a)return(0,c.createVaultSignerError)(c.VaultSignerErrorType.UnsupportedOperation,"Versioned Transactions is not supported on this version of Ledger. Please upgrade your Solana Ledger firmware to version 1.3.1.");throw n}break;case"message":return(0,c.createVaultSignerError)(c.VaultSignerErrorType.UnsupportedOperation,"Signing off chain messages with Ledger is not yet supported.")}return{status:"success",signature:d}})),C=e=>e.startsWith("0x")?e:`0x${e}`,R=(e,t,n)=>O(void 0,void 0,void 0,(function*(){try{switch(n.chainType){case l.AddressType.BitcoinTaproot:case l.AddressType.BitcoinNativeSegwit:case l.AddressType.BitcoinNestedSegwit:case l.AddressType.BitcoinLegacy:return yield((e,t,n)=>O(void 0,void 0,void 0,(function*(){var r;if(!d.Chains.bitcoin.addressTypes.includes(n.chainType))return(0,c.createVaultSignerError)(c.VaultSignerErrorType.InvalidAddressType);const i=yield(0,x.getBitcoinLedgerApp)(e);switch(n.signingType){case"message":{const e=t.replace("m/",""),r=o.Buffer.from(n.message);return{status:"success",signature:yield i.signMessage(r,e)}}case"transaction":{const e=g.networks.bitcoin,s=g.Psbt.fromHex(n.message,{network:e});let a,p,f=!1,h=!1;const v=yield i.getMasterFingerprint(),m=(0,u.parseDerivationPath)(t).index;if(!m)return{status:"error",type:c.VaultSignerErrorType.InvalidDerivationPath,message:"Unsupported Derivation Path. Bitcoin derivation paths should have a valid index."};for(const e of null!==(r=n.inputsToSign)&&void 0!==r?r:[]){const t=(0,d.addressTypeFromAddress)(d.BitcoinNetworkID.Mainnet,e.address);for(const n of e.signingIndexes)if(t===l.AddressType.BitcoinNativeSegwit){const e=(0,b.getRelativeDerivationPath)("parent",u.DerivationPathType.BitcoinNativeSegwit);if(!f){f=!0;const t=yield i.getExtendedPubkey(e);a=yield(0,S.createHDNodeFromXpub)(t,"mainnet")}const t={masterFingerprint:o.Buffer.from(v,"hex"),pubkey:a.derivePath(`${m}`).publicKey,path:`${e}/${m}`};s.updateInput(n,{bip32Derivation:[t]})}else if(t===l.AddressType.BitcoinTaproot){const e=(0,b.getRelativeDerivationPath)("parent",u.DerivationPathType.BitcoinTaproot);if(!h){h=!0;const t=yield i.getExtendedPubkey(e);p=yield(0,S.createHDNodeFromXpub)(t,"mainnet")}const t={leafHashes:[],masterFingerprint:o.Buffer.from(v,"hex"),pubkey:p.derivePath(`${m}`).publicKey,path:`${e}/${m}`};s.updateInput(n,{tapBip32Derivation:[t]})}}if(h){const e=yield i.getExtendedPubkey((0,b.getRelativeDerivationPath)("grandparent",u.DerivationPathType.BitcoinTaproot)),t=new(0,y.DefaultWalletPolicy)("tr(@0/**)",`[${v}/86'/0'/0']${e}`),n=yield i.signPsbt(s.toBase64(),t,null);for(const e of n)s.updateInput(e[0],{tapKeySig:e[1].signature})}if(f){const e=yield i.getExtendedPubkey((0,b.getRelativeDerivationPath)("grandparent",u.DerivationPathType.BitcoinNativeSegwit)),t=new(0,y.DefaultWalletPolicy)("wpkh(@0/**)",`[${v}/84'/0'/0']${e}`),n=yield i.signPsbt(s.toBase64(),t,null);for(const e of n)s.updateInput(e[0],{partialSig:[e[1]]})}return s.finalizeAllInputs(),{status:"success",signature:s.toBase64()}}}})))(e,t,n);case l.AddressType.EVM:return yield((e,t,n)=>O(void 0,void 0,void 0,(function*(){if(n.chainType!==l.AddressType.EVM)return(0,c.createVaultSignerError)(c.VaultSignerErrorType.InvalidAddressType);const r=yield(0,x.getEthereumLedgerApp)(e),i=t.replace("m/","");switch(n.signingType){case"typedData":switch(n.version){case 1:return(0,c.createVaultSignerError)(c.VaultSignerErrorType.UnsupportedOperation);case 3:case 4:{const e=()=>O(void 0,void 0,void 0,(function*(){const e=(0,A.convertSignTypedDataToEip712Message)(n.data);return r.signEIP712Message(i,e)})),t=()=>O(void 0,void 0,void 0,(function*(){const e=3===n.version?a.SignTypedDataVersion.V3:a.SignTypedDataVersion.V4,t=n.data,o=a.TypedDataUtils.sanitizeData(t),s=a.TypedDataUtils.hashStruct("EIP712Domain",o.domain,o.types,e).toString("hex"),c=a.TypedDataUtils.hashStruct(o.primaryType,o.message,o.types,e).toString("hex");return yield r.signEIP712HashedMessage(i,s,c)})),{r:o,s:c,v:u}=yield e().catch(t);return{status:"success",signature:(0,s.joinSignature)({r:C(o),s:C(c),v:u})}}}break;case"message":{const e=o.Buffer.from(n.message,"utf8"),{r:t,s:a,v:c}=yield r.signPersonalMessage(i,e.toString("hex"));return{status:"success",signature:(0,s.joinSignature)({r:C(t),s:C(a),v:c})}}case"transaction":{const e=n.message.replace("0x",""),t=yield(0,x.getEthereumLedgerService)(),o=yield t.resolveTransaction(e,{},{}),{r:a,s:c,v:u}=yield r.signTransaction(i,e,o);return{status:"success",signature:(0,s.joinSignature)({r:C(a),s:C(c),v:Number.parseInt(u.replace("0x",""),16)})}}}})))(e,t,n);case l.AddressType.Solana:return yield P(e,t,n)}}catch(e){return f.telemetry.captureError(e,f.FeatureTag.Ledger),(0,c.createVaultSignerError)(c.VaultSignerErrorType.InternalError)}})),D=e=>({type:c.VaultSignerPluginType.Ledger,sign:(t,n,r)=>O(void 0,void 0,void 0,(function*(){var t;let o,i=m.LEDGER_NOT_CONNECTED_STATE;try{i=yield(0,h.withRetry)((()=>(0,h.withTimeout)((0,T.fetchLedgerWireTransportState)(e,!1),e.defaultTransportTimeout)),(()=>!0),3,1e3)}catch(e){}switch(i.status){case"needs-permission":return(0,c.createVaultSignerError)(c.VaultSignerErrorType.LedgerNeedPermission,"Need permission to connect to Ledger.");case"not-connected":case"reconnecting":case"waiting-for-approval":return(0,c.createVaultSignerError)(c.VaultSignerErrorType.LedgerNotConnected,"Unable to connect to Ledger. Make sure your Ledger device is plugged in.");case"connected":{const e=(0,E.getLedgerAppForAddressType)(r.chainType);if((null===(t=i.selectedApp)||void 0===t?void 0:t.app)!==e)return(0,c.createVaultSignerError)(c.VaultSignerErrorType.LedgerAppNotOpen,`Ledger App not open. Open the ${(0,E.getLedgerAppDisplayName)(e)} app on your Ledger device.`);o=i.transport}}return R(o,n,r)}))})})),i.register("1yP1g",(function(t,n){e(t.exports,"convertSignTypedDataToEip712Message",(function(){return r}));const r=e=>{var t;const n={name:e.domain.name,version:e.domain.version,verifyingContract:e.domain.verifyingContract,chainId:null===(t=e.domain)||void 0===t?void 0:t.chainId},r=[],o={};for(const[t,n]of Object.entries(e.types))for(const e of n)"EIP712Domain"===t?r.push(e):t in o?o[t].push(e):o[t]=[e];return{domain:n,types:Object.assign({EIP712Domain:r},o),primaryType:e.primaryType,message:Object.assign({},e.message)}}})),i.register("Vd0HA",(function(e,t){e.exports=i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("4nmlj")).then((()=>i("4TDRm")))})),i.register("g9PKp",(function(t,n){e(t.exports,"createOnboardingHooks",(function(){return i("89Vzt").createOnboardingHooks})),e(t.exports,"BATCH_SIZE_BY_PLATFORM",(function(){return i("1eGkH").BATCH_SIZE_BY_PLATFORM})),e(t.exports,"useSelectMultichainAccountsProps",(function(){return i("1eGkH").useSelectMultichainAccountsProps})),e(t.exports,"ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT",(function(){return i("vUpML").ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT})),e(t.exports,"OnboardingStorageKeys",(function(){return i("d08rP").OnboardingStorageKeys})),e(t.exports,"OnboardingType",(function(){return i("7cOUp").OnboardingType})),e(t.exports,"discoverAccounts",(function(){return i("hwACv").discoverAccounts}));i("89Vzt"),i("1eGkH"),i("8taMK"),i("jFh3h"),i("vUpML"),i("d08rP"),i("7cOUp"),i("7n0ia"),i("hl6Md"),i("hwACv"),i("fGTlj"),i("cZNQz")})),i.register("89Vzt",(function(t,n){e(t.exports,"createOnboardingHooks",(function(){return p}));var r=i("hl6Md"),o=i("l7a7Z"),s=i("fZg4E"),a=i("1vrFI"),c=i("eiyTy"),u=i("1loje"),d=i("aQ1g3"),l=i("3bN09");function p(e,t,n,i,p){const f=new(0,r.LedgerOnboardingAnalytics)(n);return{useIsFirstTimeOnboarding:()=>(0,a.useIsFirstTimeOnboarding)(e),useSetIsFirstTimeOnboarding:()=>(0,a.useSetIsFirstTimeOnboarding)(e,t),useIsResettingApp:()=>(0,c.useIsResettingApp)(e),useSetIsResettingApp:()=>(0,c.useSetIsResettingApp)(e,t),useSetIsFirstTimeResettingApp:()=>(0,c.useSetIsFirstTimeResettingApp)(e,t),useDeriveLedgerAccounts:e=>(0,o.useDeriveLedgerAccounts)(i,t,f,e),useDiscoverLedgerAccounts:e=>(0,s.useDiscoverLedgerAccounts)(f,e),useTermsAcknowledgement:()=>(0,d.useTermsAcknowledgement)(e,p),useWhatsNewOverlay:()=>(0,l.useWhatsNewOverlay)(e),useSetTermsAcknowledgement:()=>(0,u.useSetTermsAcknowledgement)(e,t),useSetAcknowledgeWhatsNewOverlay:()=>(0,l.useSetAcknowledgeWhatsNewOverlay)(e,t)}}})),i.register("hl6Md",(function(t,n){e(t.exports,"LedgerOnboardingAnalytics",(function(){return d}),(function(e){return d=e}));var r=i("iOvk1");i("eJxop");var o,s=i("e59pI"),a=i("7mQ3Y"),c=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},u=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class d{constructor(e){o.set(this,void 0),this.onOpen=()=>u(this,o,"f").capture("connectHardwareOpen"),this.onSelectedChains=e=>{const t=new Set(e),n=[];for(const e of r.Chains.getAllChainIDs())t.has(e)&&n.push(e);const i={numChains:n.length,selectedChains:n.map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(", ")};u(this,o,"f").capture("connectHardwareSelectedChains",{data:i})},this.onDerivedAccounts=e=>{const t={};for(const[n,r]of Object.entries(e.derivedAddresses)){if(!l(n))continue;const e={numberOfDerivedAccounts:r.addresses.length};void 0!==r.duration&&(e.derivationDuration=r.duration),t[n]=e}u(this,o,"f").capture("connectHardwareAccountsDerived",{data:Object.assign({},t)})},this.onDiscoveredAccounts=e=>{var t;const{discoveredAccounts:n}=e,r={};for(const e of n){if("undiscovered"===e.status)continue;const n=e.accounts.reduce(((e,{derivationPathType:t,hasAccountActivity:n})=>(e[a.AddressTypes.getAddressType(t)]={derivationPathType:t,hasAccountActivity:n},e)),{});for(const{hasAccountActivity:e,derivationPathType:o}of Object.values(n)){if(!e)continue;const n=null!==(t=r[o])&&void 0!==t?t:0;r[o]=n+1}}u(this,o,"f").capture("connectHardwareAccountsDiscovered",{data:{numberOfActiveAccounts:r}})},this.onConnectedAccounts=e=>{var t;const n={};for(const r of e.accounts){const e=[...r.addresses,...r.publicKeys].reduce(((e,t)=>(e[a.AddressTypes.getAddressType(t.pathType)]=t.pathType,e)),{});for(const r of Object.values(e)){const e=null!==(t=n[r])&&void 0!==t?t:0;n[r]=e+1}}u(this,o,"f").capture("connectHardwareAccountsConnected",{data:{numberOfAccountsImported:e.accounts.length,numberOfAccountsImportedByDerivationPath:n}})},c(this,o,e,"f")}}function l(e){return"string"==typeof e&&Object.keys(s.LedgerApp).includes(e)}o=new WeakMap})),i.register("l7a7Z",(function(t,n){e(t.exports,"useDeriveLedgerAccounts",(function(){return l}),(function(e){return l=e})),i("eJxop");var r=i("bwiqA"),o=i("5i9Ta"),s=i("5ekp2"),a=i("29o0l"),c=i("aJdXK"),u=i("jFh3h"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const l=(e,t,n,i)=>{var l;const{selectedChains:p,ledgerTransportState:f=r.LEDGER_NOT_CONNECTED_STATE}=i,h=p.length>0&&f.isConnected,g=u.onboardingQueryKeys.deriveLedgerAccounts,v=f.isConnected?null===(l=f.selectedApp)||void 0===l?void 0:l.app:void 0;(0,a.useEffect)((()=>{v&&t.invalidateQueries(g)}),[v,t,g]);return(0,s.useQuery)({enabled:h,queryKey:g,queryFn:()=>d(void 0,void 0,void 0,(function*(){const r=yield t.getQueryData(g);return(0,c.deriveLedgerAccounts)(Object.assign(Object.assign({ledgerDeps:e,queryClient:t,ledgerOnboardingAnalytics:n,queryKey:g},i),{ledgerTransportState:yield(0,o.getLedgerTransportState)(t),previousResponse:r}))})),retry:!1})}})),i.register("aJdXK",(function(t,n){e(t.exports,"deriveLedgerAccounts",(function(){return f}),(function(e){return f=e}));var r=i("jZpRu"),o=i("iOvk1");i("eJxop");var s=i("4kKEQ"),a=i("54Y8k"),c=i("vUpML"),u=i("1wrYO"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const l={ledgerAppsToDerive:[],currentlyDerivingNetworkIDs:[],derivedAddresses:{}},p=(e,t)=>e.map((e=>({ledgerApp:e,status:t[e]?"complete":"incomplete"}))),f=e=>d(void 0,void 0,void 0,(function*(){var t;const{ledgerDeps:n,queryClient:i,ledgerOnboardingAnalytics:d,queryKey:f,selectedChains:h,enableDebugLogs:g=!0,enableLedgerXPubDerivation:v=!0,ledgerTransportState:y,previousResponse:m=l}=e;if(!(({selectedChains:e,ledgerTransportState:t})=>e.length>0&&t.isConnected)(e))return{ledgerAppsToDerive:[],currentlyDerivingNetworkIDs:[],derivedAddresses:{}};const T=m.derivedAddresses,w=new Set(h),b=o.Chains.getAllNetworkIDs({mainnetOnly:!0}).filter((e=>{const t=o.Chains.getChainID(e);return w.has(t)})),E=Array.from(b.map((e=>(0,s.getLedgerAppForNetworkID)(e))).reduce(((e,t)=>(e.add(t),e)),new Set)),A=p(E,T),S=A.find((e=>"incomplete"===e.status));if(!S)return{ledgerAppsToDerive:[],currentlyDerivingNetworkIDs:[],derivedAddresses:T};const{ledgerApp:x}=S,I=A.filter((e=>"incomplete"===e.status)).map((e=>e.ledgerApp)),O=b.filter((e=>(0,s.getLedgerAppForNetworkID)(e)===x));if(i.setQueryData(f,{ledgerAppsToDerive:I,currentlyDerivingNetworkIDs:O,derivedAddresses:T}),!y.isConnected||(null===(t=y.selectedApp)||void 0===t?void 0:t.app)!==x)return{ledgerAppsToDerive:I,currentlyDerivingNetworkIDs:O,derivedAddresses:T};const P=(0,u.createLedgerOnboardingParams)(x,c.LEDGER_ONBOARDING_INDICES_TO_DERIVE);let C;const R=yield(0,a.deriveLedgerAddresses)({transportTimeout:n.defaultTransportTimeout,state:y,derivationPathParams:P,enableDebugLogs:g,enableLedgerXPubDerivation:v,onSuccess:e=>{C=e}}),D=P.map((e=>{const t=(0,r.getDerivationPath)(e),n=R[t];return{paramsUsed:e,address:n.address,publicKey:n.publicKey}})),k=Object.assign(Object.assign({},T),{[x]:{addresses:D,duration:C}}),L=p(E,k).filter((e=>"incomplete"===e.status)).map((e=>e.ledgerApp)),N=0===L.length?[]:b.filter((e=>(0,s.getLedgerAppForNetworkID)(e)===L[0])),M={ledgerAppsToDerive:L,currentlyDerivingNetworkIDs:N,derivedAddresses:k};return 0===L.length&&d.onDerivedAccounts(M),M}))})),i.register("vUpML",(function(t,n){e(t.exports,"LEDGER_ONBOARDING_INDICES_TO_DERIVE",(function(){return o})),e(t.exports,"ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT",(function(){return s}));var r=i("d08rP");const o=19,s=[r.OnboardingStorageKeys.FirstTimeOnboarding,r.OnboardingStorageKeys.IsResettingApp]})),i.register("d08rP",(function(t,n){var r,o;e(t.exports,"OnboardingStorageKeys",(function(){return r})),(o=r||(r={})).FirstTimeOnboarding="firstTimeOnboarding",o.IsResettingApp="isResettingApp"})),i.register("1wrYO",(function(t,n){e(t.exports,"createLedgerOnboardingParams",(function(){return s}));var r=i("jZpRu");i("eJxop");var o=i("e59pI");const s=(e,t)=>{const n=[];e===o.LedgerApp.Solana?n.push({pathType:r.DerivationPathType.Bip44RootSolana}):e===o.LedgerApp.EVM&&n.push({pathType:r.DerivationPathType.Bip44RootEthereum});for(let i=0;i<t;++i)switch(e){case o.LedgerApp.Solana:n.push({index:i,pathType:r.DerivationPathType.Bip44ChangeSolana}),n.push({index:i,pathType:r.DerivationPathType.Bip44Solana});break;case o.LedgerApp.EVM:n.push({index:i,pathType:r.DerivationPathType.Bip44Ethereum}),n.push({index:i,pathType:r.DerivationPathType.Bip44EthereumSecondary});break;case o.LedgerApp.Bitcoin:n.push({index:i,pathType:r.DerivationPathType.BitcoinTaproot}),n.push({index:i,pathType:r.DerivationPathType.BitcoinNativeSegwit})}return n}})),i.register("jFh3h",(function(t,n){e(t.exports,"onboardingQueryKeys",(function(){return o}));const r="@phantom/onboarding",o={firstTimeOnboarding:[`${r}:first-time-onboarding`],isResettingApp:[`${r}:is-resetting-app`],deriveLedgerAccounts:[`${r}:derive-ledger-accounts`],discoverLedgerAccounts:[`${r}:discover-ledger-accounts`]}})),i.register("fZg4E",(function(t,n){e(t.exports,"useDiscoverLedgerAccounts",(function(){return c}),(function(e){return c=e}));var r=i("5ekp2"),o=i("57b0z"),s=i("jFh3h"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=(e,t)=>{const n=(0,o.isDiscoverLedgerAccountsEnabled)(t),i=s.onboardingQueryKeys.discoverLedgerAccounts;return(0,r.useQuery)({enabled:n,queryKey:i,queryFn:()=>a(void 0,void 0,void 0,(function*(){return(0,o.discoverLedgerAccounts)(Object.assign({ledgerOnboardingAnalytics:e},t))}))})}})),i.register("57b0z",(function(t,n){e(t.exports,"isDiscoverLedgerAccountsEnabled",(function(){return p}),(function(e){return p=e})),e(t.exports,"discoverLedgerAccounts",(function(){return f}),(function(e){return f=e}));var r=i("4xbAj"),o=i("iOvk1");i("eJxop");var s=i("4kKEQ"),a=i("4vX1O"),c=i("creZv"),u=i("hwACv"),d=i("cZNQz"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const p=({existingAccountsFetched:e,selectedChains:t,deriveLedgerAccountsResponse:n})=>e&&t.length>0&&!!n&&0===n.ledgerAppsToDerive.length,f=e=>l(void 0,void 0,void 0,(function*(){var t,n,i,l,f;const{ledgerOnboardingAnalytics:h,existingAccounts:g,discoveryBatchSize:v,selectedChains:y,deriveLedgerAccountsResponse:m,retryDiscoverAccountsOnFail:T=!0}=e;if(!p(e))throw new Error("Query disabled.");const w={},b=new Set(y);for(const e of o.Chains.getAllNetworkIDs({mainnetOnly:!0})){if(!b.has(o.Chains.getChainID(e)))continue;const c=(0,s.getLedgerAppForNetworkID)(e),u=null!==(i=null===(n=(null!==(t=null==m?void 0:m.derivedAddresses)&&void 0!==t?t:{})[c])||void 0===n?void 0:n.addresses)&&void 0!==i?i:[];for(const{address:t,publicKey:n,paramsUsed:o}of u){const i=(0,r.getDerivationPathGroupKey)(o),s=null!==(l=w[i])&&void 0!==l?l:{accounts:{},derivationIndex:null!==(f=o.index)&&void 0!==f?f:-1};s.accounts[`${e}-${t}`]={chainType:(0,a.getAddressTypeFromDerivationPathType)(o.pathType),chainId:e,address:t,publicKey:n,pathParams:o},w[i]=s}}const E=Object.entries(w).sort((([e,t],[n,o])=>(0,r.compareDerivationPathGroup)(e,n))).map((([e,t])=>t)),A=(0,d.getExistingAddressesSet)(g),S=E.reduce(((e,t)=>{let n=!1;for(const{address:e}of Object.values(t.accounts))n=n||A.has(e);return n||e.push(t),e}),[]),x=[],I=[];for(let e=0;e<S.length;e+=v){const t=S.slice(e,e+v).map((e=>Object.entries(e.accounts).reduce(((e,[t,n])=>(e[t]={account:n},e)),{})));I.push(t)}for(const e of I)x.push((0,u.discoverAccounts)(e,T));const O=(yield Promise.all(x)).flat().map((e=>{switch(e.status){case"discovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>e.hasAccountActivity||(0,r.isRecommendedDerivationPathType)(e.derivationPathType)))});case"undiscovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>(0,r.isRecommendedDerivationPathType)(e.derivationPathType)))})}})).filter((e=>e.accounts.length>0)).map((e=>{const t=(0,c.default)();return Object.assign(Object.assign({},e),{discoveryIdentifier:t})})),P=O.filter((e=>"undiscovered"===e.status||e.isSelectedByDefault)),C=O.filter((e=>!("undiscovered"===e.status||e.isSelectedByDefault))).slice(0,2),R=P.length>0,D=g.filter((e=>e.type===r.AccountType.Ledger)).length,k=(R?[...P,...C]:O.slice(0,3)).map(((e,t)=>Object.assign(Object.assign({},e),{accountIndex:D+t}))),L={};k.forEach(((e,t)=>{("discovered"===e.status&&e.isSelectedByDefault||0===t)&&(L[e.discoveryIdentifier]=!0)}));const N={discoveredAccounts:k,activeAccountsFound:R,defaultSelectedAccounts:L};return h.onDiscoveredAccounts(N),N}))})),i.register("hwACv",(function(t,n){e(t.exports,"discoverAccounts",(function(){return m}),(function(e){return m=e})),e(t.exports,"useDiscoverMultiChainAccounts",(function(){return w}),(function(e){return w=e}));var r=i("4xbAj"),o=i("jZpRu"),s=i("iOvk1"),a=i("7mQ3Y"),c=i("csW2r"),u=i("RVqnc"),d=i("wGjeD"),l=i("fGTlj"),p=i("8tcqI").Buffer,f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const h="fetch-multi-chain-accounts-by-seed",g=(e,t)=>[o.DerivationPathType.BitcoinTaproot,o.DerivationPathType.BitcoinNativeSegwit].map((n=>{const r={pathType:n,index:e},{publicKey:o}=t.derivePathType(n,e),i=a.AddressTypes.getAddressType(n),c=(0,a.publicKeyToAddress)({publicKey:o,addressType:i});return{chainType:i,chainId:s.NetworkIDs.Bitcoin.Mainnet,address:c,publicKey:p.from(o).toString("hex"),pathParams:r}})),v=(e,t)=>[o.DerivationPathType.Bip44Ethereum,o.DerivationPathType.Bip44EthereumSecondary,o.DerivationPathType.Bip44EthereumTertiary].map((n=>{const r={pathType:n,index:e},{publicKey:o}=t.derivePathType(n,e);return{chainType:a.AddressTypes.getAddressType(n),pathType:n,address:(0,a.publicKeyToAddress)({publicKey:o,addressType:a.AddressType.EVM}),publicKey:p.from(o).toString("hex"),pathParams:r}})),y=(e,t)=>[o.DerivationPathType.Bip44ChangeSolana,o.DerivationPathType.Bip44Solana,o.DerivationPathType.DeprecatedSolana].map((n=>{const r={pathType:n,index:e},{publicKey:o}=t.derivePathType(n,e),i=(0,a.publicKeyToAddress)({publicKey:o,addressType:a.AddressType.Solana});return{chainType:a.AddressType.Solana,chainId:s.NetworkIDs.Solana.Mainnet,address:i,publicKey:p.from(o).toString("hex"),pathParams:r}})),m=(e,t=!0)=>f(void 0,void 0,void 0,(function*(){const n=Object.assign({},...e);try{const e=Object.values(n).map((({account:e})=>({address:e.address,chainId:e.chainId})));let o;o=t?(yield(0,u.withRetry)((()=>f(void 0,void 0,void 0,(function*(){return(0,u.withTimeout)((0,l.fetchDiscoverAccounts)({accounts:e}),1e4)}))),(()=>!0),2)).accounts:(yield(0,l.fetchDiscoverAccounts)({accounts:e})).accounts;const i={};for(const e of o){const{account:t}=n[`${e.chain.id}-${e.address}`],o=t.publicKey,s=t.chainType,a=(0,r.getDerivationPathGroupKey)(t.pathParams),c=Object.assign(Object.assign({},e),{publicKey:o,chainType:s,derivationPathType:t.pathParams.pathType,hasAccountActivity:!!e.lastActivityTimestamp||parseFloat(e.amount)>0});i[a]=[...i[a]||[],c]}Object.keys(i).forEach((e=>{i[e]=i[e].sort(((e,t)=>s.Chains.compareNetworkID(e.chain.id,t.chain.id)))}));const a=Object.values(i),c=a.filter((e=>e.some((e=>e.hasAccountActivity)))),d=!!c.length;return(d?c:a).map((e=>{var t;const r=e[0];return{status:"discovered",seedIndex:null!==(t=n[`${r.chain.id}-${r.address}`].account.pathParams.index)&&void 0!==t?t:-1,isSelectedByDefault:d,accounts:e}}))}catch(e){const t=Object.values(n).map((({account:e})=>e)),o={};for(const e of t){const{account:t}=n[`${e.chainId}-${e.address}`],i=(0,r.getDerivationPathGroupKey)(t.pathParams),c=Object.assign(Object.assign({},e),{chain:{id:e.chainId,name:s.Chains.getNetworkName(e.chainId),symbol:s.Chains.getTokenSymbol(e.chainId)},chainType:a.AddressTypes.getAddressType(t.pathParams.pathType),derivationPathType:t.pathParams.pathType,hasAccountActivity:!1});o[i]=[...o[i]||[],c]}Object.keys(o).forEach((e=>{o[e]=o[e].sort(((e,t)=>s.Chains.compareNetworkID(e.chain.id,t.chain.id)))}));const i=Object.values(o).map((e=>{var t;const r=e[0];return{status:"undiscovered",seedIndex:null!==(t=n[`${r.chain.id}-${r.address}`].account.pathParams.index)&&void 0!==t?t:-1,accounts:e,isSelectedByDefault:!1}}));return i}})),T=({hdWallet:e,startIndex:t,endIndex:n,enabledAddressTypes:r})=>f(void 0,void 0,void 0,(function*(){const o=[];for(let i=t;i<=n;++i){const t={};if(r.includes(a.AddressType.BitcoinNativeSegwit))for(const n of g(i,e))t[`${s.NetworkIDs.Bitcoin.Mainnet}-${n.address}`]={account:n};if(r.includes(a.AddressType.EVM)){const n=v(i,e),r=s.Chains.getChainIDs(a.AddressType.EVM);for(const e of r){const r=s.Chains[e];for(const{address:e,publicKey:o,chainType:i,pathParams:s}of n)t[`${r.mainnetID}-${e}`]={account:{chainType:i,chainId:r.mainnetID,address:e,publicKey:o,pathParams:s}}}}if(r.includes(a.AddressType.Solana))for(const n of y(i,e))t[`${n.chainId}-${n.address}`]={account:n};o.push(t)}return m(o)}));function w({batchSize:e,hdWallet:t,enabledAddressTypes:n}){const r=!!t&&0!=n.length,o=[h,e];return(0,d.useInfiniteQuery)({enabled:r,queryKey:o,queryFn:({pageParam:r=0})=>f(this,void 0,void 0,(function*(){if(e<1)throw new Error(`Need positive batchSize: ${e}`);if(!t)throw new Error("Missing HDWallet");const o=[],i=[],s=0===r;let a=r,c=!0;for(;c;){const r=a,u=a+e-1,d=(yield T({hdWallet:t,startIndex:r,endIndex:u,enabledAddressTypes:n})).flat(1);a+=e,c=!1;for(const e of d)o.push(e),("undiscovered"===e.status||e.isSelectedByDefault)&&i.push(e),s&&"discovered"===e.status&&e.isSelectedByDefault&&(c=!0)}if(s&&0===i.length&&o.length>1){const e=o[0],t=e.accounts.map((e=>Object.assign(Object.assign({},e),{hasAccountActivity:!1}))),n={status:"undiscovered",seedIndex:e.seedIndex,accounts:t,isSelectedByDefault:!1};i.push(n)}return i})),getNextPageParam:(t,n)=>{const r=n.length,o=r?n[0]:[],i=o.length?b(o[o.length-1].seedIndex,e):0;return 1===r?i:i+e*(r-1)},cacheTime:0,staleTime:0,onError:e=>c.telemetry.captureError(e,c.FeatureTag.Account)})}const b=(e,t)=>Math.ceil(e/t)*t+t})),i.register("fGTlj",(function(t,n){e(t.exports,"fetchDiscoverAccounts",(function(){return u}),(function(e){return u=e}));var r=i("iOvk1"),o=i("16XMG"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=`${(0,o.getAPIEnvironment)()}/discover/v1`,c={Accept:"application/json","Content-Type":"application/json"},u=e=>s(void 0,void 0,void 0,(function*(){if(!e.accounts.length)throw new Error("Must send at least 1 account for discovery");const t=yield fetch(a,{method:"POST",headers:c,body:JSON.stringify(e)}),n=yield t.json();if(200!==t.status){if((o=n)&&"string"==typeof o.message)throw new Error(n.message);throw new Error(`Unable to discover accounts with args: ${JSON.stringify(e)}`)}var o;if((e=>{if(!e||!Array.isArray(e.accounts))return!1;for(const t of e.accounts)if("string"!=typeof t.address||"string"!=typeof t.amount||t.lastActivityTimestamp&&"number"!=typeof t.lastActivityTimestamp||!t.chain||"string"!=typeof t.chain.id||!new Set(r.Chains.getAllNetworkIDs()).has(t.chain.id)||"string"!=typeof t.chain.name||"string"!=typeof t.chain.symbol||"string"!=typeof t.chain.imageUrl)return!1;return!0})(n))return n;throw new Error(`Invalid discover accounts response: ${JSON.stringify(n)}`)}))})),i.register("cZNQz",(function(t,n){e(t.exports,"getExistingAddressesSet",(function(){return r}));const r=e=>{const t=new Set;for(const n of e)for(const{address:e}of n.addresses)t.add(e);return t}})),i.register("1vrFI",(function(t,n){e(t.exports,"useIsFirstTimeOnboarding",(function(){return u}),(function(e){return u=e})),e(t.exports,"useSetIsFirstTimeOnboarding",(function(){return d}),(function(e){return d=e}));var r=i("9W7fs"),o=i("5ekp2"),s=i("d08rP"),a=i("jFh3h"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const u=e=>{const{data:t}=(0,o.useQuery)({queryKey:a.onboardingQueryKeys.firstTimeOnboarding,queryFn:()=>c(void 0,void 0,void 0,(function*(){const t=yield e.get(s.OnboardingStorageKeys.FirstTimeOnboarding);return null===t||t.isFirstTimeOnboarding}))});return t},d=(e,t)=>(0,r.useMutation)({mutationFn:n=>c(void 0,void 0,void 0,(function*(){yield e.set(s.OnboardingStorageKeys.FirstTimeOnboarding,{isFirstTimeOnboarding:n}),t.setQueryData(a.onboardingQueryKeys.firstTimeOnboarding,n)}))})})),i.register("eiyTy",(function(t,n){e(t.exports,"useIsResettingApp",(function(){return u}),(function(e){return u=e})),e(t.exports,"useSetIsResettingApp",(function(){return d}),(function(e){return d=e})),e(t.exports,"useSetIsFirstTimeResettingApp",(function(){return l}),(function(e){return l=e}));var r=i("9W7fs"),o=i("5ekp2"),s=i("d08rP"),a=i("jFh3h"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const u=e=>{const{data:t}=(0,o.useQuery)({queryKey:a.onboardingQueryKeys.isResettingApp,queryFn:()=>c(void 0,void 0,void 0,(function*(){const t=yield e.get(s.OnboardingStorageKeys.IsResettingApp);return null===t?{isResettingApp:!1,isFirstTimeResettingApp:!1}:t}))});return t},d=(e,t)=>(0,r.useMutation)({mutationFn:n=>c(void 0,void 0,void 0,(function*(){var r;const o=yield e.get(s.OnboardingStorageKeys.IsResettingApp),i=null!==(r=null==o?void 0:o.isFirstTimeResettingApp)&&void 0!==r&&r;yield e.set(s.OnboardingStorageKeys.IsResettingApp,{isResettingApp:n,isFirstTimeResettingApp:i}),t.setQueryData(a.onboardingQueryKeys.isResettingApp,{isResettingApp:n,isFirstTimeResettingApp:i})}))}),l=(e,t)=>(0,r.useMutation)({mutationFn:n=>c(void 0,void 0,void 0,(function*(){var r;const o=yield e.get(s.OnboardingStorageKeys.IsResettingApp),i=null!==(r=null==o?void 0:o.isResettingApp)&&void 0!==r&&r;yield e.set(s.OnboardingStorageKeys.IsResettingApp,{isResettingApp:i,isFirstTimeResettingApp:n}),t.setQueryData(a.onboardingQueryKeys.isResettingApp,{isResettingApp:i,isFirstTimeResettingApp:n})}))})})),i.register("1loje",(function(t,n){e(t.exports,"useSetTermsAcknowledgement",(function(){return a}),(function(e){return a=e}));var r=i("4xbAj"),o=i("9W7fs"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=(e,t)=>(0,o.useMutation)({mutationFn:n=>s(void 0,void 0,void 0,(function*(){yield e.set(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2,n),t.setQueryData([r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2],n)}))})})),i.register("aQ1g3",(function(t,n){e(t.exports,"useTermsAcknowledgement",(function(){return a}),(function(e){return a=e}));var r=i("4xbAj"),o=i("5ekp2"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=(e,t)=>(0,o.useQuery)({queryKey:[r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2],queryFn:()=>s(void 0,void 0,void 0,(function*(){const n=yield e.get(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2),o=yield((e,t,n)=>s(void 0,void 0,void 0,(function*(){if(e)return e;try{const e=yield n.get(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2);return e&&(yield t.set(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2,e),yield n.remove(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2)),t.get(r.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2)}catch(e){return null}})))(n,e,t);return!!o}))})})),i.register("3bN09",(function(t,n){e(t.exports,"useWhatsNewOverlay",(function(){return c}),(function(e){return c=e})),e(t.exports,"useSetAcknowledgeWhatsNewOverlay",(function(){return u}),(function(e){return u=e}));var r=i("HlEsU"),o=i("9W7fs"),s=i("5ekp2"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const c=e=>(0,s.useQuery)({queryKey:[r.StorageKeys.LastSeenWhatsNewId],queryFn:()=>a(void 0,void 0,void 0,(function*(){var t;return 37>(null!==(t=yield e.get(r.StorageKeys.LastSeenWhatsNewId))&&void 0!==t?t:0)}))}),u=(e,t)=>(0,o.useMutation)({mutationFn:()=>a(void 0,void 0,void 0,(function*(){yield e.set(r.StorageKeys.LastSeenWhatsNewId,37)})),onSuccess:()=>{t.setQueryData([r.StorageKeys.LastSeenWhatsNewId],!1)}})})),i.register("1eGkH",(function(t,n){e(t.exports,"BATCH_SIZE_BY_PLATFORM",(function(){return l}),(function(e){return l=e})),e(t.exports,"useSelectMultichainAccountsProps",(function(){return p}),(function(e){return p=e}));var r=i("43063"),o=i("RVqnc"),s=i("29o0l"),a=i("7z19N"),c=i("hwACv"),u=i("8taMK"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const l={extension:7,ios:7,android:7},p=({platform:e,seed:t,navigationCallback:n,storageCallback:i,enabledAddressTypes:p})=>{var f;const{t:h}=(0,r.useTranslation)(),g=h("onboardingSelectAccountsFindMoreAccounts"),[v,y]=(0,s.useState)({}),[m,T]=(0,s.useState)(!1),[w,b]=(0,s.useState)(!1),[E,A]=(0,s.useState)(g),S=(0,u.useCachedHDWallet)(t),{data:x,status:I,fetchNextPage:O,isFetchingNextPage:P}=(0,c.useDiscoverMultiChainAccounts)({batchSize:l[e],hdWallet:S,enabledAddressTypes:p}),C=(0,s.useMemo)((()=>{var e;return null!==(e=null==x?void 0:x.pages.flat())&&void 0!==e?e:[]}),[x]),R=(D=C,(0,s.useMemo)((()=>D?D.map((e=>"undiscovered"===e.status?e:Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>e.hasAccountActivity))}))):[]),[D]));var D;const k=(L=R,(0,s.useMemo)((()=>L.reduce(((e,t,n)=>(e[n]=0===n||t.isSelectedByDefault,e)),{})),[L]));var L;const N=((e,t)=>(0,s.useMemo)((()=>{var n;return null!==(n=null==e?void 0:e.reduce(((e,n,r)=>t[r]?[...e,n]:e),[]))&&void 0!==n?n:[]}),[e,t]))(C,v),M=(({activeAccountsNumber:e,allAccountsNumber:t,hasDiscoveryFailed:n})=>{const{t:o}=(0,r.useTranslation)(),i=e>0&&!n;return(0,s.useMemo)((()=>0===t?o("onboardingImportImportingFindingAccounts"):0===e?o("onboardingImportAccountsEmptyResult"):1===t?i?o("onboardingImportAccountsFoundAccounts_one",{numberOfWallets:e}):o("onboardingImportAccountsFoundAccountsNoActivity_one",{numberOfWallets:t}):t>1?i?o("onboardingImportAccountsFoundAccounts_other",{numberOfWallets:e}):o("onboardingImportAccountsFoundAccountsNoActivity_other",{numberOfWallets:t}):""),[e,t,i,o])})({activeAccountsNumber:R.length,allAccountsNumber:C.length,hasDiscoveryFailed:"undiscovered"===(null===(f=C[0])||void 0===f?void 0:f.status)});((e,t)=>{const{t:n}=(0,r.useTranslation)();(0,s.useEffect)((()=>{let r;if(e){const{pages:o}=e,i=o.length>1,s=0===o[o.length-1].length;i&&s&&(t(n("onboardingSelectAccountsFindMoreNoneFound")),r=setTimeout((()=>{t(n("onboardingSelectAccountsFindMoreAccounts"))}),3e3))}return()=>{r&&clearTimeout(r)}}),[e])})(x,A),((e,t)=>{(0,s.useEffect)((()=>{t((t=>{const{length:n}=Object.keys(e),r={};for(let o=0;o<n;o++)r[o]=void 0===t[o]?e[o]:t[o];return r}))}),[e,t])})(k,y);const _=(0,s.useCallback)((()=>b(!0)),[]),B=(0,s.useCallback)((e=>{if("success"!==I)return;const t=Object.assign({},v);t[e]=!t[e],y(t)}),[I,v,y]),j=(0,s.useCallback)((()=>d(void 0,void 0,void 0,(function*(){m||(T(!0),yield(0,o.delayAsync)(0),yield i(N,(0,a.generateImportedAccountChainAnalytics)(N)),n((0,a.generateImportedAccountChainAnalytics)(N)))}))),[m,N,n,i]),U={expanded:w,findMoreAccountsButtonText:E,isFetchingMoreAccounts:P,isImporting:m,renderedPages:R,selectedAccounts:v,subtitle:M,findMoreAccounts:O,onExpand:_,onImport:j,onSelect:B};return"success"!==I?Object.assign({status:"loading",isImportButtonDisabled:!0},U):Object.assign({status:"success",isImportButtonDisabled:0===N.length},U)}})),i.register("7z19N",(function(t,n){e(t.exports,"generateImportedAccountChainAnalytics",(function(){return r}));const r=e=>e.reduce(((e,t)=>{var n,r,o,i;let s=e;for(const a of t.accounts){const t=a.chain.name.toLowerCase();if((null===(n=e[t])||void 0===n?void 0:n.balance)&&(null===(r=e[t])||void 0===r?void 0:r.history))continue;const c="amount"in a&&parseFloat(a.amount)>0,u=a.hasAccountActivity;e[t]?s=Object.assign(Object.assign({},s),{[t]:Object.assign(Object.assign({},s[t]),{balance:c||(null===(o=s[t])||void 0===o?void 0:o.balance),history:u||(null===(i=s[t])||void 0===i?void 0:i.history)})}):s=Object.assign(Object.assign({},s),{[t]:{balance:c,history:u}})}return s}),{})})),i.register("8taMK",(function(t,n){e(t.exports,"useCachedHDWallet",(function(){return s}));var r=i("jZpRu"),o=i("29o0l");const s=e=>{const[t,n]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(e.length){const t=new(0,r.CachedHDWallet)(e);return n(t),()=>{n(null),t.cleanup()}}}),[e]),t}})),i.register("7cOUp",(function(t,n){e(t.exports,"OnboardingType",(function(){return r}));var r,o,s=i("7XqVB");(o=r||(r={})).Initial="initial",o.Create="create",o.Import="import",o.Restore="restore",o.Append="append",o.SeedVault="seedVault";const a=s.z.object({balance:s.z.boolean(),history:s.z.boolean()});s.z.record(s.z.string(),a)})),i.register("7n0ia",(function(e,t){i("jFh3h")})),i.register("iMnOw",(function(t,n){e(t.exports,"prefetchShortcuts",(function(){return i("hhqwY").prefetchShortcuts})),e(t.exports,"trackLinkOpen",(function(){return i("iGNwb").trackLinkOpen})),e(t.exports,"trackModalOpen",(function(){return i("iGNwb").trackModalOpen})),e(t.exports,"createShortcutHooks",(function(){return i("cxnZW").createShortcutHooks})),e(t.exports,"DEFAULT_ICON",(function(){return i("6xd2z").DEFAULT_ICON})),e(t.exports,"getIcon",(function(){return i("itgZy").getIcon})),e(t.exports,"WALLET_SHORTCUTS_QUERY_KEY",(function(){return i("eSfrU").WALLET_SHORTCUTS_QUERY_KEY}));i("hhqwY"),i("iGNwb"),i("cxnZW"),i("2HIjl"),i("6xd2z"),i("itgZy"),i("eSfrU")})),i.register("hhqwY",(function(t,n){e(t.exports,"prefetchShortcuts",(function(){return a}));var r=i("eSfrU"),o=i("3cTmb");const s=10;function a(e,t,n,i){if(!n)return;const{externalUrl:a,isSpam:c,items:u}=n;if(c||!i)return;const d=(null!=u?u:[]).map((e=>e.externalUrl));Array.from(new Set([a,...d])).reduce(((e,t)=>{const n=(0,o.ensureExternalUrl)(t);return(0,o.isValidUrl)(n)&&e.length<s?[...e,n]:e}),[]).forEach((n=>{const i=(0,o.ensureExternalUrl)(n);(0,o.isValidUrl)(i)&&t.prefetchQuery((0,r.getShortcutsQuery)(new URL(i),e)).catch((e=>{console.error(`Failed to prefetch ${i}`,e)}))}))}})),i.register("eSfrU",(function(t,n){e(t.exports,"WALLET_SHORTCUTS_QUERY_KEY",(function(){return a}),(function(e){return a=e})),e(t.exports,"getShortcutsQuery",(function(){return c}),(function(e){return c=e}));var r=i("6xd2z"),o=i("3cTmb"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a="wallet-shortcuts",c=(e,t)=>({queryKey:[a,null==e?void 0:e.toString()],queryFn(){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("URL is null");const n=(0,o.appendShortcut)(e),i=yield d(t,n);if(!1===r.SchemaType.safeParse(i).success)throw new Error(`Invalid shortcut response from URL ${n.toString()}`);return r.SchemaType.parse(i).shortcuts}))}}),u=new Error("Failed to fetch shortcuts for collection"),d=(e,t)=>s(void 0,void 0,void 0,(function*(){const n=`${e}/collectibles/v1/shortcuts`;let r;try{r=yield fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:t.toString()})})}catch(e){throw u}if(!r.ok)throw u;return r.json()}))})),i.register("6xd2z",(function(t,n){e(t.exports,"DEFAULT_ICON",(function(){return o})),e(t.exports,"SchemaType",(function(){return p}));var r=i("7XqVB");const o="default",s=r.z.union([r.z.literal("vote"),r.z.literal("vote-2"),r.z.literal("stake"),r.z.literal("stake-2"),r.z.literal("view"),r.z.literal("chat"),r.z.literal("tip"),r.z.literal("mint"),r.z.literal("mint-2"),r.z.literal("discord"),r.z.literal("twitter"),r.z.literal("twitter-2"),r.z.literal("x"),r.z.literal("instagram"),r.z.literal("telegram"),r.z.literal("leaderboard"),r.z.literal("gaming"),r.z.literal("gaming-2"),r.z.literal("generic-link"),r.z.literal("generic-add"),r.z.literal(o)]).optional().default(o).catch(o),a=r.z.object({label:r.z.string(),uri:r.z.string().url().refine((e=>e.startsWith("https://")||e.startsWith("solana:")),(e=>({message:`${e} is not a valid protocol`}))),prefersExternalTarget:r.z.boolean().optional().default(!1),preferredPresentation:r.z.union([r.z.literal("default"),r.z.literal("immerse")]).optional().default("immerse"),platform:r.z.union([r.z.literal("mobile"),r.z.literal("desktop"),r.z.literal("all")]).optional().default("all"),icon:s}),c=a.extend({limitToCollections:r.z.string().array().optional().default([]).refine((e=>0===e.length||e.every((e=>e.length))),(e=>({message:`${e} is not a valid array of collection ids`})))}),u=a.extend({type:r.z.literal("fungible"),limitToTokenAddresses:r.z.string().array().optional().default([]).refine((e=>0===e.length||e.every((e=>e.length))),(e=>({message:`${e} is not a valid array of token addresses`})))}),d=c.extend({type:r.z.literal("collectible").optional().default("collectible")}),l=r.z.union([d,u]),p=r.z.union([r.z.object({version:r.z.literal(1),shortcuts:r.z.array(c).optional().default([])}),r.z.object({version:r.z.literal(2),shortcuts:r.z.array(l).optional().default([])})]);r.z.object({collectionId:r.z.string().optional(),tokenId:r.z.string().optional(),ownerAddress:r.z.string().optional()})})),i.register("3cTmb",(function(t,n){e(t.exports,"appendShortcut",(function(){return r})),e(t.exports,"ensureExternalUrl",(function(){return o})),e(t.exports,"isValidUrl",(function(){return i}));const r=e=>{const t=e.pathname.split("/").filter((e=>""!==e)).join("/"),n=new URL(`https://${e.hostname}`);return n.pathname=t+"/shortcuts.json",n.search=e.search,n},o=e=>{if(!e||!e.trim())return"";const t=e.trim();return/^https?:\/\//.test(t)?t:`https://${t}`},i=e=>{if(!e)return!1;try{return new URL(e),!0}catch(e){return!1}}})),i.register("iGNwb",(function(t,n){e(t.exports,"trackLinkOpen",(function(){return o}),(function(e){return o=e})),e(t.exports,"trackModalOpen",(function(){return i}),(function(e){return i=e}));var r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function o(e,t){var{hostname:n,platform:o}=e,i=r(e,["hostname","platform"]);const s=n.includes("//")?new URL(n).hostname:n;return{data:"collectible"===i.type?{platform:o,hostname:s,collectionName:i.collectionName,label:t.label,uri:t.uri}:{hostname:s,platform:o,fungible:i.caip19,label:t.label,uri:t.uri}}}function i(e){var{hostname:t,platform:n}=e,o=r(e,["hostname","platform"]);const i=t.includes("//")?new URL(t).hostname:t;return{data:"collectible"===o.type?{platform:n,hostname:i,collectionName:o.collectionName}:{platform:n,hostname:i,fungible:o.caip19}}}})),i.register("cxnZW",(function(t,n){e(t.exports,"createShortcutHooks",(function(){return s}));var r=i("2HIjl"),o=i("g4RTB");function s(e,t){return{useShortcuts:(t,n,r)=>(0,o.useShortcuts)(e(),t,n,r),usePrefetchShortcuts:(n,o)=>(0,r.usePrefetchShortcuts)(e(),t,n,o)}}})),i.register("2HIjl",(function(t,n){e(t.exports,"usePrefetchShortcuts",(function(){return u})),e(t.exports,"useFetchShortcuts",(function(){return l}));var r=i("RVqnc"),o=i("5ekp2"),s=i("29o0l"),a=i("hhqwY"),c=i("eSfrU");const u=(e,t,n,r)=>{(0,s.useEffect)((()=>{(0,a.prefetchShortcuts)(e,t,n,r)}),[n,r,e,t])},d=(0,r.toMilliseconds)({minutes:5}),l=(e,t,n)=>{const r=null!==t&&n;return(0,o.useQuery)(Object.assign({enabled:r,cacheTime:d,staleTime:d,refetchInterval:!1,refetchOnMount:!1},(0,c.getShortcutsQuery)(t,e)))}})),i.register("g4RTB",(function(t,n){e(t.exports,"useShortcuts",(function(){return u}));var r=i("21aqi"),o=i("3cTmb"),s=i("2HIjl"),a=i("7vlRB");function c(e){return Boolean(e&&"object"==typeof e&&"type"in e&&"fungible"===e.type)}function u(e,t,n,r){var i,u;const l=function(e){return c(e)?(0,o.ensureExternalUrl)(e.externalUrl):(0,o.ensureExternalUrl)(null==e?void 0:e.externalUrl)}(t),p=(0,o.isValidUrl)(l)&&Boolean(l)&&!function(e){var t;return!c(e)&&(null===(t=null==e?void 0:e.collection.isSpam)||void 0===t||t)}(t)&&r,{data:f,isLoading:h}=(0,s.useFetchShortcuts)(e,p&&l?new URL(l):null,r),g=c(t)?"":null!==(i=d(t))&&void 0!==i?i:"",v=c(t)?t.tokenAddress:null!==(u=null==t?void 0:t.id)&&void 0!==u?u:"",y=c(t)?{platform:n,tokenAddress:v,type:"fungible"}:{platform:n,collectionId:g,type:"collectible"},m=(0,a.useMappedShortcuts)(null!=f?f:[],{collectionId:g,tokenId:v,ownerAddress:null==t?void 0:t.owner},y);return{isLoading:!t||h&&p,shortcuts:p?m:[]}}const d=e=>{if(null==e?void 0:e.chainData)return(0,r.isEthereumCollectibleChainData)(e.chainData)?e.chainData.contract:(0,r.isSolanaCollectibleChainData)(e.chainData)?e.collection.id:(0,r.isBitcoinCollectibleChainData)(e.chainData)?e.chainData.firstCreatedInscriptionId:void 0}})),i.register("7vlRB",(function(t,n){e(t.exports,"useMappedShortcuts",(function(){return a}));var r=i("29o0l"),o=i("isMve"),s=i("duQNm");const a=(e,t,n)=>(0,r.useMemo)((()=>{const r=(0,s.parse)({input:t,shortcuts:e});return(0,o.filter)(r,n)}),[e,t,n])})),i.register("isMve",(function(t,n){e(t.exports,"filter",(function(){return r}));const r=(e,t)=>e?e.filter((e=>"fungible"===t.type?function(e,t){const n="type"in e&&"fungible"===e.type?e:null;if(!n)return!1;const r="all"===n.platform||n.platform===t.platform,o=n.limitToTokenAddresses&&n.limitToTokenAddresses.length>0;return!(!r||o)||!(!r||!o)&&n.limitToTokenAddresses.some((e=>e===t.tokenAddress))}(e,t):function(e,t){const n="type"in e&&"collectible"!==e.type?null:e;if(!n)return!1;const r="all"===n.platform||n.platform===t.platform,o=n.limitToCollections&&n.limitToCollections.length>0;return!(!r||o)||!(!r||!o)&&n.limitToCollections.some((e=>e===t.collectionId))}(e,t))).slice(0,8):[]})),i.register("duQNm",(function(t,n){e(t.exports,"parse",(function(){return r}));const r=({input:e,shortcuts:t})=>{if(0===t.length)return[];let n=JSON.stringify(t);return e.collectionId&&(n=n.replaceAll("{{collectionId}}",e.collectionId)),e.tokenId&&(n=n.replaceAll("{{tokenId}}",e.tokenId)),e.ownerAddress&&(n=n.replaceAll("{{ownerAddress}}",e.ownerAddress)),JSON.parse(n)}})),i.register("itgZy",(function(t,n){e(t.exports,"getIcon",(function(){return a}));var r=i("RVqnc"),o=i("6xd2z");const s=[["twitter",[/twitter.com/i]],["x",[/x.com/i]],["discord",[/discord.com/i,/discord.gg/i]],["telegram",[/t.me/i]],["instagram",[/instagram.com/i]]];function a(e,t){const n=(0,r.getHostname)(e.toString());return t===o.DEFAULT_ICON&&n?function(e){for(const[t,n]of s)if(n.some((t=>t.test(e))))return t;return o.DEFAULT_ICON}(n):t}})),i.register("cqeOY",(function(t,n){e(t.exports,"getLegacyMnemonicFetcher",(function(){return a}),(function(e){return a=e}));var r=i("96hm7"),o=i("93ApY"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=()=>({fetch:()=>s(void 0,void 0,void 0,(function*(){const e=yield(0,o.getLegacyMnemonic)();if(!e)return null;switch(e.type){case"bip39":{const t=yield e.value.getMnemonic(),n=r.ObfuscatedBytes.from(t);return t.fill(0),n}case"deprecated":{const t=r.ObfuscatedBytes.from(e.value);return e.value.fill(0),t}}}))})})),i.register("93ApY",(function(n,r){e(n.exports,"lockExtension",(function(){return m}),(function(e){return m=e})),e(n.exports,"unlockExtension",(function(){return T}),(function(e){return T=e})),e(n.exports,"isExtensionUnlocked",(function(){return w}),(function(e){return w=e})),e(n.exports,"setPassword",(function(){return b}),(function(e){return b=e})),e(n.exports,"verifyPassword",(function(){return E}),(function(e){return E=e})),e(n.exports,"updatePassword",(function(){return A}),(function(e){return A=e})),e(n.exports,"importSeedAccount",(function(){return x}),(function(e){return x=e})),e(n.exports,"isExistingSeed",(function(){return I}),(function(e){return I=e})),e(n.exports,"exportPrivateKey",(function(){return R}),(function(e){return R=e})),e(n.exports,"exportEntropy",(function(){return D}),(function(e){return D=e})),e(n.exports,"hasOnboarded",(function(){return _}),(function(e){return _=e})),e(n.exports,"resetHasOnboarded",(function(){return B}),(function(e){return B=e})),e(n.exports,"getVaultProxy",(function(){return j}),(function(e){return j=e})),e(n.exports,"getLegacyMnemonic",(function(){return U}),(function(e){return U=e}));var o=i("4xbAj"),s=i("96hm7"),a=i("7mQ3Y");i("k8NWT");var c=i("b7bZs"),u=i("a2mOF"),d=i("RVqnc"),l=i("85iHy"),p=i("jqrFR"),f=i("hulLf"),h=i("fSBRP"),g=i("41yT6"),v=i("8tcqI").Buffer,y=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const m=()=>y(void 0,void 0,void 0,(function*(){const e=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.LockExtension),t=yield c.sendMessage(f.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),T=e=>y(void 0,void 0,void 0,(function*(){const t=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.UnlockExtension,e),n=yield c.sendMessage(f.browser.runtime,t);if("error"in n)throw new Error(n.error.message);if(!n.result)throw new Error("Missing unlock extension response.");const{isUnlocked:r,migrationResult:o}=n.result;if(void 0===r)throw new Error("Missing isUnlocked in unlock response.");if(void 0===o)throw new Error("Missing migrationResult in unlock response.");switch(o){case"success":yield g.queryClient.invalidateQueries({refetchType:"all"});break;case"no-migration":case"failure":break;default:(0,d.assertNever)(o)}return{isUnlocked:r,migrationResult:o}})),w=()=>y(void 0,void 0,void 0,(function*(){const e=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.IsExtensionUnlocked),t=yield c.sendMessage(f.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),b=e=>y(void 0,void 0,void 0,(function*(){const t=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.SetPassword,e),n=yield c.sendMessage(f.browser.runtime,t);if("error"in n)throw new Error(n.error.message);return n.result})),E=e=>y(void 0,void 0,void 0,(function*(){const t=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.VerifyPassword,e),n=yield c.sendMessage(f.browser.runtime,t);if("error"in n)throw new Error(n.error.message);return n.result})),A=e=>y(void 0,void 0,void 0,(function*(){const t=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.UpdatePassword,e),n=yield c.sendMessage(f.browser.runtime,t);if("error"in n)throw new Error(n.error.message);return n.result})),S=(e,t,n)=>y(void 0,void 0,void 0,(function*(){const r=t.fold((e=>v.from(e.buffer).toString("base64"))),o=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.ImportPrivateKeyAccount,[e,r,n]),i=yield c.sendMessage(f.browser.runtime,o);if("error"in i)throw new Error(i.error.message);if("string"==typeof i.result)return JSON.parse(i.result);throw new Error("Invalid response")})),x=(e,n,r)=>y(void 0,void 0,void 0,(function*(){const o=e.getEntropy(),i=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.ImportSeedAccount,[t(l).encode(o),n,r]);o.fill(0);const s=yield c.sendMessage(f.browser.runtime,i);if("error"in s)throw new Error(s.error.message);if("string"==typeof s.result)return JSON.parse(s.result);throw new Error("Invalid response")})),I=e=>y(void 0,void 0,void 0,(function*(){const n=e.getEntropy(),r=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.IsExistingSeed,t(l).encode(n));n.fill(0);const o=yield c.sendMessage(f.browser.runtime,r);if("error"in o)throw new Error(o.error.message);if("boolean"==typeof o.result||null===o.result)return o.result;throw new Error("Invalid response")})),O=e=>y(void 0,void 0,void 0,(function*(){const t=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.AddAccountForSeed,[e]),n=u.parse(yield f.browser.runtime.sendMessage(u.stringify(t)));if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return JSON.parse(n.result);throw new Error("Invalid response")})),P=(e,t)=>y(void 0,void 0,void 0,(function*(){const n=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.AddLedgerAccounts,[e,t]),r=u.parse(yield f.browser.runtime.sendMessage(u.stringify(n)));if("error"in r)throw new Error(r.error.message);if("string"==typeof r.result)return JSON.parse(r.result);throw new Error("Invalid response")})),C=e=>y(void 0,void 0,void 0,(function*(){const t=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.ImportReadOnlyAccount,e),n=u.parse(yield f.browser.runtime.sendMessage(u.stringify(t)));if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return JSON.parse(n.result);throw new Error("Invalid response")})),R=(e,t)=>y(void 0,void 0,void 0,(function*(){const n=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.ExportPrivateKey,[e,t]),r=u.parse(yield f.browser.runtime.sendMessage(u.stringify(n)));if("error"in r)throw new Error(r.error.message);if("string"==typeof r.result)return s.ObfuscatedBytes.from(v.from(r.result,"hex"));throw new Error("Invalid response")})),D=e=>y(void 0,void 0,void 0,(function*(){const t=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.ExportEntropy,[e]),n=u.parse(yield f.browser.runtime.sendMessage(u.stringify(t)));if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return s.ObfuscatedBytes.from(v.from(n.result,"hex"));throw new Error("Invalid response")})),k=()=>y(void 0,void 0,void 0,(function*(){const e=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.DeriveAddresses),t=yield c.sendMessage(f.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),L=()=>y(void 0,void 0,void 0,(function*(){const e=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.GetAllAccounts),t=u.parse(yield f.browser.runtime.sendMessage(u.stringify(e)));if("error"in t)throw new Error(t.error.message);if("string"==typeof t.result){const e=JSON.parse(t.result);return(0,o.deserializeUint8Arrays)({accounts:e}).accounts}throw new Error("Invalid response")})),N=()=>y(void 0,void 0,void 0,(function*(){const e=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.GetAllSeeds),t=u.parse(yield f.browser.runtime.sendMessage(u.stringify(e)));if("error"in t)throw new Error(t.error.message);if("string"==typeof t.result)return JSON.parse(t.result);throw new Error("Invalid response")})),M=(e,n)=>y(void 0,void 0,void 0,(function*(){const r=o.VaultSignerParams.parse(n);r.chainType===a.AddressType.Solana&&"transaction"===r.signingType&&"string"!=typeof r.message&&(r.message=t(l).encode(r.message));const i=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.Sign,{accountIdentifier:e,params:r}),s=u.parse(yield f.browser.runtime.sendMessage(u.stringify(i)));if("error"in s)throw new Error(s.error.message);if("string"==typeof s.result)return JSON.parse(s.result);throw new Error("Invalid response")})),_=()=>y(void 0,void 0,void 0,(function*(){const e=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.HasOnboarded),t=yield c.sendMessage(f.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),B=()=>y(void 0,void 0,void 0,(function*(){const e=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.ResetHasOnboarded),t=yield c.sendMessage(f.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),j=()=>({addAccountForSeed:O,addReadonlyAccount:C,importPrivateKeyAccount:S,connectLedgerAccounts:P,fetchAllAccounts:L,fetchAllSeedMetas:N,connectSolanaSeedVaultAccounts:()=>{throw new Error("Solana Seed Vault is not supported on browser extension.")},deriveAddresses:k,removeAccount:e=>y(void 0,void 0,void 0,(function*(){const t=yield(e=>y(void 0,void 0,void 0,(function*(){const t=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.RemoveAccount,e),n=yield c.sendMessage(f.browser.runtime,t);if("error"in n)throw new Error(n.error.message);return n.result})))(e);if(!t)throw new Error("Error while removing account")})),reorderAccount:(e,t)=>y(void 0,void 0,void 0,(function*(){const n=yield((e,t)=>y(void 0,void 0,void 0,(function*(){const n=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.ReorderAccount,{identifier:e,toIndex:t}),r=yield c.sendMessage(f.browser.runtime,n);if("error"in r)throw new Error(r.error.message);return r.result})))(e,t);if(!n)throw new Error("Error while reordering account")})),sign:M}),U=()=>y(void 0,void 0,void 0,(function*(){const e=(0,p.createJsonRpcRequest)(p.WalletToBackgroundRequestMethods.GetLegacyMnemonic),n=u.parse(yield f.browser.runtime.sendMessage(u.stringify(e)));if("error"in n)throw new Error(n.error.message);if(!n.result)return null;const[r,o]=n.result;switch(r){case 0:{const e=new Uint8Array(t(l).decode(o).buffer),n=(yield(0,h.getBip39)()).fromEntropy(e);return e.fill(0),{type:"bip39",value:n}}case 1:return{type:"deprecated",value:new Uint8Array(t(l).decode(o).buffer)}}}))})),i.register("k8NWT",(function(t,n){e(t.exports,"parse",(function(){return i("a2mOF").parse})),e(t.exports,"stringify",(function(){return i("a2mOF").stringify})),e(t.exports,"handleRawMessage",(function(){return i("b7bZs").handleRawMessage})),e(t.exports,"sendMessage",(function(){return i("b7bZs").sendMessage}));i("a2mOF"),i("b7bZs")})),i.register("a2mOF",(function(t,n){e(t.exports,"stringify",(function(){return a})),e(t.exports,"parse",(function(){return c}));var r=i("f8DF4");const o=function(e){const t=this[e];for(const e of Object.values(r.ALL_SERIALIZERS))if(e.canSerialize(t))return e.serialize(t);return t},s=(e,t)=>{if(t&&"object"==typeof t&&Object.keys(t)[0]){const e=Object.keys(t)[0].slice(1);if(e in r.ALL_SERIALIZERS)return r.ALL_SERIALIZERS[e].deserialize(t)}return t},a=e=>JSON.stringify(e,o),c=e=>JSON.parse(e,s)})),i.register("f8DF4",(function(t,n){e(t.exports,"ALL_SERIALIZERS",(function(){return d}));var r=i("30RMS");const o={canSerialize:e=>"number"==typeof e&&Number.isNaN(e),serialize:e=>({["$"+r.SUPPORTED_TYPES.NAN]:1}),deserialize:e=>NaN},s={canSerialize:e=>e instanceof Date,serialize:e=>({[`$${r.SUPPORTED_TYPES.DATE}`]:e.valueOf()}),deserialize:e=>new Date(e[`$${r.SUPPORTED_TYPES.DATE}`])},a={canSerialize:e=>e instanceof Uint8Array,serialize:e=>({[`$${r.SUPPORTED_TYPES.UINT8ARRAY}`]:Array.from(e)}),deserialize:e=>Uint8Array.from(e[`$${r.SUPPORTED_TYPES.UINT8ARRAY}`])},c={canSerialize:e=>"bigint"==typeof e,serialize:e=>({[`$${r.SUPPORTED_TYPES.BIGINT}`]:e.toString()}),deserialize:e=>BigInt(e[`$${r.SUPPORTED_TYPES.BIGINT}`])},u={canSerialize:e=>e instanceof URL,serialize:e=>({[`$${r.SUPPORTED_TYPES.URL}`]:e.href}),deserialize:e=>new URL(e[`$${r.SUPPORTED_TYPES.URL}`])},d={[r.SUPPORTED_TYPES.NAN]:o,[r.SUPPORTED_TYPES.DATE]:s,[r.SUPPORTED_TYPES.UINT8ARRAY]:a,[r.SUPPORTED_TYPES.BIGINT]:c,[r.SUPPORTED_TYPES.URL]:u}})),i.register("30RMS",(function(t,n){var r,o;e(t.exports,"SUPPORTED_TYPES",(function(){return r})),(o=r||(r={})).NAN="NAN",o.DATE="DATE",o.UINT8ARRAY="UINT8ARRAY",o.BIGINT="BIGINT",o.URL="URL"})),i.register("b7bZs",(function(t,n){e(t.exports,"sendMessage",(function(){return s}),(function(e){return s=e})),e(t.exports,"handleRawMessage",(function(){return a}),(function(e){return a=e}));var r=i("a2mOF"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const s=(e,t)=>o(void 0,void 0,void 0,(function*(){return(0,r.parse)(yield e.sendMessage((0,r.stringify)(t)))})),a=e=>(t,n)=>o(void 0,void 0,void 0,(function*(){const o=(0,r.parse)(t),i=yield e(o,n);return(0,r.stringify)(i)}))})),i.register("jqrFR",(function(t,n){var r,o,i,s;e(t.exports,"WalletToBackgroundRequestMethods",(function(){return r})),e(t.exports,"RpcErrorCode",(function(){return i})),e(t.exports,"createJsonRpcErrorResponse",(function(){return c})),e(t.exports,"createJsonRpcResponse",(function(){return d})),e(t.exports,"createJsonRpcRequest",(function(){return l})),(o=r||(r={})).LockExtension="lockExtension",o.UnlockExtension="unlockExtension",o.IsExtensionUnlocked="IsExtensionUnlocked",o.SetPassword="setPassword",o.VerifyPassword="verifyPassword",o.UpdatePassword="updatePassword",o.ImportPrivateKeyAccount="importPrivateKeyAccount",o.ImportReadOnlyAccount="importReadOnlyAccount",o.ImportSeedAccount="importSeedAccount",o.IsExistingSeed="isExistingSeed",o.AddAccountForSeed="addAccountForSeed",o.AddLedgerAccounts="addLedgerAccounts",o.DeriveAddresses="deriveAddresses",o.ExportPrivateKey="exportPrivateKey",o.ExportEntropy="exportEntropy",o.SetAccountIcon="setAccountIcon",o.RemoveAccount="removeAccount",o.ReorderAccount="reorderAccount",o.GetAllAccounts="getAllAccounts",o.GetAllSeeds="getAllSeeds",o.Sign="sign",o.HasOnboarded="hasOnboarded",o.ResetHasOnboarded="resetHasOnboarded",o.ProviderInjectionOptions="providerInjectionOptions",o.HasMnemonic="hasMnemonic",o.GetLegacyMnemonic="getLegacyMnemonic",o.SetMnemonic="setMnemonic",o.GetSeed="getSeed",(s=i||(i={}))[s.UserRejectedRequest=4001]="UserRejectedRequest",s[s.Unauthorized=4100]="Unauthorized",s[s.Disconnected=4900]="Disconnected",s[s.InternalError=-32603]="InternalError",s[s.InvalidInput=-32e3]="InvalidInput",s[s.MethodNotFound=-32601]="MethodNotFound",s[s.TransactionRejected=-32003]="TransactionRejected",s[s.ResourceUnavailable=-32002]="ResourceUnavailable";const a={[i.UserRejectedRequest]:{message:"User rejected the request."},[i.InternalError]:{message:"Something went wrong."},[i.MethodNotFound]:{message:"Method does not exist."},[i.InvalidInput]:{message:"Missing or invalid parameters."},[i.Unauthorized]:{message:"The requested method and/or account has not been authorized by the user."},[i.Disconnected]:{message:"Error connecting to the blockchain."},[i.TransactionRejected]:{message:"Transaction creation failed."},[i.ResourceUnavailable]:{message:"Requested resource not available."}},c=(e,t,n)=>({jsonrpc:"2.0",id:e,error:u(t,n)}),u=(e,t)=>({code:e,message:null!=t?t:a[e].message}),d=(e,t)=>({jsonrpc:"2.0",id:e,result:t}),l=(e,t,n=Date.now())=>({jsonrpc:"2.0",id:n,method:e,params:t})})),i.register("fSBRP",(function(t,n){e(t.exports,"getBip39",(function(){return s}),(function(e){return s=e})),i("dyTLY");var r=i("28ipF");i("aNyyc");var o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const s=(()=>{let e=null;return()=>o(void 0,void 0,void 0,(function*(){e||(e=yield r.Bip39Factory.webCrypto("english"));return e}))})()})),i.register("dyTLY",(function(t,n){e(t.exports,"Bip39Factory",(function(){return i("28ipF").Bip39Factory}));i("1GBLm"),i("28ipF")})),i.register("1GBLm",(function(t,n){e(t.exports,"ERR_UNKNOWN",(function(){return o}),(function(e){return o=e})),e(t.exports,"ERR_INVALID_CHECKSUM",(function(){return a}),(function(e){return a=e})),e(t.exports,"assertEntropyLengthIsValid",(function(){return p}),(function(e){return p=e})),e(t.exports,"assertWordlistIsValid",(function(){return h}),(function(e){return h=e})),e(t.exports,"generateEntropy",(function(){return g}),(function(e){return g=e})),e(t.exports,"deriveBits",(function(){return v}),(function(e){return v=e})),e(t.exports,"mapBitsToIndexes",(function(){return y}),(function(e){return y=e})),e(t.exports,"indexesToEntropy",(function(){return m}),(function(e){return m=e})),e(t.exports,"entropyToIndexes",(function(){return T}),(function(e){return T=e})),e(t.exports,"mnemonicToIndexes",(function(){return w}),(function(e){return w=e})),e(t.exports,"entropyToMnemonic",(function(){return b}),(function(e){return b=e})),e(t.exports,"entropyToSeed",(function(){return A}),(function(e){return A=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const o=new Error("Unknown error"),i=new Error("Invalid entropy length"),s=new Error("Invalid mn*monic sentence length"),a=new Error("Invalid checksum"),c=new RangeError("Invalid mn*monic word"),u=new RangeError("Invalid wordlist"),d=new RangeError("Invalid wordlist index"),l=(e,t)=>{if(!e)throw t};function p(e){l(e>=128,i),l(e<=256,i),l(e%32==0,i)}function f(e){l(e>=12,s),l(e<=24,s),l(e%3==0,s)}function h(e){l(2048===e.length,u),l(e.every((e=>"string"==typeof e)),u)}function g(e,t){return f(e),t(4*e/3)}function v(e,t){return r(this,void 0,void 0,(function*(){const n=8*e.length;p(n);const r=n/32,o=yield t(e),[i]=o,s=8-r,a=i>>>s<<s>>>0,c=new Uint8Array(e.length+1);return c.set(e,0),c[c.length-1]=a,c}))}function y(e){const t=8*(e.length-1);p(t);const n=(t+t/32)/11,r=new ArrayBuffer(4*n),o=new DataView(r);let i=0,a=0,c=0;for(const t of e)if(c+=8,a|=t<<32-c,a>>>=0,c>=11){const e=a>>>21;l(e>=0&&e<=2047,d),o.setUint32(4*i,e,!0),i++,a<<=11,a>>>=0,c-=11}return l(i===n,s),new Uint32Array(r)}function m(e){f(e.length);const t=function(e){f(e.length);const t=11*e.length,n=new ArrayBuffer(Math.ceil(t/8)),r=new DataView(n),o=new DataView(e.buffer),i=e.length;let s=0,a=0,c=0,u=8;for(let e=0;e<i;e++){const t=o.getUint32(4*e,!0);l(t<2048,d);let n=11;for(;n>0;){const e=n>=u?u:n;s|=t>>32-(32-n)-e&(1<<e)-1,a+=e,s<<=u-e,s>>>=0,n-=e,u-=e,u<=0&&(u=8),a%8==0&&(r.setUint8(c,s),c++,s=0)}}return i%8!=0&&r.setUint8(c,s),new Uint8Array(n)}(e),n=t.slice(0,t.length-1);return t.fill(0),n}function T(e,t){return r(this,void 0,void 0,(function*(){p(8*e.length);const n=yield v(e,t),r=y(n);return n.fill(0),r}))}function w(e,t){h(t);const n=new Set(t),r=new Uint32Array(24);let o=0,i="";for(let s=0;s<e.length;s++){const a=e[s],u=32===a,d=s===e.length-1;if(d&&(i+=String.fromCharCode(a)),u||d){l(n.has(i),c);let e=0;for(const n of t){if(i===n)break;e++}r[o++]=e,i=""}else i+=String.fromCharCode(a)}f(o);const s=r.slice(0,o);return r.fill(0),s}function b(e,t,n){return r(this,void 0,void 0,(function*(){const r=yield T(e,n),o=new Uint8Array(r.reduce(((e,n)=>e+t[n].length+1),-1));let i=0;for(const e of r){i>0&&(o[i++]=32);const n=t[e];for(const e of n)o[i++]=e.charCodeAt(0)}return r.fill(0),o}))}const E=Uint8Array.of(109,110,101,109,111,110,105,99);function A(e,t,n,o,i){return r(this,void 0,void 0,(function*(){const r=yield b(e,n,o),s=new Uint8Array(E.length+t.length);s.set(E,0),s.set(t,E.length);const a=yield i(r,s,2048,64,"sha512");return s.fill(0),r.fill(0),a}))}})),i.register("28ipF",(function(t,n){e(t.exports,"Bip39Factory",(function(){return f}),(function(e){return f=e}));var r=i("1GBLm"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},a=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};function c(e){return o(this,void 0,void 0,(function*(){if("english"===e)return(yield i("k9uFn")).default}))}function u(e){return t=>new e(t)}function d(e,t){return n=>o(this,void 0,void 0,(function*(){let o=null,i=null,s=null,a=null,c=null;try{i=(0,r.indexesToEntropy)(n),s=yield(0,r.deriveBits)(i,t),a=(0,r.mapBitsToIndexes)(s);const o=n[n.length-1];if(o!==a[a.length-1])throw r.ERR_INVALID_CHECKSUM;c=e.fromEntropy(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=r.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),null==s||s.fill(0),null==a||a.fill(0),o)throw o;return c}}))}function l(e,t){return n=>o(this,void 0,void 0,(function*(){let o=null,i=null,s=null;try{i=(0,r.mnemonicToIndexes)(n,t),s=yield e.fromIndexes(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=r.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),o)throw o;return s}}))}function p(e,t){return n=>{let o=null,i=null,s=null;try{i=(0,r.generateEntropy)(n,t),s=e.fromEntropy(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=r.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),o)throw o;return s}}}class f{static webCrypto(e){var t,n;return o(this,void 0,void 0,(function*(){const i="string"==typeof e?yield c(e):e;(0,r.assertWordlistIsValid)(i);const f=e=>o(this,void 0,void 0,(function*(){return new Uint8Array(yield crypto.subtle.digest("SHA-256",e))})),h=(e,t,n,r,i)=>o(this,void 0,void 0,(function*(){const o="SHA-"+i.substring(3),s=yield crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]),a=yield crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:o},s,8*r);return new Uint8Array(a)}));return n=class{constructor(e){t.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,r.entropyToSeed)(a(this,t,"f"),e,i,f,h),this.getEntropy=()=>a(this,t,"f").slice(),this.getIndexes=()=>(0,r.entropyToIndexes)(a(this,t,"f"),f),this.getMnemonic=()=>(0,r.entropyToMnemonic)(a(this,t,"f"),i,f),this.getSentenceLength=()=>{const e=8*a(this,t,"f").length;return(e+e/32)/11},(0,r.assertEntropyLengthIsValid)(8*e.length),s(this,t,e.slice(),"f")}},t=new WeakMap,n.fromEntropy=u(n),n.fromIndexes=d(n,f),n.fromMnemonic=l(n,i),n.fromSentenceLength=p(n,(e=>crypto.getRandomValues(new Uint8Array(e)))),n.wordlist=i,n}))}static nodeCrypto(e){var t,n;return o(this,void 0,void 0,(function*(){const o="string"==typeof e?yield c(e):e;(0,r.assertWordlistIsValid)(o);const{randomBytes:f,createHash:h,pbkdf2:g}=yield i("b10u0"),v=e=>new Uint8Array(h("sha256").update(e).digest().buffer),y=(...e)=>new Promise(((t,n)=>{g(...e,((e,r)=>{if(e)return n(e);t(new Uint8Array(r.buffer))}))}));return n=class{constructor(e){t.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,r.entropyToSeed)(a(this,t,"f"),e,o,v,y),this.getEntropy=()=>a(this,t,"f").slice(),this.getIndexes=()=>(0,r.entropyToIndexes)(a(this,t,"f"),v),this.getMnemonic=()=>(0,r.entropyToMnemonic)(a(this,t,"f"),o,v),this.getSentenceLength=()=>{const e=8*a(this,t,"f").length;return(e+e/32)/11},(0,r.assertEntropyLengthIsValid)(8*e.length),s(this,t,e.slice(),"f")}},t=new WeakMap,n.fromEntropy=u(n),n.fromIndexes=d(n,v),n.fromMnemonic=l(n,o),n.fromSentenceLength=p(n,(e=>new Uint8Array(f(e).buffer))),n.wordlist=o,n}))}static customCrypto(e,t){var n,i;return o(this,void 0,void 0,(function*(){const o="string"==typeof e?yield c(e):e;(0,r.assertWordlistIsValid)(o);const{random:f,sha256:h,pbkdf2:g}=t;return i=class{constructor(e){n.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,r.entropyToSeed)(a(this,n,"f"),e,o,h,g),this.getEntropy=()=>a(this,n,"f").slice(),this.getIndexes=()=>(0,r.entropyToIndexes)(a(this,n,"f"),h),this.getMnemonic=()=>(0,r.entropyToMnemonic)(a(this,n,"f"),o,h),this.getSentenceLength=()=>{const e=8*a(this,n,"f").length;return(e+e/32)/11},(0,r.assertEntropyLengthIsValid)(8*e.length),s(this,n,e.slice(),"f")}},n=new WeakMap,i.fromEntropy=u(i),i.fromIndexes=d(i,h),i.fromMnemonic=l(i,o),i.fromSentenceLength=p(i,f),i.wordlist=o,i}))}}})),i.register("k9uFn",(function(e,t){e.exports=i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("8ZV50")).then((()=>i("jI6Lx")))})),i.register("b10u0",(function(e,t){e.exports=i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("bSKtD")).then((()=>i("ieXYQ")))})),i.register("dbmto",(function(t,n){e(t.exports,"getLedgerWebHIDDependencies",(function(){return c}),(function(e){return c=e}));var r=i("2jR04"),o=i("c8OXT"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const a=()=>s(void 0,void 0,void 0,(function*(){const{default:e}=yield i("gb8pr");return e})),c=()=>({defaultTransportTimeout:2e3,isSupported:()=>s(void 0,void 0,void 0,(function*(){if(o.BROWSER_ENV.browser.name===r.BROWSER_MAP.firefox||o.BROWSER_ENV.browser.name===r.BROWSER_MAP.safari)return!1;return(yield a()).isSupported()})),getNumDevices:()=>s(void 0,void 0,void 0,(function*(){const e=yield a();return(yield e.list()).length})),getFirstOpenedTransport:()=>s(void 0,void 0,void 0,(function*(){const e=yield a(),t=(yield e.list()).find((e=>e.opened));return t?new e(t):void 0})),create:()=>s(void 0,void 0,void 0,(function*(){return(yield a()).create()})),openConnected:()=>s(void 0,void 0,void 0,(function*(){const e=yield a();return yield e.openConnected()})),request:()=>s(void 0,void 0,void 0,(function*(){const e=yield a();return yield e.request()})),on:(e,t)=>{"hid"in window.navigator&&window.navigator.hid.addEventListener(e,(()=>{t()}))}})})),i.register("gb8pr",(function(e,t){e.exports=Promise.all([i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("4nmlj")),i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("ddATe")),i("j1yuj")(i("2FqAO").getBundleURL("i8FRQ")+i("eOkdY").resolve("99t1D"))]).then((()=>i("bnr7p")))})),i.register("hxhxc",(function(t,n){e(t.exports,"hexToRGB",(function(){return r}));const r=(e,t)=>{const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return"number"==typeof t?"rgba("+n+", "+r+", "+o+", "+t+")":"rgb("+n+", "+r+", "+o+")"}})),i.register("6UMd8",(function(t,n){e(t.exports,"Circle",(function(){return o}));var r=i("hxhxc");const o=i("gkfw3").default.div`
  height: ${e=>e.diameter}px;
  width: ${e=>e.diameter}px;
  margin: ${e=>e.margin};
  background-color: ${e=>e.alpha&&e.color?(0,r.hexToRGB)(e.color,e.alpha):e.color};
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  opacity: ${e=>e.opacity};
  overflow: hidden;
  ${e=>e.includeDarkBoxShadow?"box-shadow: inset 0px 0px 4px rgba(0, 0, 0, 0.25);":""}
`;o.defaultProps={color:"#333333",diameter:24,opacity:1}})),i.register("2eJU6",(function(t,n){e(t.exports,"useIsomorphicLayoutEffect",(function(){return o}));var r=i("29o0l"),o=(0,i("7hYQv").canUseDOM)()?r.useLayoutEffect:r.useEffect})),i.register("7hYQv",(function(t,n){function r(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}e(t.exports,"canUseDOM",(function(){return r}))})),i.register("18uvf",(function(t,n){function r(e){}function o(e,t,n){}e(t.exports,"useCheckStyles",(function(){return r})),e(t.exports,"useControlledSwitchWarning",(function(){return o})),i("29o0l")})),i.register("cXfhD",(function(t,n){e(t.exports,"useComposedRefs",(function(){return u}));var r=i("29o0l"),o=i("aYhYb");function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function c(e,t){if(null!=e)if((0,o.isFunction)(e))e(t);else try{e.current=t}catch(n){throw new Error('Cannot assign value "'+t+'" to ref "'+e+'"')}}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useCallback)((function(e){for(var n,r=a(t);!(n=r()).done;){c(n.value,e)}}),t)}})),i.register("aYhYb",(function(t,n){function r(e){return"boolean"==typeof e}function o(e){return!(!e||"[object Function]"!={}.toString.call(e))}function i(e){return"string"==typeof e}e(t.exports,"isBoolean",(function(){return r})),e(t.exports,"isFunction",(function(){return o})),e(t.exports,"isString",(function(){return i}))})),i.register("5mEzL",(function(t,n){function r(e,t){return function(n){if(e&&e(n),!n.defaultPrevented)return t(n)}}e(t.exports,"composeEventHandlers",(function(){return r}))})),i.register("1I4L6",(function(t,n){function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(e){return!!e&&!!e[V]}function i(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===W}(e)||Array.isArray(e)||!!e[K]||!!e.constructor[K]||p(e)||f(e))}function s(e,t,n){void 0===n&&(n=!1),0===a(e)?(n?Object.keys:H)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function a(e){var t=e[V];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:p(e)?2:f(e)?3:0}function c(e,t){return 2===a(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){return 2===a(e)?e.get(t):e[t]}function d(e,t,n){var r=a(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function l(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){return U&&e instanceof Map}function f(e){return F&&e instanceof Set}function h(e){return e.o||e.t}function g(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=z(e);delete t[V];for(var n=H(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function v(e,t){return void 0===t&&(t=!1),m(e)||o(e)||!i(e)||(a(e)>1&&(e.set=e.add=e.clear=e.delete=y),Object.freeze(e),t&&s(e,(function(e,t){return v(t,!0)}),!0)),e}function y(){r(2)}function m(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function T(e){var t=$[e];return t||r(18,e),t}function w(){return B}function b(e,t){t&&(T("Patches"),e.u=[],e.s=[],e.v=t)}function E(e){A(e),e.p.forEach(x),e.p=null}function A(e){e===B&&(B=e.l)}function S(e){return B={p:[],l:B,h:e,m:!0,_:0}}function x(e){var t=e[V];0===t.i||1===t.i?t.j():t.O=!0}function I(e,t){t._=t.p.length;var n=t.p[0],o=void 0!==e&&e!==n;return t.h.g||T("ES5").S(t,e,o),o?(n[V].P&&(E(t),r(4)),i(e)&&(e=O(t,e),t.l||C(t,e)),t.u&&T("Patches").M(n[V].t,e,t.u,t.s)):e=O(t,n,[]),E(t),t.u&&t.v(t.u,t.s),e!==G?e:void 0}function O(e,t,n){if(m(t))return t;var r=t[V];if(!r)return s(t,(function(o,i){return P(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return C(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=g(r.k):r.o;s(3===r.i?new Set(o):o,(function(t,i){return P(e,r,o,t,i,n)})),C(e,o,!1),n&&e.u&&T("Patches").R(r,n,e.u,e.s)}return r.o}function P(e,t,n,r,s,a){if(o(s)){var u=O(e,s,a&&t&&3!==t.i&&!c(t.D,r)?a.concat(r):void 0);if(d(n,r,u),!o(u))return;e.m=!1}if(i(s)&&!m(s)){if(!e.h.F&&e._<1)return;O(e,s),t&&t.A.l||C(e,s)}}function C(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&v(t,n)}function R(e,t){var n=e[V];return(n?h(n):e)[t]}function D(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function k(e){e.P||(e.P=!0,e.l&&k(e.l))}function L(e){e.o||(e.o=g(e.t))}function N(e,t,n){var r=p(t)?T("MapSet").N(t,n):f(t)?T("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:w(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=Y;n&&(o=[r],i=Q);var s=Proxy.revocable(o,i),a=s.revoke,c=s.proxy;return r.k=c,r.j=a,c}(t,n):T("ES5").J(t,n);return(n?n.A:w()).p.push(r),r}function M(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return g(e)}e(t.exports,"default",(function(){return ee}));var _,B,j="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),U="undefined"!=typeof Map,F="undefined"!=typeof Set,q="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,G=j?Symbol.for("immer-nothing"):((_={})["immer-nothing"]=!0,_),K=j?Symbol.for("immer-draftable"):"__$immer_draftable",V=j?Symbol.for("immer-state"):"__$immer_state",W=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),H="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,z=Object.getOwnPropertyDescriptors||function(e){var t={};return H(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},$={},Y={get:function(e,t){if(t===V)return e;var n=h(e);if(!c(n,t))return function(e,t,n){var r,o=D(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!i(r)?r:r===R(e.t,t)?(L(e),e.o[t]=N(e.A.h,r,e)):r},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,n){var r=D(h(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=R(h(e),t),i=null==o?void 0:o[V];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(l(n,o)&&(void 0!==n||c(e.t,t)))return!0;L(e),k(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==R(e.t,t)||t in e.t?(e.D[t]=!1,L(e),k(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=h(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Q={};s(Y,(function(e,t){Q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Q.deleteProperty=function(e,t){return Q.set.call(this,e,t,void 0)},Q.set=function(e,t,n){return Y.set.call(this,e[0],t,n,e[0])};var X=function(){function e(e){var t=this;this.g=q,this.F=!0,this.produce=function(e,n,o){if("function"==typeof e&&"function"!=typeof n){var s=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=s);for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var c;if("function"!=typeof n&&r(6),void 0!==o&&"function"!=typeof o&&r(7),i(e)){var u=S(t),d=N(t,e,void 0),l=!0;try{c=n(d),l=!1}finally{l?E(u):A(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(e){return b(u,o),I(e,u)}),(function(e){throw E(u),e})):(b(u,o),I(c,u))}if(!e||"object"!=typeof e){if(void 0===(c=n(e))&&(c=e),c===G&&(c=void 0),t.F&&v(c,!0),o){var p=[],f=[];T("Patches").M(e,c,p,f),o(p,f)}return c}r(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))};var r,o,i=t.produce(e,n,(function(e,t){r=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,o]})):[i,r,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||r(8),o(e)&&(e=function(e){return o(e)||r(22,e),function e(t){if(!i(t))return t;var n,r=t[V],o=a(t);if(r){if(!r.P&&(r.i<4||!T("ES5").K(r)))return r.t;r.I=!0,n=M(t,o),r.I=!1}else n=M(t,o);return s(n,(function(t,o){r&&u(r.t,t)===o||d(n,t,e(o))})),3===o?new Set(n):n}(e)}(e));var t=S(this),n=N(this,e,void 0);return n[V].C=!0,A(t),n},t.finishDraft=function(e,t){var n=(e&&e[V]).A;return b(n,t),I(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!q&&r(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=T("Patches").$;return o(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),J=new X,Z=J.produce,ee=(J.produceWithPatches.bind(J),J.setAutoFreeze.bind(J),J.setUseProxies.bind(J),J.applyPatches.bind(J),J.createDraft.bind(J),J.finishDraft.bind(J),Z)})),i.register("84vNm",(function(t,n){e(t.exports,"default",(function(){return a}));var r=i("29o0l"),o=i("kn0JG"),s=function(e,t){return e===t};function a(e,t){void 0===t&&(t=s);var n=(0,r.useRef)(),i=(0,r.useRef)(e);return(0,o.useFirstMountState)()||t(i.current,e)||(n.current=i.current,i.current=e),n.current}})),i.register("kn0JG",(function(t,n){e(t.exports,"useFirstMountState",(function(){return o}));var r=i("29o0l");function o(){var e=(0,r.useRef)(!0);return e.current?(e.current=!1,!0):e.current}})),i.register("7CBpB",(function(t,n){e(t.exports,"createNamedContext",(function(){return o}));var r=i("29o0l");function o(e,t){return(0,r.createContext)(t)}})),i.register("634r8",(function(t,n){e(t.exports,"Row",(function(){return r}));const r=i("gkfw3").default.div`
  display: flex;
  flex-direction: row;
  width: ${e=>e.width};
  margin: ${e=>e.margin};
  padding: ${e=>e.padding};
  align-items: ${e=>e.align};
  justify-content: ${e=>e.justify};
`;r.defaultProps={width:"100%",align:"center",justify:"flex-start"}})),i.register("7bRVh",(function(n,r){e(n.exports,"TokenNameBadge",(function(){return u})),e(n.exports,"AddressTypeBadge",(function(){return d}));var o=i("5slFC"),s=i("29o0l"),a=i("gX5Te"),c=i("jBmjc");const u=({children:e,networkID:n,walletAddress:r})=>t(s).createElement(c.TitleBadgeWrapper,null,e,r?t(s).createElement(d,{networkID:n,address:r}):null),d=({networkID:e,address:n})=>{const r=a.hooks.useEnabledAddressTypes();if(!(0,o.showAddressTypeBadge)(r,e))return null;const i=(0,o.getAddressBadge)(e,n);return i?t(s).createElement(c.TitleBadge,{text:i}):null}})),i.register("jBmjc",(function(n,r){e(n.exports,"TitleBadge",(function(){return u})),e(n.exports,"TitleBadgeContainer",(function(){return l})),e(n.exports,"TitleBadgeWrapper",(function(){return d}));var o=i("29o0l"),s=i("hxhxc"),a=i("gkfw3"),c=i("27SDj");const u=({text:e})=>t(o).createElement(l,null,t(o).createElement(p,null,e)),d=a.default.div`
  display: flex;
  align-items: center;
`,l=a.default.div`
  background: ${(0,s.hexToRGB)("#FFFFFF",.1)};
  border-radius: 3px;
  padding: 0px 4px;
  color: white;
  display: inline-block;
  margin-left: 5px;
`,p=(0,a.default)(c.StyledText).attrs({size:12,lineHeight:17,weight:600,noWrap:!0})``})),i.register("bOxRX",(function(e,t){e.exports=i("hTL7p")()})),i.register("hTL7p",(function(e,t){"use strict";var n=i("9eJ3d");function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,r,o,i,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}})),i.register("9eJ3d",(function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"})),i.register("brdH9",(function(t,n){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r,o;e(t.exports,"assign",(function(){return a})),e(t.exports,"createMachine",(function(){return p})),e(t.exports,"interpret",(function(){return h})),(o=r||(r={}))[o.NotStarted=0]="NotStarted",o[o.Running=1]="Running",o[o.Stopped=2]="Stopped";var i={type:"xstate.init"};function s(e){return void 0===e?[]:[].concat(e)}function a(e){return{type:"xstate.assign",assignment:e}}function c(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function u(e){return function(t){return e===t}}function d(e){return"string"==typeof e?{type:e}:e}function l(e,t){return{value:e,context:t,actions:[],changed:!1,matches:u(e)}}function p(e,t){void 0===t&&(t={});var n={config:e,_options:t,initialState:{value:e.initial,actions:s(e.states[e.initial].entry).map((function(e){return c(e,t.actions)})),context:e.context,matches:u(e.initial)},transition:function(t,r){var o,i,a="string"==typeof t?{value:t,context:e.context}:t,p=a.value,f=a.context,h=d(r),g=e.states[p];if(g.on){var v=s(g.on[h.type]),y=function(t){if(void 0===t)return{value:l(p,f)};var r="string"==typeof t?{target:t}:t,o=r.target,i=void 0===o?p:o,s=r.actions,a=void 0===s?[]:s,d=r.cond,v=f;if((void 0===d?function(){return!0}:d)(f,h)){var y=e.states[i],m=!1,T=[].concat(g.exit,a,y.entry).filter((function(e){return e})).map((function(e){return c(e,n._options.actions)})).filter((function(e){if("xstate.assign"===e.type){m=!0;var t=Object.assign({},v);return"function"==typeof e.assignment?t=e.assignment(v,h):Object.keys(e.assignment).forEach((function(n){t[n]="function"==typeof e.assignment[n]?e.assignment[n](v,h):e.assignment[n]})),v=t,!1}return!0}));return{value:{value:i,context:v,actions:T,changed:i!==p||T.length>0||m,matches:u(i)}}}};try{for(var m=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(v),T=m.next();!T.done;T=m.next()){var w=y(T.value);if("object"==typeof w)return w.value}}catch(e){o={error:e}}finally{try{T&&!T.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}}return l(p,f)}};return n}var f=function(e,t){return e.actions.forEach((function(n){var r=n.exec;return r&&r(e.context,t)}))};function h(e){var t=e.initialState,n=r.NotStarted,o=new Set,s={_machine:e,send:function(i){n===r.Running&&(t=e.transition(t,i),f(t,d(i)),o.forEach((function(e){return e(t)})))},subscribe:function(e){return o.add(e),e(t),{unsubscribe:function(){return o.delete(e)}}},start:function(){return n=r.Running,f(t,i),s},stop:function(){return n=r.Stopped,o.clear(),s},get state(){return t},get status(){return n}};return s}})),i.register("guOPS",(function(t,n){e(t.exports,"useMachine",(function(){return d})),e(t.exports,"useCreateMachine",(function(){return l}));var r=i("29o0l"),o=i("brdH9"),s=(o=i("brdH9"),i("aYhYb")),a=i("tlhWQ");function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var u=function(e){var t;return e.subscribe((function(e){t=e})).unsubscribe(),t};function d(e,t,n){var i=(0,r.useRef)(e),d=(0,a.useConstant)((function(){return(0,o.interpret)(i.current).start()})),l=(0,r.useRef)(null),p=(0,r.useState)((function(){return u(d)})),f=p[0],h=p[1],g=(0,r.useCallback)((function(e){var n=(0,s.isString)(e)?{type:e}:e,r=function(e){return Object.entries(e).reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r.current,e}),{})}(t);d.send(c({},n,{lastEventType:l.current,refs:r})),l.current=n.type}),[n]);return(0,r.useEffect)((function(){return d.subscribe((function(e){e.changed&&h(e)})),function(){d.stop()}}),[d]),(0,r.useEffect)((function(){}),[n,f]),[(0,r.useMemo)((function(){return c({},f,{matches:function(e){return e===f.value}})}),[f.changed,f.context,f.value]),g,d]}function l(e,t){return(0,a.useConstant)((function(){return(0,o.createMachine)(e,t)}))}})),i.register("tlhWQ",(function(t,n){e(t.exports,"useConstant",(function(){return o}));var r=i("29o0l");function o(e){var t=(0,r.useRef)();return t.current||(t.current={v:e()}),t.current.v}})),i.register("cGJ3C",(function(n,r){e(n.exports,"ChainLogo",(function(){return u}));var o=i("iOvk1"),s=i("RVqnc"),a=i("29o0l"),c=i("j81qC");const u=t(a).memo((({networkID:e,height:n,width:r,stroke:i,strokeWidth:u,spacing:d="medium"})=>{if(!e)return null;const l={height:n,width:r,stroke:i,strokeWidth:u};return o.Chains.isBitcoinNetworkID(e)?"medium"===d?t(a).createElement(c.IconChainBitcoin,Object.assign({},l)):t(a).createElement(c.IconChainBitcoinLarge,Object.assign({},l)):o.Chains.isSolanaNetworkID(e)?"medium"===d?t(a).createElement(c.IconChainSolana,Object.assign({},l)):t(a).createElement(c.IconChainSolanaLarge,Object.assign({},l)):o.Chains.isEthereumNetworkID(e)?"medium"===d?t(a).createElement(c.IconChainEthereum,Object.assign({},l)):t(a).createElement(c.IconChainEthereumLarge,Object.assign({},l)):o.Chains.isPolygonNetworkID(e)?"medium"===d?t(a).createElement(c.IconChainPolygon,Object.assign({},l)):t(a).createElement(c.IconChainPolygonLarge,Object.assign({},l)):(0,s.assertNever)(e)}))})),i.register("lLNMU",(function(n,r){e(n.exports,"CheckboxGroup",(function(){return p}),(function(e){return p=e})),e(n.exports,"Checkbox",(function(){return f}),(function(e){return f=e}));var o=i("iI3jK"),s=i("29o0l"),a=i("gkfw3"),c=i("j81qC"),u=i("634r8"),d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const l=22;const p=(0,a.default)(u.Row)`
  margin: ${e=>{var t;return null!==(t=e.margin)&&void 0!==t?t:0}};
  > * {
    margin-right: 10px;
  }

  label {
    color: #ab9ff2;
    cursor: pointer;

    &:hover {
      color: #e2dffe;
    }
  }
`,f=e=>{const{checked:n,onChange:r,color:i,checkColor:a}=e,u=d(e,["checked","onChange","color","checkColor"]),p=function(e,t="#AB9FF2"){return(0,s.useMemo)((()=>({background:"#282828",border:`1px solid ${e?t:"#4d4d4d"}`,borderRadius:"6px",height:`${l}px`,minHeight:`${l}px`,width:`${l}px`,minWidth:`${l}px`,cursor:"pointer",userSelect:"none",position:"relative",outlineColor:"transparent",outlineStyle:"none",boxShadow:"none"})),[e,t])}(n,i),f=function(e,t="#AB9FF2"){return(0,s.useMemo)((()=>({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",width:"100%",height:"100%",userSelect:"none",pointerEvents:"none",borderRadius:"4px",opacity:""+(e?1:0),zIndex:1,background:e?t:"transparent"})),[e,t])}(n,i);return t(s).createElement(o.CustomCheckboxContainer,{checked:n,onChange:r,style:p},t(s).createElement(o.CustomCheckboxInput,Object.assign({},u)),t(s).createElement("span",{"aria-hidden":!0,style:f},t(s).createElement(c.IconCheckmark,{width:"0.9em",fill:a||"#222"})))}})),i.register("iI3jK",(function(t,n){e(t.exports,"CustomCheckboxContainer",(function(){return L})),e(t.exports,"CustomCheckboxInput",(function(){return N}));var r=i("29o0l"),o=i("7CBpB"),s=i("aYhYb"),a=i("18uvf"),c=i("cXfhD"),u=i("5mEzL"),d=i("2eJU6"),l=i("brdH9"),p=i("guOPS");function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var g,v,y,m,T,w=!1;function b(e){return!(!e||e.isControlled||e.disabled)}function E(e){return function(t,n){return t&&t.isControlled&&n.state===e}}(y=v||(v={})).Checked="checked",y.Mixed="mixed",y.Unchecked="unchecked",(T=m||(m={})).GetDerivedData="GET_DERIVED_DATA",T.Mount="MOUNT",T.Set="SET",T.Toggle="TOGGLE",T.Unmount="UNMOUNT";var A=(0,l.assign)((function(e,t){return f({},e,{refs:t.refs})})),S=((g={})[m.Mount]={actions:A},g[m.GetDerivedData]={actions:[A,(0,l.assign)((function(e,t){return f({},e,t.data)}))]},g[m.Set]=[{target:v.Checked,cond:E(v.Checked)},{target:v.Unchecked,cond:E(v.Unchecked)},{target:v.Mixed,cond:E(v.Mixed)}],g),x=function(e,t){var n,r,o,i;return{id:"mixed-checkbox",initial:e,context:{disabled:t.disabled,isControlled:t.isControlled,refs:{input:null}},states:(i={},i[v.Unchecked]={entry:A,on:f((n={},n[m.Toggle]={target:v.Checked,cond:b},n),S)},i[v.Checked]={entry:A,on:f((r={},r[m.Toggle]={target:v.Unchecked,cond:b},r),S)},i[v.Mixed]={entry:A,on:f((o={},o[m.Toggle]={target:v.Checked,cond:b},o),S)},i)}};function I(e,t,n){void 0===n&&(n="useMixedCheckbox");var o,i=t||{},s=i.checked,a=i.defaultChecked,c=i.disabled,l=i.onChange,f=i.onClick,h=null!=s,g=(0,p.useCreateMachine)(x(O(h?s:a),{disabled:!!c,isControlled:h})),y=(0,p.useMachine)(g,{input:e},w),T=y[0],b=y[1],E={"aria-checked":P(T.value),checked:(o=T.value,o===v.Checked),disabled:!!c,onChange:(0,u.composeEventHandlers)(l,(function(){h||b(m.Toggle)})),onClick:(0,u.composeEventHandlers)(f,(function(){S()})),type:"checkbox"},A={checked:P(T.value)};function S(){e.current&&(e.current.indeterminate=T.value===v.Mixed)}return(0,r.useEffect)((function(){h&&b({type:m.Set,state:O(s)})}),[h,s,b]),(0,d.useIsomorphicLayoutEffect)(S),(0,r.useEffect)((function(){b({type:m.GetDerivedData,data:{disabled:c,isControlled:h}})}),[c,h,b]),[E,A]}function O(e){return!0===e?v.Checked:"mixed"===e?v.Mixed:v.Unchecked}function P(e){return e===v.Checked||e===v.Mixed&&"mixed"}function C(e,t,n){var o=null!=e,i=(0,r.useRef)(o).current;(0,r.useEffect)((function(){}),[n,t,o,i])}var R=["as","checked","children","defaultChecked","disabled","onClick","onChange","__componentName"],D=["as","onBlur","onFocus"],k=(0,o.createNamedContext)("CustomCheckboxContext",{});var L=(0,r.forwardRef)((function(e,t){var n=e.as,o=void 0===n?"span":n,i=e.checked,c=e.children,d=e.defaultChecked,l=e.disabled,p=e.onClick,g=e.onChange,v=e.__componentName,y=void 0===v?"CustomCheckboxContainer":v,m=h(e,R),T=(0,r.useRef)(null),w=I(T,{defaultChecked:d,checked:i,disabled:l,onChange:g},y),b=w[0],E=w[1],A=(0,r.useState)(!1),S=A[0],x=A[1];var P={defaultChecked:d,disabled:l,focused:S,inputProps:b,inputRef:T,setFocused:x};return C(i,"checked",y),(0,a.useCheckStyles)("checkbox"),(0,r.createElement)(k.Provider,{value:P},(0,r.createElement)(o,f({},m,{ref:t,"data-reach-custom-checkbox-container":"","data-focused":S?"":void 0,"data-state":O(E.checked),onClick:(0,u.composeEventHandlers)(p,(function(){window.requestAnimationFrame((function(){T.current&&T.current.focus()}))}))}),(0,s.isFunction)(c)?c({checked:b["aria-checked"],inputRef:T,focused:S}):c))})),N=(0,r.forwardRef)((function(e,t){var n=e.as,o=void 0===n?"input":n,i=e.onBlur,s=e.onFocus,a=h(e,D),d=(0,r.useContext)(k),l=d.focused,p=d.inputProps,g=d.inputRef,v=d.setFocused,y=(0,c.useComposedRefs)(t,g),m=(0,r.useRef)(!0);return(0,r.useEffect)((function(){return function(){m.current=!1}}),[]),(0,r.createElement)(o,f({},a,p,{ref:y,type:"checkbox","data-reach-custom-checkbox-input":"","data-focused":l?"":void 0,onBlur:(0,u.composeEventHandlers)(i,(function(){window.requestAnimationFrame((function(){m.current&&v(!1)}))})),onFocus:(0,u.composeEventHandlers)(s,(function(){window.requestAnimationFrame((function(){m.current&&v(!0)}))}))}))}))})),i("6Yrae")}();
//# sourceMappingURL=ConnectHardwareMultichainFlow.317aa7cc.js.map
define=__define;})(window.define);